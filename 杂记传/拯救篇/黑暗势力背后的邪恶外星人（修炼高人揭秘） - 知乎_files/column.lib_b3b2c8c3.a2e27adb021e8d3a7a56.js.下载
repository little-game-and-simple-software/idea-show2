(self.webpackChunkheifetz=self.webpackChunkheifetz||[]).push([[428],{79172:function(module,__unused_webpack_exports,__webpack_require__){var e;e=function(){var define,module,exports;return function e(t,r,i){function n(a,s){if(!r[a]){if(!t[a]){var l=void 0;if(!s&&l)return require(a,!0);if(o)return o(a,!0);throw(s=new Error("Cannot find module '"+a+"'")).code="MODULE_NOT_FOUND",s}l=r[a]={exports:{}},t[a][0].call(l.exports,(function(e){return n(t[a][1][e]||e)}),l,l.exports,e,t,r,i)}return r[a].exports}for(var o=void 0,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,r){},{}],2:[function(e,t,r){(function(i){(function(){var n;n=function(){var t,r=Math;if("undefined"!=typeof window&&window.crypto&&(t=window.crypto),"undefined"!=typeof self&&self.crypto&&(t=self.crypto),!(t=!(t=!(t="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:t)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:t)&&void 0!==i&&i.crypto?i.crypto:t)&&"function"==typeof e)try{t=e("crypto")}catch(a){}var n=Object.create||function(e){return o.prototype=e,e=new o,o.prototype=null,e};function o(){}var a={},s=a.lib={},l=s.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=l.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||p).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes,n=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<n;o++){var a=r[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=a<<24-(i+o)%4*8}else for(var s=0;s<n;s+=4)t[i+s>>>2]=r[s>>>2];return this.sigBytes+=n,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=r.ceil(t/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var r=[],i=0;i<e;i+=4)r.push(function(){if(t){if("function"==typeof t.getRandomValues)try{return t.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof t.randomBytes)try{return t.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new c.init(r,e)}}),u=a.enc={},p=u.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=t[n>>>2]>>>24-n%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new c.init(r,t/2)}},d=u.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new c.init(r,t)}},h=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},f=s.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t,i=this._data,n=i.words,o=i.sigBytes,a=this.blockSize,s=o/(4*a),l=(s=e?r.ceil(s):r.max((0|s)-this._minBufferSize,0))*a;if(e=r.min(4*l,o),l){for(var u=0;u<l;u+=a)this._doProcessBlock(n,u);t=n.splice(0,l),i.sigBytes-=e}return new c.init(t,e)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),y=(s.Hasher=f.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new y.HMAC.init(e,r).finalize(t)}}}),a.algo={});return a},"object"==typeof r?t.exports=r=n():"function"==typeof define&&define.amd?define([],n):this.CryptoJS=n()}).call(this)}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crypto:1}],3:[function(e,t,r){var i;i=function(e){var t;return t=e.lib.WordArray,e.enc.Base64={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=this._map,n=(e.clamp(),[]),o=0;o<r;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<r;s++)n.push(i.charAt(a>>>6*(3-s)&63));var l=i.charAt(64);if(l)for(;n.length%4;)n.push(l);return n.join("")},parse:function(e){var r=e.length,i=this._map;if(!(n=this._reverseMap))for(var n=this._reverseMap=[],o=0;o<i.length;o++)n[i.charCodeAt(o)]=o;for(var a,s,l=i.charAt(64),c=(l&&-1!==(l=e.indexOf(l))&&(r=l),e),u=r,p=n,d=[],h=0,f=0;f<u;f++)f%4&&(a=p[c.charCodeAt(f-1)]<<f%4*2,s=p[c.charCodeAt(f)]>>>6-f%4*2,d[h>>>2]|=(a|s)<<24-h%4*8,h++);return t.create(d,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64},"object"==typeof r?t.exports=r=i(e("crypto-js/core")):"function"==typeof define&&define.amd?define(["crypto-js/core"],i):i(this.CryptoJS)},{"crypto-js/core":2}],4:[function(e,t,r){var i;i=function(e){return e.enc.Utf8},"object"==typeof r?t.exports=r=i(e("crypto-js/core")):"function"==typeof define&&define.amd?define(["crypto-js/core"],i):i(this.CryptoJS)},{"crypto-js/core":2}],5:[function(e,t,r){var i;i=function(e){return e.HmacSHA1},"object"==typeof r?t.exports=r=i(e("crypto-js/core"),e("crypto-js/sha1"),e("crypto-js/hmac")):"function"==typeof define&&define.amd?define(["crypto-js/core","crypto-js/sha1","crypto-js/hmac"],i):i(this.CryptoJS)},{"crypto-js/core":2,"crypto-js/hmac":6,"crypto-js/sha1":7}],6:[function(e,t,r){var i;i=function(e){var t,r;t=e.lib.Base,r=e.enc.Utf8,e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));for(var i=e.blockSize,n=4*i,o=((t=t.sigBytes>n?e.finalize(t):t).clamp(),e=this._oKey=t.clone(),t=this._iKey=t.clone(),e.words),a=t.words,s=0;s<i;s++)o[s]^=1549556828,a[s]^=909522486;e.sigBytes=t.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})},"object"==typeof r?t.exports=r=i(e("crypto-js/core")):"function"==typeof define&&define.amd?define(["crypto-js/core"],i):i(this.CryptoJS)},{"crypto-js/core":2}],7:[function(e,t,r){var i;i=function(e){var t,r,i,n,o;return r=(t=e).lib,i=r.WordArray,n=r.Hasher,r=t.algo,o=[],r=r.SHA1=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],a=r[2],s=r[3],l=r[4],c=0;c<80;c++){o[c]=c<16?0|e[t+c]:(u=o[c-3]^o[c-8]^o[c-14]^o[c-16])<<1|u>>>31;var u=(i<<5|i>>>27)+l+o[c];u+=c<20?1518500249+(n&a|~n&s):c<40?1859775393+(n^a^s):c<60?(n&a|n&s|a&s)-1894007588:(n^a^s)-899497514,l=s,s=a,a=n<<30|n>>>2,n=i,i=u}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+a|0,r[3]=r[3]+s|0,r[4]=r[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(64+i>>>9<<4)]=Math.floor(r/4294967296),t[15+(64+i>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=n._createHelper(r),t.HmacSHA1=n._createHmacHelper(r),e.SHA1},"object"==typeof r?t.exports=r=i(e("crypto-js/core")):"function"==typeof define&&define.amd?define(["crypto-js/core"],i):i(this.CryptoJS)},{"crypto-js/core":2}],8:[function(e,t,r){(function(r,i,n){(function(){(function(){"use strict";function o(e){return"function"==typeof e}var a,s,l,c=l=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},u=0,p=function(e,t){S[u]=e,S[u+1]=t,2===(u+=2)&&(s?s(b):E())},d=(d=(l="undefined"!=typeof window?window:void 0)||{}).MutationObserver||d.WebKitMutationObserver,h=void 0!==r&&"[object process]"==={}.toString.call(r),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function y(){return function(){setTimeout(b,1)}}var _,g,v,m,S=new Array(1e3);function b(){for(var e=0;e<u;e+=2)(0,S[e])(S[e+1]),S[e]=void 0,S[e+1]=void 0;u=0}function T(){}var E=h?(m=r.nextTick,h=r.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(h)&&"0"===h[1]&&"10"===h[2]&&(m=n),function(){m(b)}):d?(g=0,h=new d(b),v=document.createTextNode(""),h.observe(v,{characterData:!0}),function(){v.data=g=++g%2}):f?((_=new MessageChannel).port1.onmessage=b,function(){_.port2.postMessage(0)}):(void 0===l&&"function"==typeof e?function(){try{var t=e("vertx");return a=t.runOnLoop||t.runOnContext,function(){a(b)}}catch(t){return y()}}:y)(),w=void 0,x=new D;function P(e,t){var r,i;t.constructor===e.constructor?(r=e,1===(i=t)._state?I(r,i._result):2===i._state?L(r,i._result):A(i,void 0,(function(e){C(r,e)}),(function(e){L(r,e)}))):(i=function(e){try{return e.then}catch(e){return x.error=e,x}}(t))===x?L(e,x.error):void 0!==i&&o(i)?function(e,t,r){p((function(e){var i=!1,n=function(e,t,r,i){try{e.call(t,r,i)}catch(e){return e}}(r,t,(function(r){i||(i=!0,(t!==r?C:I)(e,r))}),(function(t){i||(i=!0,L(e,t))}),e._label);!i&&n&&(i=!0,L(e,n))}),e)}(e,t,i):I(e,t)}function C(e,t){var r;e===t?L(e,new TypeError("You cannot resolve a promise with itself")):("function"==typeof(r=t)||"object"==typeof r&&null!==r?P:I)(e,t)}function k(e){e._onerror&&e._onerror(e._result),R(e)}function I(e,t){e._state===w&&(e._result=t,e._state=1,0!==e._subscribers.length)&&p(R,e)}function L(e,t){e._state===w&&(e._state=2,e._result=t,p(k,e))}function A(e,t,r,i){var n=e._subscribers,o=n.length;e._onerror=null,n[o]=t,n[o+1]=r,n[o+2]=i,0===o&&e._state&&p(R,e)}function R(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var i,n,o=e._result,a=0;a<t.length;a+=3)i=t[a],n=t[a+r],i?N(r,i,n,o):n(o);e._subscribers.length=0}}function D(){this.error=null}var O=new D;function N(e,t,r,i){var n,a,s,l,c=o(r);if(c){if((n=function(e,t){try{return e(t)}catch(e){return O.error=e,O}}(r,i))===O?(l=!0,a=n.error,n=null):s=!0,t===n)return void L(t,new TypeError("A promises callback cannot return that same promise."))}else n=i,s=!0;t._state===w&&(c&&s?C(t,n):l?L(t,a):1===e?I(t,n):2===e&&L(t,n))}function M(e,t){var r=this;r._instanceConstructor=e,r.promise=new e(T),r._validateInput(t)?(r._input=t,r.length=t.length,r._remaining=t.length,r._init(),0!==r.length&&(r.length=r.length||0,r._enumerate(),0!==r._remaining)||I(r.promise,r._result)):L(r.promise,r._validationError())}M.prototype._validateInput=function(e){return c(e)},M.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},M.prototype._init=function(){this._result=new Array(this.length)};var H=M;M.prototype._enumerate=function(){for(var e=this.length,t=this.promise,r=this._input,i=0;t._state===w&&i<e;i++)this._eachEntry(r[i],i)},M.prototype._eachEntry=function(e,t){var r,i=this,n=i._instanceConstructor;"object"==typeof(r=e)&&null!==r?e.constructor===n&&e._state!==w?(e._onerror=null,i._settledAt(e._state,t,e._result)):i._willSettleAt(n.resolve(e),t):(i._remaining--,i._result[t]=e)},M.prototype._settledAt=function(e,t,r){var i=this,n=i.promise;n._state===w&&(i._remaining--,2===e?L(n,r):i._result[t]=r),0===i._remaining&&I(n,i._result)},M.prototype._willSettleAt=function(e,t){var r=this;A(e,void 0,(function(e){r._settledAt(1,t,e)}),(function(e){r._settledAt(2,t,e)}))};var U=0,F=B;function B(e){if(this._id=U++,this._state=void 0,this._result=void 0,this._subscribers=[],T!==e){if(!o(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof B))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this;try{e((function(e){C(t,e)}),(function(e){L(t,e)}))}catch(e){L(t,e)}}}B.all=function(e){return new H(this,e).promise},B.race=function(e){var t=new this(T);if(c(e))for(var r=e.length,i=0;t._state===w&&i<r;i++)A(this.resolve(e[i]),void 0,n,o);else L(t,new TypeError("You must pass an array to race."));return t;function n(e){C(t,e)}function o(e){L(t,e)}},B.resolve=function(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(C(t=new this(T),e),t)},B.reject=function(e){var t=new this(T);return L(t,e),t},B._setScheduler=function(e){s=e},B._setAsap=function(e){p=e},B._asap=p,B.prototype={constructor:B,then:function(e,t){var r,i,n,o=this._state;return 1===o&&!e||2===o&&!t?this:(r=new this.constructor(T),i=this._result,o?(n=arguments[o-1],p((function(){N(o,r,n,i)}))):A(this,r,e,t),r)},catch:function(e){return this.then(null,e)}},d=function(){var e;if(void 0!==i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=F)};var j={Promise:F,polyfill:d};"function"==typeof define&&define.amd?define((function(){return j})):void 0!==t&&t.exports?t.exports=j:void 0!==this&&(this.ES6Promise=j),d()}).call(this)}).call(this)}).call(this,e("_process"),void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{_process:9,timers:10}],9:[function(e,t,r){var i,n;function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}t=t.exports={};try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return(i=setTimeout)(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}var l,c=[],u=!1,p=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):p=-1,c.length)&&h()}function h(){if(!u){for(var e=s(d),t=(u=!0,c.length);t;){for(l=c,c=[];++p<t;)l&&l[p].run();p=-1,t=c.length}l=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return(n=clearTimeout)(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function y(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=y,t.addListener=y,t.once=y,t.off=y,t.removeListener=y,t.removeAllListeners=y,t.emit=y,t.prependListener=y,t.prependOnceListener=y,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],10:[function(e,t,r){(function(t,i){(function(){var n=e("process/browser.js").nextTick,o=Function.prototype.apply,a=Array.prototype.slice,s={},l=0;function c(e,t){this._id=e,this._clearFn=t}r.setTimeout=function(){return new c(o.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new c(o.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(e){e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},r.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},r._unrefActive=r.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r.setImmediate="function"==typeof t?t:function(e){var t=l++,i=!(arguments.length<2)&&a.call(arguments,1);return s[t]=!0,n((function(){s[t]&&(i?e.apply(null,i):e.call(null),r.clearImmediate(t))})),t},r.clearImmediate="function"==typeof i?i:function(e){delete s[e]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":9,timers:10}],11:[function(e,t,r){var i=e("../ui/component"),n=(e("../lib/util"),e("../lib/dom")),o=e("../lib/event"),a=(e("../lib/ua"),e("../lang/index")),s=e("../player/base/event/eventtype");e=i.extend({init:function(e,t){i.call(this,e,t),this.className=t.className||"prism-auto-stream-selector",this.addClass(this.className)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML="<div><p class='tip-text'></p></div><div class='operators'><a class='prism-button prism-button-ok' type='button'>"+a.get("OK_Text")+"</a><a class='prism-button prism-button-cancel'  target='_blank'>"+a.get("Cancel_Text")+"</a></div>",e},bindEvent:function(){var e=this,t=(e._player.on(s.Private.AutoStreamShow,(function(t){var r,i=document.querySelector("#"+e.getId()+" .tip-text");e._player._getLowerQualityLevel&&(r=e._player._getLowerQualityLevel())&&(e._switchUrl=r,i.innerText=a.get("Auto_Stream_Tip_Text").replace("$$",r.item.desc),n.css(e.el(),"display","block"))})),e._player.on(s.Private.AutoStreamHide,(function(t){document.querySelector("#"+e.getId()+" .tip-text"),n.css(e.el(),"display","none")})),document.querySelector("#"+e.getId()+" .prism-button-ok"));o.on(t,"click",(function(){e._player._changeStream&&e._switchUrl&&(e._player._changeStream(e._switchUrl.index,a.get("Quality_Change_Text")),e._player.trigger(s.Private.SettingListHide)),n.css(e.el(),"display","none")})),t=document.querySelector("#"+e.getId()+" .prism-button-cancel"),o.on(t,"click",(function(){n.css(e.el(),"display","none"),e._player.trigger(s.Private.SettingListHide)}))}}),t.exports=e},{"../lang/index":22,"../lib/dom":31,"../lib/event":32,"../lib/ua":48,"../lib/util":50,"../player/base/event/eventtype":69,"../ui/component":129}],12:[function(e,t,r){var i=e("../ui/component"),n=e("../lib/dom"),o=e("../lib/event"),a=e("../lib/ua"),s=e("../lib/function"),l=(e("../lang/index"),e("../lib/util")),c=e("../config"),u=e("../lib/playerutil"),p=e("../player/base/event/eventtype");e=i.extend({init:function(e,t){i.call(this,e,t),this.className=t.className||"prism-liveshift-progress",this.addClass(this.className),this._liveshiftService=e._liveshiftService},createEl:function(){var e=i.prototype.createEl.call(this);return e.innerHTML='<div class="prism-enable-liveshift"><div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-liveshift-seperator"></div></div><div class="prism-disable-liveshift"></div>',e},bindEvent:function(){function e(e){t._progressDown=e}var t=this,r=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this.id()+" .prism-progress-time"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),this.seperatorNode=document.querySelector("#"+this.id()+" .prism-liveshift-seperator"),this.progressNode=document.querySelector("#"+this.id()+" .prism-enable-liveshift"),document.querySelector("#"+this.id()+" .prism-progress-cursor img")),i="//"+c.domain+"/de/prismplayer/"+c.h5Version+"/skins/default/img/dragcursor.png";this._player._options.skinsDomain?i=this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":c.domain?-1<c.domain.indexOf("localhost")&&(i="//"+c.domain+"/build/skins/default/img/dragcursor.png"):i=this._player&&this._player._options&&this._player._options.sdkDomain?this._player._options.sdkDomain+"/de/prismplayer/"+c.h5Version+"/skins/default/img/dragcursor.png":"de/prismplayer/"+c.h5Version+"/skins/default/img/dragcursor.png",r.src=i,o.on(this.cursorNode,"mousedown",(function(e){t._onMouseDown(e)})),o.on(this.cursorNode,"touchstart",(function(e){t._onMouseDown(e)})),o.on(this.progressNode,"mousemove",(function(e){t._progressMove(e)})),o.on(this.progressNode,"touchmove",(function(e){t._progressMove(e)})),o.on(this.progressNode,"mousedown",(function(t){e(!0)})),o.on(this.progressNode,"touchstart",(function(t){e(!0)})),o.on(this.progressNode,"mouseup",(function(t){e(!1)})),o.on(this.progressNode,"touchend",(function(t){e(!1)})),o.on(this._el,"click",(function(e){t._onMouseClick(e)})),this._player.on(p.Private.HideProgress,(function(e){t._hideProgress(e)})),this._player.on(p.Private.CancelHideProgress,(function(e){t._cancelHideProgress(e)})),this._player.on(p.Private.ShowBar,(function(){t._updateLayout()})),o.on(this.progressNode,p.Private.MouseOver,(function(e){t._onMouseOver(e)})),o.on(this.progressNode,p.Private.MouseOut,(function(e){t._onMouseOut(e)})),this.bindTimeupdate=s.bind(this,this._onTimeupdate),this._player.on(p.Player.TimeUpdate,this.bindTimeupdate),u.isLiveShift(this._player._options)&&t._liveshiftService.start(6e4,(function(e){e={mediaId:t._player._options.vid||"",error_code:e.Code,error_msg:e.Message},t._player.logError(e),t._player.trigger(p.Player.Error,e)})),this._player.on(p.Private.LiveShiftQueryCompleted,(function(){t._updateSeperator(),t._updateLayout()})),this._player.on(p.Private.LiveShiftSwitchToLive,(function(){t._updateCursorPosition()})),this._player.on(p.Player.Pause,(function(){t._liveshiftService.stop()})),a.IS_IPAD?this.interval=setInterval((function(){t._onProgress()}),500):this._player.on(p.Video.Progress,(function(){t._onProgress()}))},_updateSeperator:function(){this._liveshiftService.currentTimeDisplay&&(this.seperatorNode.innerText=this._liveshiftService.currentTimeDisplay)},_updateLayout:function(){var e=this.seperatorNode.offsetWidth,t=this.el().offsetWidth,r=t-e;0!=e&&0!=r&&(n.css(this.progressNode,"width",100*(r-10)/t+"%"),n.css(this.seperatorNode,"right",-1*(e+10)+"px"))},_progressMove:function(e){var t=this._getSeconds(e),r=this._liveshiftService.availableLiveShiftTime,i=(this.timeNode.innerText="-"+l.formatTime(r-t),t=r?t/r:0,(r=1-this.timeNode.clientWidth/this.el().clientWidth)<t&&(t=r),this.timeNode&&(n.css(this.timeNode,"display","block"),n.css(this.timeNode,"left",100*t+"%")),this);!a.IS_PC&&i._progressDown&&(i.progressSeekTimer&&clearTimeout(i.progressSeekTimer),i.progressSeekTimer=setTimeout((function(){i._progressDown||i._onMouseClick(e)}),200))},_hideProgress:function(e){o.off(this.cursorNode,"mousedown"),o.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(e){var t=this;o.on(this.cursorNode,"mousedown",(function(e){t._onMouseDown(e)})),o.on(this.cursorNode,"touchstart",(function(e){t._onMouseDown(e)}))},_canSeekable:function(e){var t=!0;return"function"==typeof this._player.canSeekable?this._player.canSeekable(e):t},_onMouseOver:function(e){this._updateCursorPosition(this._getCurrentTime()),n.css(this.timeNode,"display","block")},_onMouseOut:function(e){n.css(this.timeNode,"display","none")},_getSeconds:function(e){for(var t=this.el().offsetLeft,r=this.el();r=r.offsetParent;){var i=n.getTranslateX(r);t+=r.offsetLeft+i}e=(e.touches&&e.touches.length?e.touches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageX;var o=this.progressNode.offsetWidth,a=this._liveshiftService.availableLiveShiftTime;return sec=(sec=(sec=a?(e-t)/o*a:0)<0?0:sec)>a?a:sec},_onMouseClick:function(e){var t=this,r=(e=this._getSeconds(e),(i=this._liveshiftService.availableLiveShiftTime)-e),i=(r<=(n=this._player._options).liveShiftMinOffset&&(e=i-(r=n.liveShiftMinOffset)),this._player.trigger(p.Private.SeekStart,{fromTime:this._getCurrentTime()}),this._liveshiftService.getSourceUrl(r)),n=u.isHls(t._player._options.source);t._player._loadByUrlInner(i,e,!0),t._player.trigger(p.Private.Play_Btn_Hide),t._liveshiftService.seekTime=e,t._player.trigger(p.Private.EndStart,{toTime:e}),t._updateProgressBar(this.playedNode,e),t._updateCursorPosition(e),setTimeout((function(){t._progressDown||t._onMouseOut()}),500),n&&setTimeout((function(){t._player.play()}))},_onMouseDown:function(e){var t=this;e.preventDefault(),this._player.trigger(p.Private.SeekStart,{fromTime:this._getCurrentTime()}),o.on(this.controlNode,"mousemove",(function(e){t._onMouseMove(e)})),o.on(this.controlNode,"touchmove",(function(e){t._onMouseMove(e)})),o.on(this.controlNode,"mouseup",(function(e){t._onMouseUp(e)})),o.on(this.controlNode,"touchend",(function(e){t._onMouseUp(e)}))},_onMouseUp:function(e){e.preventDefault(),o.off(this.controlNode,"mousemove"),o.off(this.controlNode,"touchmove"),o.off(this._player.tag,"mouseup"),o.off(this._player.tag,"touchend"),o.off(this.controlNode,"mouseup"),o.off(this.controlNode,"touchend"),this._onMouseClick(e)},_onMouseMove:function(e){e.preventDefault()},_onTimeupdate:function(e){this._player._seeking||(a.IS_ANDROID&&a.IS_UC&&(this._hasResetFlagUC&&this._player.getCurrentTime()&&(this._hasResetFlagUC=!1,this._basePtsUC=this._player.getCurrentTime()),this._player.getCurrentTime()||(this._hasResetFlagUC=!0,this._basePtsUC=0)),this._updateProgressBar(this.playedNode,this._getCurrentTime()),this._updateCursorPosition(this._getCurrentTime()),this._player.trigger(p.Private.UpdateProgressBar,{time:this._getCurrentTime()}))},_getCurrentTime:function(){var e=(-1==(e=this._liveshiftService.seekTime)&&(e=0),this._player.getCurrentTime()+e);return a.IS_ANDROID&&a.IS_UC&&(e-=this._basePtsUC||0),e},_onProgress:function(e){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(e,t){var r,i;1!=this._player._switchSourcing&&(i=0,-1==this._liveshiftService.seekTime?i=1:1<(i=(r=this._liveshiftService.availableLiveShiftTime)?t/r:0)&&(this._liveshiftService.seekTime=-(i=1)),this.liveShiftStartDisplay,e)&&n.css(e,"width",100*i+"%")},_updateCursorPosition:function(e){var t,r,i,o;this._player.el()&&1!=this._player._switchSourcing&&(i=0,o=1,t=this._player.el().clientWidth,-1==this._liveshiftService.seekTime?i=1:1<(i=(r=this._liveshiftService.availableLiveShiftTime)?e/r:0)&&(this._liveshiftService.seekTime=-1),0!=t&&(o=1-(e=10/t),i-=e),i=i<0?0:i,this.cursorNode)&&(o<i?(n.css(this.cursorNode,"right","0px"),n.css(this.cursorNode,"left","auto")):(n.css(this.cursorNode,"right","auto"),n.css(this.cursorNode,"left",100*i+"%")))}}),t.exports=e},{"../config":14,"../lang/index":22,"../lib/dom":31,"../lib/event":32,"../lib/function":34,"../lib/playerutil":45,"../lib/ua":48,"../lib/util":50,"../player/base/event/eventtype":69,"../ui/component":129}],13:[function(e,t,r){var i=e("../ui/component"),n=e("../lib/util"),o=e("../player/base/event/eventtype");e=i.extend({init:function(e,t){i.call(this,e,t),this.className=t.className||"prism-live-time-display",this.addClass(this.className),this._liveshiftService=e._liveshiftService},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="end-time">00:00</span><span class="live-text">Live: </span><span class="live-time"></span>',e},bindEvent:function(){var e=this;this._player.on(o.Video.TimeUpdate,(function(){var t,r=e._liveshiftService,i=document.querySelector("#"+e.id()+" .current-time");r.liveShiftStartDisplay&&r.availableLiveShiftTime>r.seekTime&&-1!=r.seekTime?(t=e._liveshiftService.getBaseTime(),t=n.formatTime(t+e._player.getCurrentTime()),i.innerText=t):r.currentTimeDisplay&&(i.innerText=r.currentTimeDisplay)})),this._player.on(o.Private.LiveShiftQueryCompleted,(function(){e.updateTime()}))},updateTime:function(){document.querySelector("#"+this.id()+" .end-time").innerText=this._liveshiftService.liveTimeRange.endDisplay,document.querySelector("#"+this.id()+" .live-time").innerText=this._liveshiftService.currentTimeDisplay}}),t.exports=e},{"../lib/util":50,"../player/base/event/eventtype":69,"../ui/component":129}],14:[function(e,t,r){t.exports={domain:"g.alicdn.com",flashVersion:"2.8.2",h5Version:"2.13.3",rtsVersion:"2.2.4",cityBrain:!0,logDuration:10,logCount:100,logReportTo:"https://videocloud.cn-hangzhou.log.aliyuncs.com/logstores/newplayer/track"}},{}],15:[function(e,t,r){var i,n,o,a;e("./lib/patch-ssr").isSSR||(e("./lang/index").load(),i=e("./player/adaptivePlayer"),n=e("./lib/reloadInstanceUtil"),o=e("./lib/componentutil"),a=e("./config"),(e=function(e,t){return e=i.create(e,t),n.storeUserEvents(e),e}).getVersion=function(){return a.h5Version},o.register(e),(o=window.Aliplayer=e).players={},e.reloadInstance=n.reloadInstance,"undefined"==typeof Uint8Array)||Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),t.exports=o},{"./config":14,"./lang/index":22,"./lib/componentutil":26,"./lib/patch-ssr":43,"./lib/reloadInstanceUtil":46,"./player/adaptivePlayer":65}],16:[function(e,t,r){var i=e("../player/base/event/eventtype"),n=e("../lib/constants"),o=e("../lang/index");t.exports=function(){function e(e){var t=this;void 0===e&&(e={}),this.interval=3e3,this.player=null,this.timer=null,this.playerInitDone=!1,this.player=e.player,this.player.on(i.Player.Init,(function(){t.playerInitDone=!0}))}var t=e.prototype;return t.start=function(){var e=this;this.stop(),this.player&&this.player._options&&!this.player._options.preventRecord||(this.timer=setInterval((function(){e.playerInitDone&&e.check()}),this.interval))},t.stop=function(){this.clearTimer()},t.check=function(){var e=!1,t=this.detectPrototype()||this.detectNativeFn();return(t||this.detectDeperateVideo())&&(console.log("isMediaSourceModified",t),this.clearTimer(),this.displayError(),this.setupErrorStyle(),this.destroyVideo(),localStorage.setItem("_intercept_mediastream_",""),e=!0),e},t.dispose=function(){this.stop(),this.player=null,this.playerInitDone=!1},t.clearTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},t.displayError=function(){var e=this.player,t={mediaId:e._options&&e._options.vid?e._options.vid:"",error_code:n.ErrorCode.RecordNotAllowed,error_msg:o.get("Record_Not_Allowed")};e.logError(t),e.trigger(i.Player.Error,t)},t.setupErrorStyle=function(){this.hideRetry();var e=document.querySelector(".prism-ErrorMessage");e&&(e.style.opacity="1",e.style.visibility="visible")},t.hideRetry=function(){var e=document.querySelector("#"+this.player.id()+" .prism-button-retry");e&&(e.style.display="none")},t.destroyVideo=function(){this.player._drm&&this.player.destroy();var e=this.player.tag;e&&e.parentNode&&e.parentNode.removeChild(e)},t.detectPrototype=function(){var e=window,t=e.MediaSource;return t&&e.EventTarget&&t.__proto__.__proto__===e.EventTarget},t.detectNativeFn=function(){var e=window.MediaSource;return e&&!this.isNativeFn(e.prototype.addSourceBuffer)},t.isNativeFn=function(e){var t=RegExp("^".concat(Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),"$")),r=typeof e;return null!==e&&("object"==r||"function"==r)&&t.test(e)},t.detectDeperateVideo=function(){var e=this.player.tag;if(e)return-1!==(e.getAttribute("id")||"").indexOf("360")},e}()},{"../lang/index":22,"../lib/constants":27,"../player/base/event/eventtype":69}],17:[function(e,t,r){var i=e("../lib/oo"),n=e("../lang/index"),o=((e=i.extend({init:function(e,t){this._player=e,this._options=e.options()}})).prototype.handle=function(e){var t,r;this._options.autoPlayDelay&&(t=(t=this._options.autoPlayDelayDisplayText)||n.get("AutoPlayDelayDisplayText").replace("$$",this._options.autoPlayDelay),this._player.trigger("info_show",t),this._player.trigger("h5_loading_hide"),this._player.trigger("play_btn_hide"),(r=this)._timeHandler=setTimeout((function(){r._player.trigger("info_hide"),r._options.autoPlayDelay=0,e&&e()}),1e3*this._options.autoPlayDelay),this._player.on("play",(function(){o(r)})),this._player.on("pause",(function(){o(r)})))},e.prototype.dispose=function(){o(this),this._player=null},function(e){e._timeHandler&&(clearTimeout(e._timeHandler),e._timeHandler=null)});t.exports=e},{"../lang/index":22,"../lib/oo":42}],18:[function(e,t,r){var i=e("../lib/event"),n=e("../lib/data"),o=e("../player/base/event/eventtype"),a=n.guid();function s(e){var t,r,i=this._options.keyFastForwardStep,n=this._options.isLive;switch(e&&e.keyCode){case 39:n||(e.preventDefault(),t=this.getDuration(),r=this.getCurrentTime()+i,this.seek(r=t<r?t:r),l.call(this,r),c.call(this,r));break;case 37:n||(e.preventDefault(),r=this.getCurrentTime()-i,this.seek(r=r<0?0:r),l.call(this,r),c.call(this,r));break;case 38:e.preventDefault(),this.getVolume()<1&&0<=this.getVolume()&&this.setVolume(Number((this.getVolume()+.1).toFixed(1)));break;case 40:e.preventDefault(),0<this.getVolume()&&this.getVolume()<=1&&this.setVolume(Number((this.getVolume()-.1).toFixed(1)));break;case 32:if(n)return;e.preventDefault(),this.tag.paused?this.play(!0):this.pause(!0)}}function l(e){this.trigger(o.Private.UpdateProgress,{targetTime:e})}function c(e){this.trigger(o.Private.UpdateCursorPosition,{targetTime:e})}(e={}).init=function(){var e;this._options.keyShortCuts&&((e=s.bind(this)).guid=a,i.on(window.document,"keydown",e))},e.dispose=function(){var e;this._options.keyShortCuts&&((e=s.bind(this)).guid=a,i.off(window.document,"keydown",e))},t.exports=e},{"../lib/data":29,"../lib/event":32,"../player/base/event/eventtype":69}],19:[function(e,t,r){t.exports=t.exports={OD:"OD",FD:"360p",LD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Speed:"Speed",Speed_05X_Text:"0.5X",Speed_1X_Text:"Normal",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Refresh_Text:"Refresh",Cancel:"Cancel",Mute:"Mute",Snapshot:"Snapshot",Detection_Text:"Diagnosis",Play_DateTime:"Time",Quality_Change_Fail_Switch_Text:"Cannot play, switch to ",Quality_Change_Text:"Switch to ",Quality_The_Url:"The url",AutoPlayDelayDisplayText:"Play in $$ seconds",Error_Load_Abort_Text:"Data abort erro",Error_Network_Text:"Loading failed due to network error",Error_Decode_Text:"Decode error",Error_Server_Network_NotSupport_Text:"Network error or  the format of video is unsupported",Error_Offline_Text:"The network is unreachable, please click Refresh",Error_Play_Text:"Error occured while playing",Error_Retry_Text:" Please close or refresh",Error_AuthKey_Text:"Authentication expired or the domain is not in white list",Error_H5_Not_Support_Text:"The format of video is not supported by h5 player，please use flash player",Error_Not_Support_M3U8_Text:"The format of m3u8 is not supported by this explorer",Error_Not_Support_MP4_Text:"The format of mp4 is not supported by this explorer",Error_Not_Support_encrypt_Text:"Play the encrypted video,please set encryptType to 1",Error_Vod_URL_Is_Empty_Text:"The url is empty",Error_Vod_Fetch_Urls_Text:"Error occured when fetch urls，please close or refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Error_Playauth_Decode_Text:"PlayAuth parse failed",Error_Vid_Not_Same_Text:"Cannot renew url due to vid changed",Error_Playauth_Expired_Text:"Playauth expired, please close or refresh",Error_MTS_Fetch_Urls_Text:"Error occurred while requesting mst server",Error_Load_M3U8_Failed_Text:"The m3u8 file loaded failed,please make sure domain configuration https certificate or enable cors",Error_Load_M3U8_Timeout_Text:"Timeout error occored when the m3u8 file loaded",Error_Liveshift_M3U8_Not_Found_Text:"No more liveshift video avaliable",Error_M3U8_Decode_Text:"The m3u8 file decoded failed",Error_TX_Decode_Text:"Video decoded failed",Error_Waiting_Timeout_Text:"Buffering timeout, please close or refresh",Error_Invalidate_Source:"Video shoud be mp4、mp3、m3u8、mpd or flv",Error_Empty_Source:"Video URL shouldn't be empty",Error_Vid_Empty_Source:"vid's video URL hasn't been fetched",Error_Mediaauth_Empty_Source:"mediaAuth's video URL hasn't been fetched",Error_Fetch_NotStream:"The vid has no stream to play",Error_Fetch_Media_Not_Found:"Data is not found",Error_Not_Found:"Url is not found",Error_Drm_License_Request_Failed:"DRM license request failed",Error_Drm_Not_Supported:"DRM in not supported",Error_Drm_Load:"DRM load error",Live_End:"Live has finished",Play_Before_Fullscreen:"Please play before fullscreen",Can_Not_Seekable:"Can not seek to this position",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Request_Block_Text:"This request is blocked, the video Url should be over https",Open_Html_By_File:"Html page should be on the server",Maybe_Cors_Error:"please make sure domain configuration https certificate or enable cors",Speed_Switch_To:"Speed switch to ",Curent_Volume:"Current volume:",Volume_Mute:"set to mute",Volume_UnMute:"set to unmute",ShiftLiveTime_Error:"Live start time should not be greater than over time",Error_Not_Support_Format_On_Mobile:"flv、rmtp can't be supported on mobile，please use m3u8",SessionId_Ticket_Invalid:"please assign value for sessionId and ticket properties",Http_Error:" An HTTP network request failed with an error, but not from the server.",Http_Timeout:"A network request timed out",DRM_License_Expired:"DRM license is expired, please refresh",Not_Support_DRM:"Browser doesn't support DRM",CC_Switch_To:"Subtitle switch to ",AudioTrack_Switch_To:"Audio tracks switch to ",Subtitle:"Subtitle/CC",AudioTrack:"Audio Track",Quality:"Quality",Auto:"Auto",Quality_Switch_To:"Quality switch to ",Fullscreen:"Full Screen",Setting:"Settings",Volume:"Volume",Play:"Play",Pause:"Pause",CloseSubtitle:"Close CC",OpenSubtitle:"Open CC",ExistFullScreen:"Exit Full Screen",Muted:"Muted",Retry:"Retry",SwitchToLive:"Return to live",iOSNotSupportVodEncription:"iOS desn't support Vod's private encription video, please use HLS standard encription or DRM",UseChromeForVodEncription:"This browser desn't suport Vod's encription video, please use latest Chrome",Record_Not_Allowed:"Recording or playing in seperated window is not allowed, please disable related plugins or switch browser.",Rts_Err_Http_Signal_Error:"(RTS)http signal error",Rts_Err_Play_Failed:"(RTS)play faild error",Rts_Err_No_Data_For:"ms received no data",Rts_Err_Browser_Not_Support:"(RTS)browser not support",Rts_Err_Not_Support_Webrtc:"(RTS)not support webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)browser version too low",Rts_Err_Not_Support_H264:"(RTS)not support h264",Rts_Err_Create_Offer_Error:"(RTS)create offer error",Rts_Err_Play_Url_Error:"(RTS)play url error",Rts_Err_Subscribe_Nonthing:"(RTS)subscribe nonthing",Rts_Err_Http_Request_Failed:"(RTS)HTTP request failed",Rts_Err_Http_Answer_Failed:"(RTS)answer failed",Rts_Err_PeerConnection_Unknown:"(RTS)Unknown PeerConnection",Splayer_Err_Env_Check:"(SP)This browser can't play this media",Splayer_Err_Coroutine:"(SP)Coroutine error",Splayer_Err_Decoder:"(SP)Decode error",Splayer_Err_Buffering:"(SP)Buffering error",Splayer_Err_Parser_Not_Found:"(SP)Media container is not supported"}},{}],20:[function(e,t,r){t.exports=t.exports={OD:"OD",LD:"360p",FD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Forbidden_Text:"Internal information is strictly forbidden to outsider",Refresh:"Refresh",Diagnosis:"Diagnosis",Live_Finished:"Live has finished, thanks for watching",Play:"Play",Pause:"Pause",Snapshot:"Snapshot",Replay:"Replay",Live:"Live",Encrypt:"Encrypt",Sound:"Sound",Fullscreen:"Full Screen",Exist_Fullscreen:"Exit Full-screen",Resolution:"Resolution",Next:"Next Video",Brightness:"Brightness",Default:"Default",Contrast:"Contrast",Titles_Credits:"Titles and Credits",Skip_Titles:"Skip Titles",Skip_Credits:"Skip Credits",Not_Support_Out_Site:"The video is not supported for outside website, please watch it by TaoTV",Watch_Now:"Watch now",Network_Error:"Network is unreachable, please try to refresh",Video_Error:"Playing a video error, please try to refresh",Decode_Error:"Data decoding error",Live_Not_Start:"Live has not started, to be expected",Live_Loading:"Live information is loading, please try to refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Live_End:"Live has finished",Live_Abrot:"Signal aborted, please try to refresh",Corss_Domain_Error:"Please ensure your domain has obtained IPC license and combined CNAME, \r\n or to set  cross-domain accessing available",Url_Timeout_Error:"The video url is timeout, please try to refresh",Connetction_Error:"Sorry，the video cannot play because of connection error, please try to watch other videos",Fetch_MTS_Error:"Fetching video list failed, please ensure",Token_Expired_Error:"Requesting open api failed, please ensure token expired or not",Video_Lists_Empty_Error:"The video list is empty, please check the format of video",Encrypted_Failed_Error:"Fetching encrypted file failed, please check the permission of player",Fetch_Failed_Permission_Error:"Fetching video list failed, please check the permission of player",Invalidate_Param_Error:"No video url, please check the parameters",AutoPlayDelayDisplayText:"Play in $$ seconds",Fetch_MTS_NOT_NotStream_Error:"The vid has no stream to play",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Open_Html_By_File:"Html page should be on the server",Cant_Use_Flash_On_Mobile:"Mobile doesn't support flash player，please use h5 player",Flash_Not_Ready:"Flash Player plugin hasn't been installed <a href='https://www.flash.cn/' target='_blank'>install plugin</a>, or check if disable Flash plugin"}},{}],21:[function(e,t,r){t.exports=t.exports={OD:"原画",FD:"流畅",LD:"标清",SD:"高清",HD:"超清","2K":"2K","4K":"4K",FHD:"全高清",XLD:"极速",SQ:"普通音质",HQ:"高音质",Forbidden_Text:"内部信息，严禁外传",Refresh:"刷新",Diagnosis:"诊断",Live_Finished:"直播已结束,谢谢观看",Play:"播放",Pause:"暂停",Snapshot:"截图",Replay:"重播",Live:"直播",Encrypt:"加密",Sound:"声音",Fullscreen:"全屏",Exist_Fullscreen:"退出全屏",Resolution:"清晰度",Next:"下一集",Brightness:"亮度",Default:"默认",Contrast:"对比度",Titles_Credits:"片头片尾",Skip_Titles:"跳过片头",Skip_Credits:"跳过片尾",Not_Support_Out_Site:"该视频暂不支持站外播放，请到淘TV观看",Watch_Now:"立即观看",Network_Error:"网络无法连接，请尝试检查网络后刷新试试",Video_Error:"视频播放异常，请刷新试试",Decode_Error:"播放数据解码错误",Live_Not_Start:"亲，直播还未开始哦，敬请期待",Live_Loading:"直播信息加载中，请刷新试试",Live_End:"亲，直播已结束",Live_Abrot:"当前直播信号中断，请刷新后重试",Corss_Domain_Error:"请确认您的域名已完成备案和CNAME绑定，\r\n并处于启用状态，或资源允许跨越访问",Url_Timeout_Error:"您所观看的视频地址连接超时，请刷新后重试",Connetction_Error:"抱歉,该视频由于连接错误暂时不能播放,请观看其它视频",Fetch_MTS_Error:"获取视频列表失败，请确认",Token_Expired_Error:"请求接口失败，请确认Token是否过期",Video_Lists_Empty_Error:"获取视频列表为空，请确认播放数据与格式",Encrypted_Failed_Error:"获取视频加密秘钥错误，请确认播放权限",Fetch_Failed_Permission_Error:"获取视频列表失败，请确认播放权限",Invalidate_Param_Error:"无输入视频，请确认输入参数",AutoPlayDelayDisplayText:"$$秒以后开始播放",Fetch_MTS_NOT_NotStream_Error:"此vid没有可播放视频",Cancel_Text:"取消",OK_Text:"确认",Auto_Stream_Tip_Text:"网络不给力，是否切换到$$",Fetch_Playauth_Error:"获取播放凭证出错啦，请尝试退出重试或刷新",Open_Html_By_File:"不能直接在浏览器打开html文件，请部署到服务端",Cant_Use_Flash_On_Mobile:"移动端不支持Flash播放器，请使用h5播放器",Flash_Not_Ready:"Flash Player插件未安装<a href='https://www.flash.cn/' target='_blank'>安装插件</a>，如果已经安装请检查是否被禁用"}},{}],22:[function(e,t,r){function i(){var e;return void 0!==window[l]&&window[l]||(e=(e=(navigator.language||navigator.browserLanguage).toLowerCase())&&-1<e.indexOf("zh")?"zh-cn":"en-us",window[l]=e),window[l]}function n(t,r){var i=p(t),n=u(),o="flash"==t?"en-us"==n?e("./flash/en-us"):"zh-cn"==n?e("./flash/zh-cn"):r[n]:"en-us"==n?e("./en-us"):"zh-cn"==n?e("./zh-cn"):r[n];a.set(i,JSON.stringify(o)),c(t,o)}var o=e("../config"),a=e("../lib/storage"),s=(e("../lib/io"),"aliplayer_lang_data"),l="aliplayer_lang",c=function(e,t){e=p(e),window[e]=t},u=function(){return i()},p=function(e){var t=u();return s+"_"+(e=e||"h5")+"_"+o.h5Version.replace(/\./g,"_")+"_"+t};t.exports.setCurrentLanguage=function(t,r,o){var a=window[l];if(!("en-us"==(t=void 0!==t&&t?t:i())||"zh-cn"==t||o&&o[t]))throw new Error("There is not language resource for "+t+", please specify the language resource by languageTexts property");window[l]=t,n(r,o),t!=a&&e("../lib/constants").updateByLanguage()},t.exports.getCurrentLanguage=i,t.exports.getLanguageData=function(e,t){return e=p(e),window[e]},t.exports.load=n,t.exports.get=function(e,t){if(t=p(t=t||"h5"),t=window[t])return t[e]}},{"../config":14,"../lib/constants":27,"../lib/io":39,"../lib/storage":47,"./en-us":19,"./flash/en-us":20,"./flash/zh-cn":21,"./zh-cn":23}],23:[function(e,t,r){t.exports=t.exports={OD:"原画",FD:"流畅",LD:"标清",SD:"高清",HD:"超清","2K":"2K","4K":"4K",FHD:"全高清",XLD:"极速",SQ:"普通音质",HQ:"高音质",Speed:"倍速",Speed_05X_Text:"0.5X",Speed_1X_Text:"正常",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Quality_Change_Fail_Switch_Text:"不能播放，切换为",Quality_Change_Text:"正在为您切换到 ",Quality_The_Url:"此地址",Refresh_Text:"刷新",Detection_Text:"诊断",Cancel:"取消",Mute:"静音",Snapshot:"截图",Play_DateTime:"播放时间",AutoPlayDelayDisplayText:"$$秒以后开始播放",Error_Load_Abort_Text:"获取数据过程被中止",Error_Network_Text:"网络错误加载数据失败",Error_Decode_Text:"解码错误",Error_Server_Network_NotSupport_Text:"服务器、网络错误或格式不支持",Error_Offline_Text:"网络不可用，请确定",Error_Play_Text:"播放出错啦",Error_Retry_Text:"请尝试退出重试或刷新",Error_AuthKey_Text:"可能鉴权过期、域名不在白名单或请求被拦截",Error_H5_Not_Support_Text:"h5不支持此格式，请使用flash播放器",Error_Not_Support_M3U8_Text:"浏览器不支持m3u8视频播放",Error_Not_Support_MP4_Text:"浏览器不支持mp4视频播放",Error_Not_Support_encrypt_Text:"播放加密视频，请设置属性encryptType to 1",Error_Vod_URL_Is_Empty_Text:"获取播放地址为空",Error_Vod_Fetch_Urls_Text:"获取地址出错啦，请尝试退出重试或刷新",Fetch_Playauth_Error:"获取播放凭证出错啦，请尝试退出重试或刷新",Error_Playauth_Decode_Text:"playauth解析错误",Error_Vid_Not_Same_Text:"不能更新地址，vid和播放中的不一致",Error_Playauth_Expired_Text:"凭证已过期，请尝试退出重试或刷新",Error_MTS_Fetch_Urls_Text:"MTS获取取数失败",Error_Load_M3U8_Failed_Text:"获取m3u8文件失败,请确认域名是否配置了https证书或者是否开启了允许跨域访问",Error_Load_M3U8_Timeout_Text:"获取m3u8文件超时",Error_Liveshift_M3U8_Not_Found_Text:"没有更多时移视频了",Error_M3U8_Decode_Text:"获取m3u8文件解析失败",Error_TX_Decode_Text:"解析数据出错",Error_Waiting_Timeout_Text:"缓冲数据超时，请尝试退出重试或刷新",Error_Invalidate_Source:"播放地址格式需要为mp4、mp3、m3u8、mpd或flv",Error_Empty_Source:"播放地址不能为空",Error_Vid_Empty_Source:"vid对应的视频地址还未获取到",Error_Mediaauth_Empty_Source:"mediaAuth对应的视频地址还未获取到",Error_Fetch_NotStream:"此vid没有可播放视频",Error_Fetch_Media_Not_Found:"数据不存在或已被删除",Error_Not_Found:"播放地址不存在",Error_Drm_License_Request_Failed:"DRM License 请求失败",Error_Drm_Not_Supported:"当前浏览器不支持 DRM 播放",Error_Drm_Load:"DRM 播放错误",Live_End:"亲，直播已结束",Play_Before_Fullscreen:"播放后再全屏",Can_Not_Seekable:"不能seek到这里",Cancel_Text:"取消",OK_Text:"确认",Auto_Stream_Tip_Text:"网络不给力，是否切换到$$",Request_Block_Text:"浏览器安全策略视频地址不能为http协议，与网站https协议不一致",Open_Html_By_File:"不能直接在浏览器打开html文件，请部署到服务端",Maybe_Cors_Error:"请确认域名是否配置了https证书或者是否开启了允许跨域访问",Speed_Switch_To:"倍速切换到 ",Curent_Volume:"当前音量：",Volume_Mute:"设置为静音",Volume_UnMute:"设置为非静音",ShiftLiveTime_Error:"直播开始时间不能大于直播结束时间",Error_Not_Support_Format_On_Mobile:"移动端不支持flv、rmtp视频，请使用m3u8",SessionId_Ticket_Invalid:"DRM视频播放，sessionId和ticket属性不能为空",Http_Error:"Http网络请求失败",Http_Timeout:"http请求超时",DRM_License_Expired:"DRM license超时，请刷新",Not_Support_DRM:"浏览器不支持DRM视频的播放或未受到用户许可",CC_Switch_To:"字幕切换到 ",AudioTrack_Switch_To:"音轨切换到 ",Subtitle:"字幕",AudioTrack:"音轨",Quality:"清晰度",Auto:"自动",Quality_Switch_To:"清晰度切换到 ",Fullscreen:"全屏",Setting:"设置",Volume:"音量",Play:"播放",Pause:"暂停",CloseSubtitle:"关闭字幕",OpenSubtitle:"打开字幕",ExistFullScreen:"退出全屏",Muted:"静音",Retry:"重试",SwitchToLive:"返回直播",iOSNotSupportVodEncription:"iOS不支持阿里云视频加密（加密）播放，请使用标准加密或DRM",UseChromeForVodEncription:"浏览器不支持点播加密播放，请使用最新Chrome浏览器",Record_Not_Allowed:"禁止录屏或小窗口播放，请关闭插件或更换浏览器",Rts_Err_Http_Signal_Error:"(RTS)信令请求失败",Rts_Err_Play_Failed:"(RTS)播放失败",Rts_Err_No_Data_For:"毫秒没有数据",Rts_Err_Browser_Not_Support:"(RTS)不支持此浏览器",Rts_Err_Not_Support_Webrtc:"(RTS)不支持webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)浏览器版本过低",Rts_Err_Not_Support_H264:"(RTS)不支持H264",Rts_Err_Create_Offer_Error:"(RTS)create offer失败",Rts_Err_Play_Url_Error:"(RTS)播放url协议错误",Rts_Err_Subscribe_Nonthing:"(RTS)参数设置错误",Rts_Err_Http_Request_Failed:"(RTS)HTTP请求失败",Rts_Err_Http_Answer_Failed:"(RTS)answer失败",Rts_Err_PeerConnection_Unknown:"(RTS)PeerConnection异常",Splayer_Err_Env_Check:"(SP)当前环境不支持播放该视频",Splayer_Err_Coroutine:"(SP)Coroutine 错误",Splayer_Err_Decode:"(SP)解码错误",Splayer_Err_Buffering:"(SP)缓冲区错误",Splayer_Err_Parser_Not_Found:"(SP)不支持的媒体容器"}},{}],24:[function(e,t,r){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";if(window.Uint8Array)for(var n=new Uint8Array(256),o=0;o<i.length;o++)n[i.charCodeAt(o)]=o;t.exports={decode:function(e){for(var t,r,i,o,a=.75*e.length,s=e.length,l=0,c=("="===e[e.length-1]&&(a--,"="===e[e.length-2])&&a--,a=new ArrayBuffer(a),new Uint8Array(a)),u=0;u<s;u+=4)t=n[e.charCodeAt(u)],r=n[e.charCodeAt(u+1)],i=n[e.charCodeAt(u+2)],o=n[e.charCodeAt(u+3)],c[l++]=t<<2|r>>4,c[l++]=(15&r)<<4|i>>2,c[l++]=(3&i)<<6|63&o;return a},encode:function(e){for(var t=new Uint8Array(e),r=t.length,n="",o=0;o<r;o+=3)n=(n=(n=(n+=i[t[o]>>2])+i[(3&t[o])<<4|t[o+1]>>4])+i[(15&t[o+1])<<2|t[o+2]>>6])+i[63&t[o+2]];return r%3==2?n=n.substring(0,n.length-1)+"=":r%3==1&&(n=n.substring(0,n.length-2)+"=="),n},unpackPlayReady:function(e){if(e=function(e,t,r){if(!e)return"";r||e.byteLength%2==0||console.log("Data has an incorrect length, must be even."),r=e instanceof ArrayBuffer?e:((r=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),r.buffer);for(var i=Math.floor(e.byteLength/2),n=new Uint16Array(i),o=new DataView(r),a=0;a<i;a++)n[a]=o.getUint16(2*a,!0);return function(e){for(var t="",r=0;r<e.length;r+=16e3){var i=e.subarray(r,r+16e3);t+=String.fromCharCode.apply(null,i)}return t}(n)}(e,0,!0),-1!=e.indexOf("PlayReadyKeyMessage")){for(var t=(e=(new DOMParser).parseFromString(e,"application/xml")).getElementsByTagName("HttpHeader"),r={},i=0;i<t.length;++i){var n=t[i].querySelector("name"),o=t[i].querySelector("value");r[n.textContent]=o.textContent}return{header:r,changange:e.querySelector("Challenge").textContent}}console.log("PlayReady request is already unwrapped.")}}},{}],25:[function(e,t,r){var i=e("./videox-demux.min");function n(){}t.exports=function(e,t,r){void 0===t&&(t=n),void 0===r&&(r=n);var o=new i.Demuxer({progressive:!0});o.on("loadedmetadata",(function(e){void 0===e&&(e={}),o.suspend(),o.destroy(),o=null,t(e)})),o.on("error",(function(e){r(e)})),o.load(e)}},{"./videox-demux.min":51}],26:[function(e,t,r){var i=e("./oo"),n=e("../player/base/event/eventtype");t.exports.stopPropagation=function(e){window.event?window.event.cancelBubble=!0:e.stopPropagation()},t.exports.register=function(e){e.util={stopPropagation:t.exports.stopPropagation},e.Component=i.extend,e.EventType=n.Player}},{"../player/base/event/eventtype":69,"./oo":42}],27:[function(e,t,r){function i(){t.exports.VideoErrorCodeText={1:n.get("Error_Load_Abort_Text"),2:n.get("Error_Network_Text"),3:n.get("Error_Decode_Text"),4:n.get("Error_Server_Network_NotSupport_Text")},t.exports.VideoLevels={0:n.get("OD"),640:n.get("FD"),960:n.get("LD"),1280:n.get("SD"),1920:n.get("HD"),2580:n.get("2K"),3840:n.get("4K")},t.exports.QualityLevels={OD:n.get("OD"),LD:n.get("LD"),FD:n.get("FD"),SD:n.get("SD"),HD:n.get("HD"),"2K":n.get("2K"),"4K":n.get("4K"),XLD:n.get("XLD"),FHD:n.get("FHD"),SQ:n.get("SQ"),HQ:n.get("HQ")},t.exports.SpeedLevels=[{key:.5,text:n.get("Speed_05X_Text")},{key:1,text:n.get("Speed_1X_Text")},{key:1.25,text:n.get("Speed_125X_Text")},{key:1.5,text:n.get("Speed_15X_Text")},{key:2,text:n.get("Speed_2X_Text")}]}var n=e("../lang/index");t.exports.LOAD_START="loadstart",t.exports.LOADED_METADATA="loadedmetadata",t.exports.LOADED_DATA="loadeddata",t.exports.PROGRESS="progress",t.exports.CAN_PLAY="canplay",t.exports.CAN_PLYA_THROUGH="canplaythrough",t.exports.PLAY="play",t.exports.PAUSE="pause",t.exports.ENDED="ended",t.exports.PLAYING="playing",t.exports.WAITING="waiting",t.exports.ERROR="error",t.exports.SUSPEND="suspend",t.exports.STALLED="stalled",t.exports.AuthKeyExpiredEvent="authkeyexpired",t.exports.USER_EVENT_NAME="__user_events__",t.exports.DRMKeySystem={4:"com.microsoft.playready",5:"com.widevine.alpha"},t.exports.EncryptionType={Private:1,Standard:2,ChinaDRM:3,PlayReady:4,Widevine:5},t.exports.VodEncryptionType={AliyunVoDEncryption:1,HLSEncryption:2,Widevine:5,"Widevine-FairPlay":5},t.exports.DRMType={Widevine:"Widevine",PlayReady:"PlayReady"},t.exports.ErrorCode={InvalidParameter:4001,AuthKeyExpired:4002,InvalidSourceURL:4003,NotFoundSourceURL:4004,StartLoadData:4005,LoadedMetadata:4006,PlayingError:4007,LoadingTimeout:4008,RequestDataError:4009,EncrptyVideoNotSupport:4010,FormatNotSupport:4011,PlayauthDecode:4012,PlayDataDecode:4013,NetworkUnavaiable:4014,UserAbort:4015,NetworkError:4016,URLsIsEmpty:4017,DrmLicenseRequestFailed:4018,RecordNotAllowed:4019,MediaNotFound:4020,DrmNotSupported:4021,DrmLoadError:4022,CrossDomain:4027,OtherError:4400,ServerAPIError:4500,FlashNotInstalled:4600,RtsSignalError:4100,RtsPlayFailedError:4200,RtsNotSupportWebRtc:4110,RtsBrowserNotSupport:4111,RtsBrowserVersionTooLow:4112,RtsNotSupportH264:4113,RtsCreateOfferError:4114,RtsAutoPLayFaild:4115,RtsPlayUrlError:4116,RtsSubscribeNonthing:4117,RtsHtmlElementError:4118,RtsHtmlElementNotMatch:4119,RtsBrowserNotSupportRtc:4120,RtsHttpRequestFaild:4121,RtsHttpAnswerFaild:4122,RtsPeerConnectionUnknown:4123,SplayerEnvCheckError:4300,SplayerCoroutineError:4301,SplayerDecodeError:4302,SplayerBufferingError:4303,SplayerParserNotFound:4304},t.exports.AuthKeyExpired=7200,t.exports.AuthKeyRefreshExpired=7e3,t.exports.AuthInfoExpired=100,t.exports.VideoErrorCode={1:4015,2:4016,3:4013,4:4400},t.exports.IconType={FontClass:"fontclass",Symbol:"symbol",Sprite:"Sprite"},t.exports.SelectedStreamLevel="selectedStreamLevel",t.exports.SelectedCC="selectedCC",t.exports.HWDetectHvc1="HWDetectHvc1",t.exports.HWDetectHev1="HWDetectHev1",t.exports.WidthMapToLevel={0:"OD",640:"FD",960:"LD",1280:"SD",1920:"HD",2580:"2K",3840:"4K"},i(),t.exports.updateByLanguage=i},{"../lang/index":22}],28:[function(e,t,r){t.exports.get=function(e){for(var t=e+"",r=document.cookie.split(";"),i=0;i<r.length;i++){var n=r[i].trim();if(0==n.indexOf(t))return unescape(n.substring(t.length+1,n.length))}return""},t.exports.set=function(e,t,r){var i=new Date;i.setTime(i.getTime()+24*r*60*60*1e3),r="expires="+i.toGMTString(),document.cookie=e+"="+escape(t)+"; "+r}},{}],29:[function(e,t,r){var i=e("./object");t.exports.cache={},t.exports.guid=function(e,t){var r,i,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||n.length,e)for(r=0;r<e;r++)o[r]=n[0|Math.random()*t];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",r=0;r<36;r++)o[r]||(i=0|16*Math.random(),o[r]=n[19==r?3&i|8:i]);return o.join("")},t.exports.expando="vdata"+(new Date).getTime(),t.exports.getData=function(e){var r=e[t.exports.expando];return r||(r=e[t.exports.expando]=t.exports.guid(),t.exports.cache[r]={}),t.exports.cache[r]},t.exports.hasData=function(e){var r="";return!(!(r=e?e[t.exports.expando]:r)||i.isEmpty(t.exports.cache[r]))},t.exports.removeData=function(e){var r="";if(r=e?e[t.exports.expando]:r){delete t.exports.cache[r];try{delete e[t.exports.expando]}catch(r){e.removeAttribute?e.removeAttribute(t.exports.expando):e[t.exports.expando]=null}}}},{"./object":41}],30:[function(e,t,r){var i,n="undefined"==typeof Promise?e("es6-promise").Promise:Promise;e="undefined"!=typeof self?self:this,i=function(){return t=[function(e,t,r){"use strict";(function(e){t.b=function(e){for(var t=(e=void 0===e?{}:e).includes,r=(e=void 0===(e=e.excludes)?[]:e,!1),i=!1,n=0,o=void 0===t?[]:t;n<o.length;n++)if(!0===o[n]){r=!0;break}for(var a=0,s=e;a<s.length;a++)if(!0===s[a]){i=!0;break}return r&&!i},t.c=function(e,t,r){return void 0!==(e=n.a[e])&&Object(i.compare)(e,t,r)},t.a=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:this};var i=r(11),n=(r.n(i),r(4))}).call(t,r(10))},function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"f",(function(){return s})),r.d(t,"a",(function(){return l})),r.d(t,"e",(function(){return c})),t=r(3),r=r(0);var i,n="InstallTrigger"in((null==(r=Object(r.a)())?void 0:r.window)||{})||/firefox/i.test(t.b),o=/trident/i.test(t.b)||/msie/i.test(t.b),a=/edge/i.test(t.b),s=/webkit/i.test(t.b)&&!a,l=void 0!==(null==(i=null==r?void 0:r.window)?void 0:i.chrome)||/chrome/i.test(t.b),c="[object SafariRemoteNotification]"===((null==(r=null==(i=null==r?void 0:r.window)?void 0:i.safari)?void 0:r.pushNotification)||!1).toString()||/safari/i.test(t.b)&&!l},function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return s}));var i=r(1);function n(e){if(console){if(!i.d&&!i.b)return console[e];if("log"===e||"clear"===e)return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];console[e].apply(console,t)}}return function(){for(var e=0;e<arguments.length;e++);}}var o=n("log"),a=n("table"),s=n("clear")},function(e,t,r){"use strict";t.a=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return null!=i&&i.document?(e=i.document).createElement.apply(e,t):{}},r.d(t,"b",(function(){return n})),t=r(0);var i=Object(t.a)(),n=(null==(r=null==i?void 0:i.navigator)?void 0:r.userAgent)||"xxxxx"},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));for(var i={},n=0,o=(r(3).b||"").match(/\w+\/(\d|\.)+(\s|$)/gi)||[];n<o.length;n++){var a=(s=o[n].split("/"))[0],s=s[1];i[a]=s}},function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"d",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return a})),r.d(t,"e",(function(){return s})),t=r(3);var i=/ipad/i.test(t.b),n=/macintosh/i.test(t.b),o=/iphone/i.test(t.b),a=/android/i.test(t.b),s=/windows/i.test(t.b)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addListener=function(e){p.addListener(e)},t.removeListener=function(e){p.removeListener(e)},t.isLaunch=function(){return p.isLaunch()},t.launch=function(){p.launch()},t.stop=function(){p.stop()},t.setDetectDelay=function(e){p.setDetectDelay(e)};var i=r(7),n=r(8),o=(r.d(t,"DevtoolsDetector",(function(){return i.a})),r.d(t,"checkers",(function(){return n})),r(0)),a=(r.d(t,"match",(function(){return o.b})),r.d(t,"specificVersionMatch",(function(){return o.c})),r(1)),s=(r.d(t,"isFirefox",(function(){return a.c})),r.d(t,"isIE",(function(){return a.d})),r.d(t,"isEdge",(function(){return a.b})),r.d(t,"isWebkit",(function(){return a.f})),r.d(t,"isChrome",(function(){return a.a})),r.d(t,"isSafari",(function(){return a.e})),r(2)),l=(r.d(t,"log",(function(){return s.b})),r.d(t,"table",(function(){return s.c})),r.d(t,"clear",(function(){return s.a})),r(17)),c=(r.d(t,"isMobile",(function(){return l.a})),r(4)),u=(r.d(t,"versionMap",(function(){return c.a})),r(5)),p=(r.d(t,"isIpad",(function(){return u.b})),r.d(t,"isMac",(function(){return u.d})),r.d(t,"isIphone",(function(){return u.c})),r.d(t,"isAndroid",(function(){return u.a})),r.d(t,"isWindows",(function(){return u.e})),new i.a({checkers:[n.elementIdChecker,n.regToStringChecker,n.functionToStringChecker,n.depRegToStringChecker,n.dateToStringChecker,n.debuggerChecker]}));t.default=p},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=this&&this.__awaiter||function(e,t,r,i){return new(r=r||n)((function(n,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,i,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var l=[a,s];if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&l[0]?i.return:l[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,l[1])).done)return n;switch(i=0,(l=n?[2&l[0],n.value]:l)[0]){case 0:case 1:n=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,i=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(n=0<(n=o.trys).length&&n[n.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3]))o.label=l[1];else if(6===l[0]&&o.label<n[1])o.label=n[1],n=l;else{if(!(n&&o.label<n[2])){n[2]&&o.ops.pop(),o.trys.pop();continue}o.label=n[2],o.ops.push(l)}}l=t.call(e,o)}catch(s){l=[6,s],i=0}finally{r=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},a=(s.prototype.launch=function(){this._detectLoopDelay<=0&&this.setDetectDelay(500),this._detectLoopStopped&&(this._detectLoopStopped=!1,this._detectLoop())},s.prototype.stop=function(){this._detectLoopStopped||(this._detectLoopStopped=!0,clearTimeout(this._timer))},s.prototype.isLaunch=function(){return!this._detectLoopStopped},s.prototype.setDetectDelay=function(e){this._detectLoopDelay=e},s.prototype.addListener=function(e){this._listeners.push(e)},s.prototype.removeListener=function(e){this._listeners=this._listeners.filter((function(t){return t!==e}))},s.prototype._broadcast=function(e){for(var t=0,r=this._listeners;t<r.length;t++){var i=r[t];try{i(e.isOpen,e)}catch(e){}}},s.prototype._detectLoop=function(){return i(this,void 0,void 0,(function(){var e,t,r,i,n,a=this;return o(this,(function(o){switch(o.label){case 0:e=!1,t="",r=0,i=this._checkers,o.label=1;case 1:return r<i.length?[4,(n=i[r]).isEnable()]:[3,6];case 2:return o.sent()?(t=n.name,[4,n.isOpen()]):[3,4];case 3:e=o.sent(),o.label=4;case 4:if(e)return[3,6];o.label=5;case 5:return r++,[3,1];case 6:return e!=this._isOpen&&(this._isOpen=e,this._broadcast({isOpen:e,checkerName:t})),0<this._detectLoopDelay?this._timer=setTimeout((function(){return a._detectLoop()}),this._detectLoopDelay):this.stop(),[2]}}))}))},s);function s(e){e=e.checkers,this._listeners=[],this._isOpen=!1,this._detectLoopStopped=!0,this._detectLoopDelay=500,this._checkers=e.slice()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(9),n=(r.d(t,"depRegToStringChecker",(function(){return i.a})),r(12)),o=(r.d(t,"elementIdChecker",(function(){return n.a})),r(13)),a=(r.d(t,"functionToStringChecker",(function(){return o.a})),r(14)),s=(r.d(t,"regToStringChecker",(function(){return a.a})),r(15)),l=(r.d(t,"debuggerChecker",(function(){return s.a})),r(16));r.d(t,"dateToStringChecker",(function(){return l.a}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(1),o=r(2),a=r(0),s=this&&this.__awaiter||function(e,t,r,i){return new(r=r||n)((function(n,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var r,i,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var l=[a,s];if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&l[0]?i.return:l[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,l[1])).done)return n;switch(i=0,(l=n?[2&l[0],n.value]:l)[0]){case 0:case 1:n=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,i=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(n=0<(n=o.trys).length&&n[n.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3]))o.label=l[1];else if(6===l[0]&&o.label<n[1])o.label=n[1],n=l;else{if(!(n&&o.label<n[2])){n[2]&&o.ops.pop(),o.trys.pop();continue}o.label=n[2],o.ops.push(l)}}l=t.call(e,o)}catch(s){l=[6,s],i=0}finally{r=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},c=/ /,u=!1,p=(c.toString=function(){return u=!0,p.name},{name:"dep-reg-to-string",isOpen:function(){return s(this,void 0,void 0,(function(){return l(this,(function(e){return u=!1,Object(o.c)({dep:c}),Object(o.a)(),[2,u]}))}))},isEnable:function(){return s(this,void 0,void 0,(function(){return l(this,(function(e){return[2,Object(a.b)({includes:[!0],excludes:[i.c,i.d]})]}))}))}})},function(e,t){var r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var i;void 0!==(t="function"==typeof(i=function(){var e=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function t(e){var t=e.replace(/^v/,"").replace(/\+.*$/,""),r=function(e,t){return-1===e.indexOf("-")?e.length:e.indexOf("-")}(t),i=t.substring(0,r).split(".");return i.push(t.substring(r+1)),i}function r(e){return isNaN(Number(e))?e:Number(e)}function i(t){if("string"!=typeof t)throw new TypeError("Invalid argument expected string");if(!e.test(t))throw new Error("Invalid argument not valid semver ('"+t+"' received)")}function n(e,n){[e,n].forEach(i);for(var o=t(e),a=t(n),s=0;s<Math.max(o.length-1,a.length-1);s++){var l=parseInt(o[s]||0,10),c=parseInt(a[s]||0,10);if(l>c)return 1;if(c>l)return-1}var u=o[o.length-1],p=a[a.length-1];if(u&&p){var d=u.split(".").map(r),h=p.split(".").map(r);for(s=0;s<Math.max(d.length,h.length);s++){if(void 0===d[s]||"string"==typeof h[s]&&"number"==typeof d[s])return-1;if(void 0===h[s]||"string"==typeof d[s]&&"number"==typeof h[s])return 1;if(d[s]>h[s])return 1;if(h[s]>d[s])return-1}}else if(u||p)return u?-1:1;return 0}var o=[">",">=","=","<","<="],a={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return n.validate=function(t){return"string"==typeof t&&e.test(t)},n.compare=function(e,t,r){!function(e){if("string"!=typeof e)throw new TypeError("Invalid operator type, expected string but got "+typeof e);if(-1===o.indexOf(e))throw new TypeError("Invalid operator, expected one of "+o.join("|"))}(r);var i=n(e,t);return a[r].indexOf(i)>-1},n})?i.apply(t,[]):i)&&(e.exports=t)},function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(1),o=r(2),a=r(0),s=(t=r(3),this&&this.__awaiter||function(e,t,r,i){return new(r=r||n)((function(n,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))}),l=this&&this.__generator||function(e,t){var r,i,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var l=[a,s];if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&l[0]?i.return:l[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,l[1])).done)return n;switch(i=0,(l=n?[2&l[0],n.value]:l)[0]){case 0:case 1:n=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,i=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(n=0<(n=o.trys).length&&n[n.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3]))o.label=l[1];else if(6===l[0]&&o.label<n[1])o.label=n[1],n=l;else{if(!(n&&o.label<n[2])){n[2]&&o.ops.pop(),o.trys.pop();continue}o.label=n[2],o.ops.push(l)}}l=t.call(e,o)}catch(s){l=[6,s],i=0}finally{r=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},c=Object(t.a)("div"),u=!1,p=(Object.defineProperty(c,"id",{get:function(){return u=!0,p.name},configurable:!0}),{name:"element-id",isOpen:function(){return s(this,void 0,void 0,(function(){return l(this,(function(e){return u=!1,Object(o.b)(c),Object(o.a)(),[2,u]}))}))},isEnable:function(){return s(this,void 0,void 0,(function(){return l(this,(function(e){return[2,Object(a.b)({includes:[!0],excludes:[i.d,i.b,i.c]})]}))}))}})},function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i=r(1),o=r(2),a=r(5),s=r(0),l=this&&this.__awaiter||function(e,t,r,i){return new(r=r||n)((function(n,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var r,i,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var l=[a,s];if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&l[0]?i.return:l[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,l[1])).done)return n;switch(i=0,(l=n?[2&l[0],n.value]:l)[0]){case 0:case 1:n=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,i=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(n=0<(n=o.trys).length&&n[n.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3]))o.label=l[1];else if(6===l[0]&&o.label<n[1])o.label=n[1],n=l;else{if(!(n&&o.label<n[2])){n[2]&&o.ops.pop(),o.trys.pop();continue}o.label=n[2],o.ops.push(l)}}l=t.call(e,o)}catch(s){l=[6,s],i=0}finally{r=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}};function u(){}var p=0,d=(u.toString=function(){return p++,""},{name:"function-to-string",isOpen:function(){return l(this,void 0,void 0,(function(){return c(this,(function(e){return p=0,Object(o.b)(u),Object(o.a)(),[2,2===p]}))}))},isEnable:function(){return l(this,void 0,void 0,(function(){return c(this,(function(e){return[2,Object(s.b)({includes:[!0],excludes:[i.c,(a.b||a.c)&&i.a]})]}))}))}})},function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(2),o=r(1),a=r(0),s=this&&this.__awaiter||function(e,t,r,i){return new(r=r||n)((function(n,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var r,i,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var l=[a,s];if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&l[0]?i.return:l[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,l[1])).done)return n;switch(i=0,(l=n?[2&l[0],n.value]:l)[0]){case 0:case 1:n=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,i=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(n=0<(n=o.trys).length&&n[n.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3]))o.label=l[1];else if(6===l[0]&&o.label<n[1])o.label=n[1],n=l;else{if(!(n&&o.label<n[2])){n[2]&&o.ops.pop(),o.trys.pop();continue}o.label=n[2],o.ops.push(l)}}l=t.call(e,o)}catch(s){l=[6,s],i=0}finally{r=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},c=/ /,u=!1,p=(c.toString=function(){return u=!0,p.name},{name:"reg-to-string",isOpen:function(){return s(this,void 0,void 0,(function(){return l(this,(function(e){return u=!1,Object(i.b)(c),Object(i.a)(),[2,u]}))}))},isEnable:function(){return s(this,void 0,void 0,(function(){return l(this,(function(e){return[2,Object(a.b)({includes:[!0],excludes:[o.f]})]}))}))}})},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=this&&this.__awaiter||function(e,t,r,i){return new(r=r||n)((function(n,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,i,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var l=[a,s];if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&l[0]?i.return:l[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,l[1])).done)return n;switch(i=0,(l=n?[2&l[0],n.value]:l)[0]){case 0:case 1:n=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,i=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(n=0<(n=o.trys).length&&n[n.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3]))o.label=l[1];else if(6===l[0]&&o.label<n[1])o.label=n[1],n=l;else{if(!(n&&o.label<n[2])){n[2]&&o.ops.pop(),o.trys.pop();continue}o.label=n[2],o.ops.push(l)}}l=t.call(e,o)}catch(s){l=[6,s],i=0}finally{r=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}};function a(){return(performance||Date).now()}var s={name:"debugger-checker",isOpen:function(){return i(this,void 0,void 0,(function(){var e;return o(this,(function(t){return e=a(),function(){}.constructor("debugger")(),[2,100<a()-e]}))}))},isEnable:function(){return i(this,void 0,void 0,(function(){return o(this,(function(e){return[2,!0]}))}))}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(1),o=r(2),a=r(0),s=this&&this.__awaiter||function(e,t,r,i){return new(r=r||n)((function(n,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var r,i,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var l=[a,s];if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&l[0]?i.return:l[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,l[1])).done)return n;switch(i=0,(l=n?[2&l[0],n.value]:l)[0]){case 0:case 1:n=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,i=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(n=0<(n=o.trys).length&&n[n.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3]))o.label=l[1];else if(6===l[0]&&o.label<n[1])o.label=n[1],n=l;else{if(!(n&&o.label<n[2])){n[2]&&o.ops.pop(),o.trys.pop();continue}o.label=n[2],o.ops.push(l)}}l=t.call(e,o)}catch(s){l=[6,s],i=0}finally{r=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},c=new Date,u=0,p=(c.toString=function(){return u++,""},{name:"date-to-string",isOpen:function(){return s(this,void 0,void 0,(function(){return l(this,(function(e){return u=0,Object(o.b)(c),Object(o.a)(),[2,2===u]}))}))},isEnable:function(){return s(this,void 0,void 0,(function(){return l(this,(function(e){return[2,Object(a.b)({includes:[i.a],excludes:[]})]}))}))}})},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),t=r(3);var i=/mobile/i.test(t.b)}],r={},e.m=t,e.c=r,e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=6);function e(i){var n;return(r[i]||(n=r[i]={i:i,l:!1,exports:{}},t[i].call(n.exports,n,n.exports,e),n.l=!0,n)).exports}var t,r},"object"==typeof r&&"object"==typeof t?t.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof r?r.devtoolsDetector=i():e.devtoolsDetector=i()},{"es6-promise":8}],31:[function(e,t,r){var i=e("./object");t.exports.el=function(e){return document.getElementById(e)},t.exports.createEl=function(e,t){var r;return e=e||"div",t=t||{},r=document.createElement(e),i.each(t,(function(e,t){-1!==e.indexOf("aria-")||"role"==e?r.setAttribute(e,t):r[e]=t})),r},t.exports.addClass=function(e,t){-1==(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className=""===e.className?t:e.className+" "+t)},t.exports.removeClass=function(e,t){var r,i;if(-1!=e.className.indexOf(t)){for(i=(r=e.className.split(" ")).length-1;0<=i;i--)r[i]===t&&r.splice(i,1);e.className=r.join(" ")}},t.exports.hasClass=function(e,t){return-1!=e.className.indexOf(t)},t.exports.getClasses=function(e){return e.className?e.className.split(" "):[]},t.exports.getElementAttributes=function(e){var t,r,i={};if(e&&e.attributes&&0<e.attributes.length)for(var n,o=(n=e.attributes).length-1;0<=o;o--)t=n[o].name,r=n[o].value,"boolean"!=typeof e[t]&&-1===",autoplay,controls,loop,muted,default,".indexOf(","+t+",")||(r=null!==r),i[t]=r;return i},t.exports.insertFirst=function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},t.exports.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},t.exports.unblockTextSelection=function(){document.onselectstart=function(){return!0}},t.exports.css=function(e,t,r){return!(!e||!e.style)&&(t&&r?(e.style[t]=r,!0):r||"string"!=typeof t?!r&&"object"==typeof t&&(i.each(t,(function(t,r){e.style[t]=r})),!0):e.style[t])},t.exports.getTransformName=function(e){for(var t=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],r=t[0],i=0,n=t.length;i<n;i++)if(void 0!==e.style[t[i]]){r=t[i];break}return r},t.exports.getTransformEventName=function(e,t){for(var r=["","Webkit","Moz","ms","O"],i=t.toLowerCase(),n=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],o=0,a=n.length;o<a;o++)if(void 0!==e.style[n[o]]){0!=o&&(i=r[o]+t);break}return i},t.exports.addCssByStyle=function(e){var t=document,r=t.createElement("style");((r.setAttribute("type","text/css"),r.styleSheet?r.styleSheet.cssText=e:(e=t.createTextNode(e),r.appendChild(e)),e=t.getElementsByTagName("head")).length?e[0]:t.documentElement).appendChild(r)},t.exports.getTranslateX=function(e){var r=0;if(e)try{var i=window.getComputedStyle(e),n=t.exports.getTransformName(e);r=new(window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)(i[n]).m41}catch(e){console.log(e)}return r},t.exports.getPointerPosition=function(e,r){var i={},n=t.exports.findPosition(e),o=e.offsetWidth,a=(e=e.offsetHeight,n.top),s=(n=n.left,r.pageY),l=r.pageX;return r.changedTouches&&(l=r.changedTouches[0].pageX,s=r.changedTouches[0].pageY),i.y=Math.max(0,Math.min(1,(a-s+e)/e)),i.x=Math.max(0,Math.min(1,(l-n)/o)),i},t.exports.findPosition=function(e){var t,r,i,n;return(t=e.getBoundingClientRect&&e.parentNode?e.getBoundingClientRect():t)?(e=document.documentElement,n=document.body,i=e.clientLeft||n.clientLeft||0,r=window.pageXOffset||n.scrollLeft,r=t.left+r-i,i=e.clientTop||n.clientTop||0,e=window.pageYOffset||n.scrollTop,n=t.top+e-i,{left:Math.round(r),top:Math.round(n)}):{left:0,top:0}}},{"./object":41}],32:[function(e,t,r){var i=e("./object"),n=e("./data"),o=e("./ua"),a=e("./fastclick");function s(e,t,r,n){i.each(r,(function(r){e(t,r,n)}))}t.exports.on=function(e,r,l){if(e){if(i.isArray(r))return s(t.exports.on,e,r,l);o.IS_MOBILE&&"click"==r&&a.attach(e);var c=n.getData(e);c.handlers||(c.handlers={}),c.handlers[r]||(c.handlers[r]=[]),l.guid||(l.guid=n.guid()),c.handlers[r].push(l),c.dispatcher||(c.disabled=!1,c.dispatcher=function(r){if(!c.disabled){r=t.exports.fixEvent(r);var i=c.handlers[r.type];if(i)for(var n=i.slice(0),o=0,a=n.length;o<a&&!r.isImmediatePropagationStopped();o++)n[o].call(e,r)}}),1==c.handlers[r].length&&(e.addEventListener?e.addEventListener(r,c.dispatcher,!1):e.attachEvent&&e.attachEvent("on"+r,c.dispatcher))}},t.exports.off=function(e,r,o){if(e&&n.hasData(e)){var a=n.getData(e);if(a.handlers){var l=function(r){a.handlers[r]=[],t.exports.cleanUpEvents(e,r)};if(i.isArray(r))return s(t.exports.off,e,r,o);if(r){var c=a.handlers[r];if(c)if(o){if(o.guid)for(var u=0;u<c.length;u++)c[u].guid===o.guid&&c.splice(u--,1);t.exports.cleanUpEvents(e,r)}else l(r)}else for(var p in a.handlers)l(p)}}},t.exports.cleanUpEvents=function(e,t){var r=n.getData(e);0===r.handlers[t].length&&(delete r.handlers[t],e.removeEventListener?e.removeEventListener(t,r.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,r.dispatcher)),i.isEmpty(r.handlers)&&(delete r.handlers,delete r.dispatcher,delete r.disabled),i.isEmpty(r)&&n.removeData(e)},t.exports.fixEvent=function(e){function t(){return!0}function r(){return!1}if(!e||!e.isPropagationStopped){var i,n,o,a=e||window.event;for(i in e={},a)"layerX"===i||"layerY"===i||"keyboardEvent.keyLocation"===i||"returnValue"==i&&a.preventDefault||(e[i]=a[i]);e.target||(e.target=e.srcElement||document),e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement,e.preventDefault=function(){a.preventDefault&&a.preventDefault(),e.returnValue=!1,e.isDefaultPrevented=t,e.defaultPrevented=!0},e.isDefaultPrevented=r,e.defaultPrevented=!1,e.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),e.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=r,e.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=r,null!=e.clientX&&(n=document.documentElement,o=document.body,e.pageX=e.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),e.which=e.charCode||e.keyCode,null!=e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e},t.exports.trigger=function(e,r){var i,o,a;if(e)return i=n.hasData(e)?n.getData(e):{},o=e.parentNode||e.ownerDocument,"string"==typeof r&&(a=null,!e.paramData&&0!=e.paramData||(a=e.paramData,e.paramData=null,e.removeAttribute(a)),r={type:r,target:e,paramData:a}),r=t.exports.fixEvent(r),i.dispatcher&&i.dispatcher.call(e,r),o&&!r.isPropagationStopped()&&!1!==r.bubbles?t.exports.trigger(o,r):o||r.defaultPrevented||(a=n.getData(r.target),r.target[r.type]&&(a.disabled=!0,"function"==typeof r.target[r.type]&&r.target[r.type](),a.disabled=!1)),!r.defaultPrevented},t.exports.one=function(e,r,o){if(e){var a=function i(){t.exports.off(e,r,i),o.apply(this,arguments)};if(i.isArray(r))return s(t.exports.one,e,r,o);a.guid=o.guid=o.guid||n.guid(),t.exports.on(e,r,a)}}},{"./data":29,"./fastclick":33,"./object":41,"./ua":48}],33:[function(e,t,r){function i(e,t){var r;if(t=t||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=t.touchBoundary||10,this.layer=e,this.tapDelay=t.tapDelay||200,this.tapTimeout=t.tapTimeout||700,!i.notNeeded(e)){for(var n=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=0,s=n.length;a<s;a++)this[n[a]]=function(e,t){return function(){return e.apply(t,arguments)}}(this[n[a]],this);o&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,r,i){var n=Node.prototype.removeEventListener;"click"===t?n.call(e,t,r.hijacked||r,i):n.call(e,t,r,i)},e.addEventListener=function(t,r,i){var n=Node.prototype.addEventListener;"click"===t?n.call(e,t,r.hijacked||(r.hijacked=function(e){e.propagationStopped||r(e)}),i):n.call(e,t,r,i)}),"function"==typeof e.onclick&&(r=e.onclick,e.addEventListener("click",(function(e){r(e)}),!1),e.onclick=null)}}var n=0<=navigator.userAgent.indexOf("Windows Phone"),o=0<navigator.userAgent.indexOf("Android")&&!n,a=/iP(ad|hone|od)/.test(navigator.userAgent)&&!n,s=a&&/OS 4_\d(_\d)?/.test(navigator.userAgent),l=a&&/OS [6-7]_\d/.test(navigator.userAgent),c=0<navigator.userAgent.indexOf("BB10");i.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(a&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},i.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!o;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},i.prototype.sendClick=function(e,t){var r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),t=t.changedTouches[0],(r=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),r.forwardedTouchEvent=!0,e.dispatchEvent(r)},i.prototype.determineEventType=function(e){return o&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},i.prototype.focus=function(e){var t;a&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type&&"email"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},i.prototype.updateScrollParent=function(e){var t,r=e.fastClickScrollParent;if(!r||!r.contains(e)){t=e;do{if(t.scrollHeight>t.offsetHeight){r=t,e.fastClickScrollParent=t;break}}while(t=t.parentElement)}r&&(r.fastClickLastScrollTop=r.scrollTop)},i.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},i.prototype.onTouchStart=function(e){var t,r,i;if(!(1<e.targetTouches.length)){if(t=this.getTargetElementFromEventTarget(e.target),r=e.targetTouches[0],a){if((i=window.getSelection()).rangeCount&&!i.isCollapsed)return!0;if(!s){if(r.identifier&&r.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=r.identifier,this.updateScrollParent(t)}}this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=r.pageX,this.touchStartY=r.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault()}return!0},i.prototype.touchHasMoved=function(e){e=e.changedTouches[0];var t=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>t||Math.abs(e.pageY-this.touchStartY)>t},i.prototype.onTouchMove=function(e){return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0},i.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},i.prototype.onTouchEnd=function(e){var t,r,i,n=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,t=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,l&&(i=e.changedTouches[0],(n=document.elementFromPoint(i.pageX-window.pageXOffset,i.pageY-window.pageYOffset)||n).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(i=n.tagName.toLowerCase())){if(r=this.findControl(n)){if(this.focus(n),o)return!1;n=r}}else if(this.needsFocus(n))return 100<e.timeStamp-t||a&&window.top!==window&&"input"===i?this.targetElement=null:(this.focus(n),this.sendClick(n,e),a&&"select"===i||(this.targetElement=null,e.preventDefault())),!1;return!(!a||s||!(r=n.fastClickScrollParent)||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(n)||(e.preventDefault(),this.sendClick(n,e)),!1)},i.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},i.prototype.onMouse=function(e){return!this.targetElement||!(!e.forwardedTouchEvent&&e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)&&(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),1))},i.prototype.onClick=function(e){return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):"submit"===e.target.type&&0===e.detail||((e=this.onMouse(e))||(this.targetElement=null),e)},i.prototype.destroy=function(){var e=this.layer;o&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},i.notNeeded=function(e){var t,r;if(void 0===window.ontouchstart)return!0;if(r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!o)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(31<r&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(c&&10<=(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=r[2]&&(t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||!!(27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===e.style.touchAction||"manipulation"===e.style.touchAction},i.attach=function(e,t){return new i(e,t)},t.exports=i},{}],34:[function(e,t,r){var i=e("./data");t.exports.bind=function(e,t,r){function n(){return t.apply(e,arguments)}return t.guid||(t.guid=i.guid()),n.guid=r?r+"_"+t.guid:t.guid,n}},{"./data":29}],35:[function(e,t,r){function i(){"use strict";i=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",a=y.asyncIterator||"@@asyncIterator",s=y.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(t){l=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o,a,s,l;return t=t&&t.prototype instanceof d?t:d,t=Object.create(t.prototype),i=new T(i||[]),n(t,"_invoke",{value:(o=e,a=r,s=i,l="suspendedStart",function(e,t){if("executing"===l)throw new Error("Generator is already running");if("completed"===l){if("throw"===e)throw t;return{value:void 0,done:!0}}for(s.method=e,s.arg=t;;){var r=s.delegate;if(r&&(r=function e(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,e(t,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}return"throw"===(i=u(i,t.iterator,r.arg)).type?(r.method="throw",r.arg=i.arg,r.delegate=null,p):(i=i.arg)?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}(r,s),r)){if(r===p)continue;return r}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if("suspendedStart"===l)throw l="completed",s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);if(l="executing","normal"===(r=u(o,a,s)).type){if(l=s.done?"completed":"suspendedYield",r.arg===p)continue;return{value:r.arg,done:s.done}}"throw"===r.type&&(l="completed",s.method="throw",s.arg=r.arg)}})}),t}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var p={};function d(){}function h(){}function f(){}var y,_,g=(l(y={},o,(function(){return this})),(_=(_=Object.getPrototypeOf)&&_(_(E([]))))&&_!==t&&r.call(_,o)&&(y=_),f.prototype=d.prototype=Object.create(y));function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function i(n,o,a,s){var l;if("throw"!==(n=u(e[n],e,o)).type)return(o=(l=n.arg).value)&&"object"==typeof o&&r.call(o,"__await")?t.resolve(o.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(o).then((function(e){l.value=e,a(l)}),(function(e){return i("throw",e,a,s)}));s(n.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t,i=e[o];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return t=-1,(i=function i(){for(;++t<e.length;)if(r.call(e,t))return i.value=e[t],i.done=!1,i;return i.value=void 0,i.done=!0,i}).next=i}return{next:w}}function w(){return{value:void 0,done:!0}}return n(g,"constructor",{value:h.prototype=f,configurable:!0}),n(f,"constructor",{value:h,configurable:!0}),h.displayName=l(f,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(m.prototype),l(m.prototype,a,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var a=new m(c(t,r,i,n),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},v(g),l(g,s,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t,r=Object(e),i=[];for(t in r)i.push(t);return i.reverse(),function e(){for(;i.length;){var t=i.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},e.values=E,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(r,i){return a.type="throw",a.arg=e,t.next=r,i&&(t.method="next",t.arg=void 0),!!i}for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;0<=i;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}var a=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),b(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,i,n=this.tryEntries[t];if(n.tryLoc===e)return"throw"===(r=n.completion).type&&(i=r.arg,b(n)),i}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function n(e,t,r,i,n,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,l,"next",e)}function l(e){n(a,i,o,s,l,"throw",e)}s(void 0)}))}}var a,s="undefined"==typeof Promise?e("es6-promise").Promise:Promise;e=self,a=function(){"use strict";function e(e,t,r,i){void 0===t&&(t=!1),void 0===r&&(r="");var n=performance.now(),o=i;return new s((function(i){a=e,void 0===(s=t?100:0)&&(s=100),(l=document.createElement("video")).setAttribute("width",""+s),l.setAttribute("height",""+s),l.setAttribute("muted","muted"),l.setAttribute("crossorigin","anonymous"),l.setAttribute("preload","preload"),l.setAttribute("autoplay","autoplay"),l.setAttribute("webkit-playsinline","webkit-playsinline"),l.setAttribute("playsinline","playsinline"),l.setAttribute("x-webkit-airplay","x-webkit-airplay"),l.setAttribute("playsinline","playsinline"),l.src=a;var a,s,l,c=l,u=setInterval((function(){var e,a,s,l,p;(performance.now()-n>o||0!==c.videoWidth)&&(clearInterval(u),e=0!==c.videoWidth,t?(c.setAttribute("controls","controls"),a=c,void 0===(s=r)&&(s=""),l=document.createElement("dv"),(p=document.createElement("h3")).innerText=s,l.appendChild(a),l.appendChild(p),document.body.appendChild(l)):(c.pause(),c=null),i(e))}))}))}var t={d:function(e,r){for(var i in r)t.o(r,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:r[i]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},r={},n=(t.d(r,{default:function(){return h}}),navigator.userAgent),a=/qqbrowser/i.test(n.toLowerCase()),l=/Edge/i.test(n),c=(l=/Chrome/i.test(n)&&!l&&!a,/Safari/i.test(n)&&!l),u=(l=(a=n.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/))&&a[1])&&Number(l.split(".")[0]),p=function(){var e=o(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.next=5,r.blob();case 5:return r=e.sent,e.abrupt("return",URL.createObjectURL(r));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d={includeSystemHijack:!0,showVideo:!1,codecTags:["hev1","hvc1"],timeout:2e3},h=function(t){return void 0===t&&(t={}),new s(function(){var r=o(i().mark((function r(n){var o,a,s,l,h,f,y,_,g,v,m;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=Object.assign({},d,t),o=s.includeSystemHijack,a=s.showVideo,f=s.codecTags,s=s.timeout,l=performance.now(),h=-1<f.indexOf("hvc1"),f=-1<f.indexOf("hev1"),y="https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hvc1.mp4",v=g=!(_="https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hev1.mp4"),!(c&&u&&11<=u)){r.next=13;break}if(r.t0=o,r.t0){r.next=8;break}return r.next=7,p(y);case 7:y=r.sent;case 8:return r.next=10,e(y,a,"hvc1",s);case 10:g=r.sent,r.next=33;break;case 13:if(r.t1=h,!r.t1){r.next=23;break}if(r.t2=o,r.t2){r.next=20;break}return r.next=19,p(y);case 19:y=r.sent;case 20:return r.next=22,e(y,a,"hvc1",s);case 22:g=r.sent;case 23:if(r.t3=f,!r.t3){r.next=33;break}if(r.t4=o,r.t4){r.next=30;break}return r.next=29,p(_);case 29:_=r.sent;case 30:return r.next=32,e(_,a,"hev1",s);case 32:v=r.sent;case 33:m=performance.now(),n({isHvc1Supported:g,isHev1Supported:v,time:Math.ceil(m-l)});case 35:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())};return r.default},"object"==typeof r&&"object"==typeof t?t.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof r?r.hevcDetector=a():e.hevcDetector=a()},{"es6-promise":8}],36:[function(e,t,r){var i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/;?#]*)(.*)$/,o=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=s.parseURL(e);if(i)return i.path=s.normalizePath(i.path),s.buildURLFromParts(i);throw new Error("Error trying to parse base URL.")}if(!(i=s.parseURL(t)))throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=s.normalizePath(i.path),s.buildURLFromParts(i)):t;if(!(t=s.parseURL(e)))throw new Error("Error trying to parse base URL.");var o;return!t.netLoc&&t.path&&"/"!==t.path[0]&&(e=n.exec(t.path),t.netLoc=e[1],t.path=e[2]),t.netLoc&&!t.path&&(t.path="/"),e={scheme:t.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment},i.netLoc||(e.netLoc=t.netLoc,"/"!==i.path[0]&&(i.path?(o=(o=t.path).substring(0,o.lastIndexOf("/")+1)+i.path,e.path=s.normalizePath(o)):(e.path=t.path,i.params||(e.params=t.params,i.query)||(e.query=t.query)))),null===e.path&&(e.path=r.alwaysNormalize?s.normalizePath(i.path):i.path),s.buildURLFromParts(e)},parseURL:function(e){return(e=i.exec(e))?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(o,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};t.exports=s},{}],37:[function(e,t,r){function i(e){for(var t in e="string"==typeof e?this.parseAttrList(e):e)e.hasOwnProperty(t)&&(this[t]=e[t])}var n=/^(\d+)x(\d+)$/,o=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;i.prototype={decimalInteger:function(e){return(e=parseInt(this[e],10))>Number.MAX_SAFE_INTEGER?1/0:e},hexadecimalInteger:function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,r=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null},hexadecimalIntegerAsNumber:function(e){return(e=parseInt(this[e],16))>Number.MAX_SAFE_INTEGER?1/0:e},decimalFloatingPoint:function(e){return parseFloat(this[e])},enumeratedString:function(e){return this[e]},decimalResolution:function(e){if(null!==(e=n.exec(this[e])))return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},parseAttrList:function(e){var t,r={};for(o.lastIndex=0;null!==(t=o.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r}},t.exports=i},{}],38:[function(e,t,r){function i(){this.method=null,this.key=null,this.iv=null,this._uri=null}function n(){this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}function o(){this.loaders={}}var a=e("./attrlist"),s=e("../io"),l=e("./URLToolkit"),c=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,u=/#EXT-X-MEDIA:(.*)/g,p=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),d=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(PART-INF):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/;n.prototype.getUrl=function(){return!this._url&&this.relurl&&(this._url=l.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},n.prototype.Seturl=function(e){this._url=e},n.prototype.getProgramDateTime=function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime},n.prototype.GetbyteRange=function(){var e,t,r;return this._byteRange||(e=this._byteRange=[],this.rawByteRange&&(1===(t=this.rawByteRange.split("@",2)).length?(r=this.lastByteRangeEndOffset,e[0]=r||0):e[0]=parseInt(t[1]),e[1]=parseInt(t[0])+e[0])),this._byteRange},n.prototype.getByteRangeStartOffset=function(){return this.byteRange[0]},n.prototype.getByteRangeEndOffset=function(){return this.byteRange[1]},n.prototype.getDecryptdata=function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},o.prototype=((e={parseMasterPlaylist:function(e,t){var r=[];for(c.lastIndex=0;null!=(o=c.exec(e));){var i={},n=i.attrs=new a(o[1]),o=(i.url=this.resolve(o[2],t),n.decimalResolution("RESOLUTION"));if(o&&(i.width=o.width,i.height=o.height),i.bitrate=n.decimalInteger("AVERAGE-BANDWIDTH")||n.decimalInteger("BANDWIDTH"),i.name=n.NAME,s=n.CODECS)for(var s=s.split(/[ ,]+/),l=0;l<s.length;l++){var u=s[l];-1!==u.indexOf("avc1")?i.videoCodec=this.avc1toavcoti(u):-1!==u.indexOf("hvc1")?i.videoCodec=u:i.audioCodec=u}r.push(i)}return r},parseMasterPlaylistMedia:function(e,t,r,i){var n=[],o=0;for(u.lastIndex=0;null!=(l=u.exec(e));){var s={},l=new a(l[1]);l.TYPE===r&&(s.groupId=l["GROUP-ID"],s.name=l.NAME,s.type=r,s.default="YES"===l.DEFAULT,s.autoselect="YES"===l.AUTOSELECT,s.forced="YES"===l.FORCED,l.URI&&(s.url=this.resolve(l.URI,t)),s.lang=l.LANGUAGE,s.name||(s.name=s.lang),i&&(s.audioCodec=i),s.id=o++,n.push(s))}return n},avc1toavcoti:function(e){var t=e.split("."),r=2<t.length?(r=t.shift()+".",(r+=parseInt(t.shift()).toString(16))+("000"+parseInt(t.shift()).toString(16)).substr(-4)):e;return r},load:function(e,t,r){var i=this;s.get(e,(function(r){var n,o,a,s=i.parseMasterPlaylist(r,e);s.length&&(n=i.parseMasterPlaylistMedia(r,e,"AUDIO",s[0].audioCodec),o=i.parseMasterPlaylistMedia(r,e,"SUBTITLES"),n.length)&&(a=!1,n.forEach((function(e){e.url||(a=!0)})),!1===a)&&s[0].audioCodec&&!s[0].attrs.AUDIO&&(console.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),n.unshift({type:"main",name:"main"})),t({levels:s,audioTracks:n,subtitles:o,url:e,string:r})}),(function(e,t){r&&r(e,t)}))},loadMediaPlaylist:function(e,t,r){var i=this,n=(e=e||{}).string,o=e.url;n?(e=i.parseLevelPlaylist(n,o),t(e)):s.get(o,(function(e){e=i.parseLevelPlaylist(e,o),t(e)}),(function(e){r&&r(e)}))},resolve:function(e,t){return l.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}}).parseMasterPlaylist=function(e,t){var r=[];for(c.lastIndex=0;null!=(o=c.exec(e));){var i={},n=i.attrs=new a(o[1]),o=(i.url=this.resolve(o[2],t),n.decimalResolution("RESOLUTION"));if(o&&(i.width=o.width,i.height=o.height),i.bitrate=n.decimalInteger("AVERAGE-BANDWIDTH")||n.decimalInteger("BANDWIDTH"),i.name=n.NAME,s=n.CODECS)for(var s=s.split(/[ ,]+/),l=0;l<s.length;l++){var u=s[l];-1!==u.indexOf("avc1")?i.videoCodec=this.avc1toavcoti(u):-1!==u.indexOf("hvc1")?i.videoCodec=u:i.audioCodec=u}r.push(i)}return r},e.parseMasterPlaylistMedia=function(e,t,r,i){var n=[],o=0;for(u.lastIndex=0;null!=(l=u.exec(e));){var s={},l=new a(l[1]);l.TYPE===r&&(s.groupId=l["GROUP-ID"],s.name=l.NAME,s.type=r,s.default="YES"===l.DEFAULT,s.autoselect="YES"===l.AUTOSELECT,s.forced="YES"===l.FORCED,l.URI&&(s.url=this.resolve(l.URI,t)),s.lang=l.LANGUAGE,s.name||(s.name=s.lang),i&&(s.audioCodec=i),s.id=o++,n.push(s))}return n},e.avc1toavcoti=function(e){var t=e.split("."),r=2<t.length?(r=t.shift()+".",(r+=parseInt(t.shift()).toString(16))+("000"+parseInt(t.shift()).toString(16)).substr(-4)):e;return r},e.parseLevelPlaylist=function(e,t,r,o){var s,l,c=0,u=0,h={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},f=new i,y=0,_=null,g=new n;for(p.lastIndex=0;null!==(s=p.exec(e));){var v=s[1];if(v){g.duration=parseFloat(v);var m=(" "+s[2]).slice(1);g.title=m||null,g.tagList.push(m?["INF",v,m]:["INF",v])}else if(s[3])isNaN(g.duration)||(m=c++,g.type=o,g.start=u,g.levelkey=f,g.sn=m,g.level=r,g.cc=y,g.baseurl=t,g.relurl=(" "+s[3]).slice(1),h.fragments.push(g),u+=(_=g).duration,g=new n);else if(s[4])g.rawByteRange=(" "+s[4]).slice(1),_&&(v=_.byteRangeEndOffset)&&(g.lastByteRangeEndOffset=v);else if(s[5])g.rawProgramDateTime=(" "+s[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),void 0===h.programDateTime&&(h.programDateTime=new Date(new Date(Date.parse(s[5]))-1e3*u));else{for(s=s[0].match(d),l=1;l<s.length&&void 0===s[l];l++);var S=(" "+s[l+1]).slice(1),b=(" "+s[l+2]).slice(1);switch(s[l]){case"#":g.tagList.push(b?[S,b]:[S]);break;case"PLAYLIST-TYPE":h.type=S.toUpperCase();break;case"MEDIA-SEQUENCE":c=h.startSN=parseInt(S);break;case"TARGETDURATION":h.targetduration=parseFloat(S);break;case"VERSION":h.version=parseInt(S);break;case"EXTM3U":break;case"ENDLIST":h.live=!1;break;case"DIS":y++,g.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":y=parseInt(S);break;case"KEY":var T=(w=new a(S)).enumeratedString("METHOD"),E=w.URI,w=w.hexadecimalInteger("IV");T&&(f=new i,E)&&0<=["AES-128","SAMPLE-AES"].indexOf(T)&&(f.method=T,f.baseuri=t,f.reluri=E,f.key=null,f.iv=w);break;case"START":T=new a(S).decimalFloatingPoint("TIME-OFFSET"),isNaN(T)||(h.startTimeOffset=T);break;case"MAP":E=new a(S),g.relurl=E.URI,g.rawByteRange=E.BYTERANGE,g.baseurl=t,g.level=r,g.type=o,g.sn="initSegment",h.initSegment=g,g=new n;break;case"PART-INF":w=new a(S),h.partTarget=w.decimalFloatingPoint("PART-TARGET");break;default:console.log("line parsed but not handled: "+s)}}}return(g=_)&&!g.relurl&&(h.fragments.pop(),u-=g.duration),h.totalduration=u,h.averagetargetduration=u/h.fragments.length,h.endSN=c-1,h},e),t.exports=o},{"../io":39,"./URLToolkit":36,"./attrlist":37}],39:[function(e,t,r){var i=e("./url");t.exports.get=function(e,r,i,n,o){t.exports.ajax("GET",e,{},r,i,n,o)},t.exports.post=function(e,r,i,n,o,a){t.exports.ajax("POST",e,r,i,n,o,a,{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"})},t.exports.postWithHeader=function(e,r,i,n,o){t.exports.ajax("POST",e,r,n,o,!0,!1,i)},t.exports.ajax=function(e,t,r,n,o,a,s,l){var c,u,p,d;o=o||function(){},"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")}),u=new XMLHttpRequest,p=i.parseUrl(t),d=window.location,p.protocol+p.host===d.protocol+d.host||!window.XDomainRequest||"withCredentials"in u?(c="file:"==p.protocol||"file:"==d.protocol,u.onreadystatechange=function(){4===u.readyState&&(200===u.status||c&&0===u.status?n(u.responseText):o(u.responseText,u.status))}):((u=new window.XDomainRequest).onload=function(){n(u.responseText)},u.onerror=o,u.onprogress=function(){},u.ontimeout=o);try{if(void 0===a&&(a=!0),u.open(e,t,a),s&&(u.withCredentials=!0),l)for(var h in l)l.hasOwnProperty(h)&&u.setRequestHeader(h,l[h])}catch(e){return void o(e)}try{u.send(r)}catch(e){o(e)}},t.exports.jsonp=function(e,t,r){var i="jsonp_callback_"+Math.round(1e5*Math.random()),n=document.createElement("script");e&&(n.src=e+(0<=e.indexOf("?")?"&":"?")+"callback="+i+"&cb="+i,n.onerror=function(){delete window[i],document.body.removeChild(n),r()},n.onload=function(){setTimeout((function(){window[i]&&(delete window[i],document.body.removeChild(n))}),0)},window[i]=function(e){delete window[i],document.body.removeChild(n),t(e)},document.body.appendChild(n))},t.exports.loadJS=function(e,t){var r=document.getElementsByTagName("HEAD").item(0),i=document.createElement("script");e&&e.toLowerCase().indexOf("https://")<0&&e.toLowerCase().indexOf("http://")<0&&(e=document.URL.replace(/(\/[^\/]*?)$/i,"")+e),i.type="text/javascript",i.src=e,i.onload=function(){t&&t()},r.appendChild(i)}},{"./url":49}],40:[function(e,t,r){var i=e("./dom");t.exports.render=function(e,t){var r=t.align||(t.className?"":"tl"),n=t.x||0,o=(t=t.y||0,n.indexOf&&0<n.indexOf("%")?"":"px"),a=t.indexOf&&0<t.indexOf("%")?"":"px";"tl"===r?i.css(e,{float:"left","margin-left":n+o,"margin-top":t+a}):"tr"===r?i.css(e,{float:"right","margin-right":n+o,"margin-top":t+a}):"tlabs"===r?i.css(e,{position:"absolute",left:n+o,top:t+a}):"trabs"===r?i.css(e,{position:"absolute",right:n+o,top:t+a}):"blabs"===r?i.css(e,{position:"absolute",left:n+o,bottom:t+a}):"brabs"===r?i.css(e,{position:"absolute",right:n+o,bottom:t+a}):"cc"===r&&i.addClass(e,"loading-center")}},{"./dom":31}],41:[function(e,t,r){var i=Object.prototype.hasOwnProperty;t.exports.create=Object.create||function(e){function t(){}return t.prototype=e,new t},t.exports.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(arg)},t.exports.isEmpty=function(e){for(var t in e)if(null!==e[t])return!1;return!0},t.exports.each=function(e,r,n){if(t.exports.isArray(e))for(var o=0,a=e.length;o<a&&!1!==r.call(n||this,e[o],o);++o);else for(var s in e)if(i.call(e,s)&&!1===r.call(n||this,s,e[s]))break;return e},t.exports.merge=function(e,t){if(t)for(var r in t)i.call(t,r)&&(e[r]=t[r]);return e},t.exports.deepMerge=function(e,r){var n,o,a;for(n in e=t.exports.copy(e),r)i.call(r,n)&&(o=e[n],a=r[n],t.exports.isPlain(o)&&t.exports.isPlain(a)?e[n]=t.exports.deepMerge(o,a):e[n]=r[n]);return e},t.exports.copy=function(e){return t.exports.merge({},e)},t.exports.isPlain=function(e){return!!e&&"object"==typeof e&&"[object Object]"===e.toString()&&e.constructor===Object},t.exports.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.exports.unescape=function(e){return e.replace(/&([^;]+);/g,(function(e,t){return{amp:"&",lt:"<",gt:">",quot:'"',"#x27":"'","#x60":"`"}[t.toLowerCase()]||e}))}},{}],42:[function(e,t,r){var i,n=e("./object");(i=function(){}).extend=function(e){var t,r,o=(e=e||{}).init||e.init||this.prototype.init||this.prototype.init||function(){};for(r in(((t=function(){o.apply(this,arguments)}).prototype=n.create(this.prototype)).constructor=t).extend=i.extend,t.create=i.create,e)e.hasOwnProperty(r)&&(t.prototype[r]=e[r]);return t},i.create=function(){var e=n.create(this.prototype);return this.apply(e,arguments),e},t.exports=i},{"./object":41}],43:[function(e,t,r){var i=!new Function("try {return this===window;}catch(e){ return false;}")();t.exports.isSSR=i},{}],44:[function(e,t,r){var i=e("./object"),n=e("../config"),o=e("./dom"),a=e("./cookie"),s=e("./constants"),l=e("../lang/index"),c=e("./ua"),u=e("../player/base/plugin/defaultemptycomponent"),p=e("./hardware-decoding-detector"),d={preload:!0,autoplay:!0,useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"",trackLog:!0,logBatched:!0,heartHeatInterval:30,isLive:!1,playsinline:!0,showBarTime:5e3,rePlay:!1,liveRetry:5,liveRetryInterval:1,liveRetryStep:0,keyShortCuts:!1,keyFastForwardStep:10,isVBR:!1,vodRetry:3,format:"",definition:"",defaultDefinition:"",loadDataTimeout:20,waitingTimeout:60,waitingBufferedTime:3,delayLoadingShow:1,controlBarForOver:!1,controlBarVisibility:"hover",enableSystemMenu:!1,qualitySort:"asc",x5_video_position:"normal",x5_type:"",x5_fullscreen:!1,x5_orientation:"landscape|portrait",x5LandscapeAsFullScreen:!0,autoPlayDelay:0,autoPlayDelayDisplayText:"",useHlsPluginForSafari:!1,enableMSEForAndroid:!0,encryptType:0,language:"zh-cn",languageTexts:{},mediaType:"video",outputType:"",playConfig:{},reAuthInfo:{},components:[],liveTimeShiftUrl:"",liveShiftSource:"",liveShiftTime:"",liveShiftMinOffset:30,videoHeight:"100%",videoWidth:"100%",enableWorker:!0,authTimeout:"",enableMockFullscreen:!1,region:"cn-shanghai",debug:!1,progressMarkers:[],snapshotWatermark:{left:"500",top:"100",text:"",font:"16px 宋体",fillColor:"#FFFFFF",strokeColor:"#FFFFFF"},liveStartTime:"",liveOverTime:"",enableStashBufferForFlv:!0,stashInitialSizeForFlv:32,flvOption:{accurateSeek:!0},hlsOption:{stopLoadAsPaused:!1},hlsLoadingTimeOut:2e4,useHlsPlugOnMobile:!0,lowLatencyMode:!1,useHls2:void 0,skipRtsSupportCheck:!1,rtsLoadDataTimeout:3e3,rtsFallbackSource:void 0,rtsVersion:"",rtsSdkUrl:"",nudgeMaxRetry:5,tracks:[],recreatePlayer:function(){},diagnosisButtonVisible:!0,enableH265:!1,forceH265:!1,h265Threads:!0,h265Simd:!0,preventRecord:!1,traceId:"",mediaAuth:void 0,textTracks:void 0,_native:!0,hlsUriToken:"",thumbnailUrl:"",refreshAccessInfo:function(){},drmSessionTimeout:5e3,skinRes:"//"+n.domain+"/de/prismplayer-flash/"+n.flashVersion+"/atlas/defaultSkin",splayerUrl:null,splayerWasmDomain:null},h=(t.exports.defaultH5Layout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"tooltip",align:"blabs",x:0,y:50},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]}],t.exports.defaultAudioLayout=[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"volume",align:"tr",x:5,y:10}]}],t.exports.defaultFlashLayout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}],t.exports.canPlayType=function(e){var t=document.createElement("video");return t.canPlayType?t.canPlayType(e):""},t.exports.canPlayHls=function(){return""!=t.exports.canPlayType("application/x-mpegURL")},t.exports.isUsedHlsPluginOnMobile=function(e){return!!(c.IS_MOBILE&&(c.IS_CHROME||c.IS_FIREFOX||c.IS_X5||c.IS_EDGE_NEW)&&t.exports.isSupportHls())},t.exports.isSafariUsedHlsPlugin=function(e){return!!(c.os.pc&&c.browser.safari&&e)},t.exports.hasUIComponent=function(e,r){if(void 0!==e&&e&&0!=e.length)for(var i=0,n=e.length;i<n;i++){var o=e[i].name;if(o==r)return!0;if("controlBar"==o)return t.exports.hasUIComponent(e[i].children,r)}return!1},t.exports.validateSource=function(e){return!0},t.exports.supportH5Video=function(){return void 0!==document.createElement("video").canPlayType},t.exports.createWrapper=function(e){var r;if((r="string"==typeof(r=e.id)?(0===r.indexOf("#")&&(r=r.slice(1)),o.el(r)):r)&&r.nodeName)return t.exports.adjustContainerLayout(r,e),r;throw new TypeError("没有为播放器指定容器")},t.exports.adjustContainerLayout=function(e,t){t.width&&!e.style.width&&(e.style.width=t.width),t.height&&!e.style.height&&(e.style.height=t.height)},t.exports.isSupportHls=function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer;return e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove,e&&t},t.exports.isSupportFlv=function(){return t.exports.isSupportHls()},t.exports.isSupportMSE=function(){return!!window.Promise&&!!window.Uint8Array&&!!Array.prototype.forEach&&t.exports.isSupportedMediaSource()},t.exports.isSupportedMediaSource=function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported},t.exports.isSupportedDrm=function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)&&t.exports.isSupportMSE()},t.exports.isAudio=function(e){return e&&0<e.toLowerCase().indexOf(".mp3")},t.exports.isLiveShift=function(e){return e.isLive&&e.liveStartTime&&e.liveOverTime},t.exports.isHls=function(e){return e&&0<e.toLowerCase().indexOf(".m3u8")},t.exports.isDash=function(e){return e&&0<e.toLowerCase().indexOf(".mpd")},t.exports.isFlv=function(e){return e&&0<e.toLowerCase().indexOf(".flv")},t.exports.isRTMP=function(e){return e&&-1<e.toLowerCase().indexOf("rtmp:")},t.exports.isRts=function(e){return e&&-1<e.toLowerCase().indexOf("artc:")},t.exports.isMp4=function(e){return e&&-1<e.toLowerCase().indexOf(".mp4")},t.exports.checkSecuritSupport=function(){return t.exports.isSupportHls()?"":c.IS_IOS?l.get("iOSNotSupportVodEncription"):l.get("UseChromeForVodEncription")},t.exports.nativeSupportH265=function(){return c.IS_IOS||c.IS_MAC_SAFARI},t.exports.findSelectedStreamLevel=function(e,t){var r=t;if(r||(r=a.get(s.SelectedStreamLevel))){for(var i=0;i<e.length;i++)if(e[i].definition==r)return i}else a.set(s.SelectedStreamLevel,e[0].definition,365);return 0},t.exports.getHistoryDetectResult=function(e){if(e)return"hvc1"===e?a.get(s.HWDetectHvc1):"hev1"===e?a.get(s.HWDetectHev1):void 0},t.exports.setHistoryDetectResult=function(e,t){var r="unknownCodec";"hvc1"===e?r=s.HWDetectHvc1:"hev1"===e&&(r=s.HWDetectHev1),a.set(r,t)},t.exports.handleOption=function(e,r){t.exports.isRts(e.source)&&(e.isLive=!0);var n,o=i.merge(i.copy(d),e),a=[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}],s=!1;if(e.useFlashPrism||t.exports.isRTMP(e.source)?(s=!0,a=[{name:"liveIco",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"volume",align:"tr",x:10,y:25}]):(n=t.exports.isLiveShift(o))?(a.push({name:"liveShiftProgress",align:"tlabs",x:0,y:0}),a.push({name:"playButton",align:"tl",x:15,y:12}),a.push({name:"liveDisplay",align:"tl",x:15,y:6})):a.push({name:"liveDisplay",align:"tlabs",x:15,y:6}),e.isLive)if(void 0===e.skinLayout)o.skinLayout=[{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"tooltip",align:"blabs",x:0,y:56},{name:"H5Loading",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:t.exports.isRts(e.source)?[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"volume",align:"tr",x:5,y:10},{name:"liveDisplay",align:"tlabs",x:15,y:6}]:a}];else if(0!=e.skinLayout){for(var l=e.skinLayout.length,c=[],p=-1,h=0;h<l;h++)if("controlBar"==o.skinLayout[h].name){p=h;for(var f=o.skinLayout[h].children.length,y=0;y<f;y++){var _,g=o.skinLayout[h].children[y].name;"liveDisplay"!=g&&"liveIco"!=g&&"fullScreenButton"!=g&&"volume"!=g&&"snapshot"!=g&&"setting"!=g&&"subtitle"!=g&&(!n||"progress"!=g&&"playButton"!=g&&"timeDisplay"!=g)||(_=o.skinLayout[h].children[y],"progress"==g?_.name="liveShiftProgress":"timeDisplay"==g?_.name="liveShiftTimeDisplay":s&&"liveDisplay"==g&&(_.name="liveIco"),c.push(_))}break}-1!=p&&(o.skinLayout[p].children=c)}return(void 0===e.components||!e.components||i.isArray(e.components)&&0==e.components.length)&&"false"!=e.components&&(o.components=[u]),o},t.exports.getLiveHostByRegion=function(e){return e&&-1<["ap-southeast-1","eu-central-1"].indexOf(e)?"live."+e+".aliyuncs.com":"live.aliyuncs.com"},t.exports.isVideoTag=function(e){return e&&"string"==typeof e.nodeName&&"video"===e.nodeName.toLowerCase()},t.exports.unqiueTextTracks=function(e){var t=[],r=(t=(e=void 0===e?[]:e).reduce((function(e,t){var r;return e.some((function(e){return e.srclang===t.srclang}))?e:((r=t).label=t.label||t.srclang,[].concat(e,[r]))}),[]),{});return t.forEach((function(e,t){r[e.label]?r[e.label].push(t):r[e.label]=[t]})),Object.keys(r).forEach((function(e){1<(e=r[e]||[]).length&&e.forEach((function(e){t[e].label=t[e].label+"("+t[e].srclang+")"}))})),t},t.exports.hizksj=function(){return Date.now()<1672531199e3},t.exports.isHvc1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("hvc1")},t.exports.isHev1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("hev1")},t.exports.isH265Codec=function(e){return t.exports.isHvc1Codec(e=void 0===e?"":e)||t.exports.isHev1Codec(e)},t.exports.getVideoTrack=function(e){var t;return(e=void 0===e?[]:e).forEach((function(e){1===Number(e.type)&&(t=e)})),t},c.IS_ANDROID&&(c.dingTalk()||c.IS_UC||c.is_X5||c.IS_HUAWEI||c.IS_XIAOMI||c.IS_OPPO||c.IS_VIVO||c.IS_MEIZU||c.IS_SAMSUNG||c.IS_WEBVIEW)||c.os&&"windows"===c.os.name&&c.IS_UC);t.exports.shouldUseBasePlayer=function(e,r){var i,n="supported",o="unsupported";return!e||(i=t.exports.isHvc1Codec(e),t.exports.nativeSupportH265()&&i)||!(h||!c.IS_CHROME||parseInt(c.CHROME_VERSION)<104)&&window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')?r(!0):h?(i=t.exports.getHistoryDetectResult(e))===n?r(!0):i===o?r(!1):void p({codecTags:[e],timeout:2e3}).then((function(i){if(i=i.isHev1Supported||i.isHvc1Supported,t.exports.setHistoryDetectResult(e,i?n:o),i)return r(!0);r(!1)})).catch((function(e){console.log("hevcDetector ERROR",e),r(!1)})):r(!1)}},{"../config":14,"../lang/index":22,"../player/base/plugin/defaultemptycomponent":91,"./constants":27,"./cookie":28,"./dom":31,"./hardware-decoding-detector":35,"./object":41,"./ua":48}],45:[function(e,t,r){var i=e("./object"),n=e("../config"),o=e("./dom"),a=e("./cookie"),s=e("./constants"),l=e("../lang/index"),c=e("./ua"),u=e("../player/base/plugin/defaultemptycomponent"),p=e("./hardware-decoding-detector"),d={preload:!0,autoplay:!0,useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"",trackLog:!0,logBatched:!0,heartHeatInterval:30,isLive:!1,playsinline:!0,showBarTime:5e3,rePlay:!1,liveRetry:5,liveRetryInterval:1,liveRetryStep:0,keyShortCuts:!1,keyFastForwardStep:10,isVBR:!1,vodRetry:3,format:"",definition:"",defaultDefinition:"",loadDataTimeout:20,waitingTimeout:60,waitingBufferedTime:3,delayLoadingShow:1,controlBarForOver:!1,controlBarVisibility:"hover",enableSystemMenu:!1,qualitySort:"asc",x5_video_position:"normal",x5_type:"",x5_fullscreen:!1,x5_orientation:"landscape|portrait",x5LandscapeAsFullScreen:!0,autoPlayDelay:0,autoPlayDelayDisplayText:"",useHlsPluginForSafari:!1,enableMSEForAndroid:!0,encryptType:0,language:"zh-cn",languageTexts:{},mediaType:"video",outputType:"",playConfig:{},reAuthInfo:{},components:[],liveTimeShiftUrl:"",liveShiftSource:"",liveShiftTime:"",liveShiftMinOffset:30,videoHeight:"100%",videoWidth:"100%",enableWorker:!0,authTimeout:"",enableMockFullscreen:!1,region:"cn-shanghai",debug:!1,progressMarkers:[],snapshotWatermark:{left:"500",top:"100",text:"",font:"16px 宋体",fillColor:"#FFFFFF",strokeColor:"#FFFFFF"},liveStartTime:"",liveOverTime:"",enableStashBufferForFlv:!0,stashInitialSizeForFlv:32,flvOption:{accurateSeek:!0},hlsOption:{stopLoadAsPaused:!1},hlsLoadingTimeOut:2e4,useHlsPlugOnMobile:!0,lowLatencyMode:!1,useHls2:void 0,skipRtsSupportCheck:!1,rtsLoadDataTimeout:3e3,rtsFallbackSource:void 0,rtsVersion:"",rtsSdkUrl:"",nudgeMaxRetry:5,tracks:[],recreatePlayer:function(){},diagnosisButtonVisible:!0,enableH265:!1,forceH265:!1,h265Threads:!0,h265Simd:!0,preventRecord:!1,traceId:"",mediaAuth:void 0,textTracks:void 0,_native:!0,hlsUriToken:"",thumbnailUrl:"",refreshAccessInfo:function(){},drmSessionTimeout:5e3,skinRes:"//"+n.domain+"/de/prismplayer-flash/"+n.flashVersion+"/atlas/defaultSkin",splayerUrl:null,splayerWasmDomain:null},h=(t.exports.defaultH5Layout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"tooltip",align:"blabs",x:0,y:50},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]}],t.exports.defaultAudioLayout=[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"volume",align:"tr",x:5,y:10}]}],t.exports.defaultFlashLayout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}],t.exports.canPlayType=function(e){var t=document.createElement("video");return t.canPlayType?t.canPlayType(e):""},t.exports.canPlayHls=function(){return""!=t.exports.canPlayType("application/x-mpegURL")},t.exports.isUsedHlsPluginOnMobile=function(e){return!!(c.IS_MOBILE&&(c.IS_CHROME||c.IS_FIREFOX||c.IS_X5||c.IS_EDGE_NEW)&&t.exports.isSupportHls())},t.exports.isSafariUsedHlsPlugin=function(e){return!!(c.os.pc&&c.browser.safari&&e)},t.exports.hasUIComponent=function(e,r){if(void 0!==e&&e&&0!=e.length)for(var i=0,n=e.length;i<n;i++){var o=e[i].name;if(o==r)return!0;if("controlBar"==o)return t.exports.hasUIComponent(e[i].children,r)}return!1},t.exports.validateSource=function(e){return!0},t.exports.supportH5Video=function(){return void 0!==document.createElement("video").canPlayType},t.exports.createWrapper=function(e){var r;if((r="string"==typeof(r=e.id)?(0===r.indexOf("#")&&(r=r.slice(1)),o.el(r)):r)&&r.nodeName)return t.exports.adjustContainerLayout(r,e),r;throw new TypeError("没有为播放器指定容器")},t.exports.adjustContainerLayout=function(e,t){t.width&&!e.style.width&&(e.style.width=t.width),t.height&&!e.style.height&&(e.style.height=t.height)},t.exports.isSupportHls=function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer;return e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove,e&&t},t.exports.isSupportFlv=function(){return t.exports.isSupportHls()},t.exports.isSupportMSE=function(){return!!window.Promise&&!!window.Uint8Array&&!!Array.prototype.forEach&&t.exports.isSupportedMediaSource()},t.exports.isSupportedMediaSource=function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported},t.exports.isSupportedDrm=function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)&&t.exports.isSupportMSE()},t.exports.isAudio=function(e){return e&&0<e.toLowerCase().indexOf(".mp3")},t.exports.isLiveShift=function(e){return e.isLive&&e.liveStartTime&&e.liveOverTime},t.exports.isHls=function(e){return e&&0<e.toLowerCase().indexOf(".m3u8")},t.exports.isDash=function(e){return e&&0<e.toLowerCase().indexOf(".mpd")},t.exports.isFlv=function(e){return e&&0<e.toLowerCase().indexOf(".flv")},t.exports.isRTMP=function(e){return e&&-1<e.toLowerCase().indexOf("rtmp:")},t.exports.isRts=function(e){return e&&-1<e.toLowerCase().indexOf("artc:")},t.exports.isMp4=function(e){return e&&-1<e.toLowerCase().indexOf(".mp4")},t.exports.checkSecuritSupport=function(){return t.exports.isSupportHls()?"":c.IS_IOS?l.get("iOSNotSupportVodEncription"):l.get("UseChromeForVodEncription")},t.exports.nativeSupportH265=function(){return c.IS_IOS||c.IS_MAC_SAFARI},t.exports.findSelectedStreamLevel=function(e,t){var r=t;if(r||(r=a.get(s.SelectedStreamLevel))){for(var i=0;i<e.length;i++)if(e[i].definition==r)return i}else a.set(s.SelectedStreamLevel,e[0].definition,365);return 0},t.exports.getHistoryDetectResult=function(e){if(e)return"hvc1"===e?a.get(s.HWDetectHvc1):"hev1"===e?a.get(s.HWDetectHev1):void 0},t.exports.setHistoryDetectResult=function(e,t){var r="unknownCodec";"hvc1"===e?r=s.HWDetectHvc1:"hev1"===e&&(r=s.HWDetectHev1),a.set(r,t)},t.exports.handleOption=function(e,r){t.exports.isRts(e.source)&&(e.isLive=!0);var n,o=i.merge(i.copy(d),e),a=[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}],s=!1;if(e.useFlashPrism||t.exports.isRTMP(e.source)?(s=!0,a=[{name:"liveIco",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"volume",align:"tr",x:10,y:25}]):(n=t.exports.isLiveShift(o))?(a.push({name:"liveShiftProgress",align:"tlabs",x:0,y:0}),a.push({name:"playButton",align:"tl",x:15,y:12}),a.push({name:"liveDisplay",align:"tl",x:15,y:6})):a.push({name:"liveDisplay",align:"tlabs",x:15,y:6}),e.isLive)if(void 0===e.skinLayout)o.skinLayout=[{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"tooltip",align:"blabs",x:0,y:56},{name:"H5Loading",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:t.exports.isRts(e.source)?[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"volume",align:"tr",x:5,y:10},{name:"liveDisplay",align:"tlabs",x:15,y:6}]:a}];else if(0!=e.skinLayout){for(var l=e.skinLayout.length,c=[],p=-1,h=0;h<l;h++)if("controlBar"==o.skinLayout[h].name){p=h;for(var f=o.skinLayout[h].children.length,y=0;y<f;y++){var _,g=o.skinLayout[h].children[y].name;"liveDisplay"!=g&&"liveIco"!=g&&"fullScreenButton"!=g&&"volume"!=g&&"snapshot"!=g&&"setting"!=g&&"subtitle"!=g&&(!n||"progress"!=g&&"playButton"!=g&&"timeDisplay"!=g)||(_=o.skinLayout[h].children[y],"progress"==g?_.name="liveShiftProgress":"timeDisplay"==g?_.name="liveShiftTimeDisplay":s&&"liveDisplay"==g&&(_.name="liveIco"),c.push(_))}break}-1!=p&&(o.skinLayout[p].children=c)}return(void 0===e.components||!e.components||i.isArray(e.components)&&0==e.components.length)&&"false"!=e.components&&(o.components=[u]),o},t.exports.getLiveHostByRegion=function(e){return e&&-1<["ap-southeast-1","eu-central-1"].indexOf(e)?"live."+e+".aliyuncs.com":"live.aliyuncs.com"},t.exports.isVideoTag=function(e){return e&&"string"==typeof e.nodeName&&"video"===e.nodeName.toLowerCase()},t.exports.unqiueTextTracks=function(e){var t=[],r=(t=(e=void 0===e?[]:e).reduce((function(e,t){var r;return e.some((function(e){return e.srclang===t.srclang}))?e:((r=t).label=t.label||t.srclang,[].concat(e,[r]))}),[]),{});return t.forEach((function(e,t){r[e.label]?r[e.label].push(t):r[e.label]=[t]})),Object.keys(r).forEach((function(e){1<(e=r[e]||[]).length&&e.forEach((function(e){t[e].label=t[e].label+"("+t[e].srclang+")"}))})),t},t.exports.hizksj=function(){return Date.now()<1672531199e3},t.exports.isHvc1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("hvc1")},t.exports.isHev1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("hev1")},t.exports.isH265Codec=function(e){return t.exports.isHvc1Codec(e=void 0===e?"":e)||t.exports.isHev1Codec(e)},t.exports.getVideoTrack=function(e){var t;return(e=void 0===e?[]:e).forEach((function(e){1===Number(e.type)&&(t=e)})),t},c.IS_ANDROID&&(c.dingTalk()||c.IS_UC||c.is_X5||c.IS_HUAWEI||c.IS_XIAOMI||c.IS_OPPO||c.IS_VIVO||c.IS_MEIZU||c.IS_SAMSUNG||c.IS_WEBVIEW)||c.os&&"windows"===c.os.name&&c.IS_UC);t.exports.shouldUseBasePlayer=function(e,r){var i,n="supported",o="unsupported";return!e||(i=t.exports.isHvc1Codec(e),t.exports.nativeSupportH265()&&i)||!(h||!c.IS_CHROME||parseInt(c.CHROME_VERSION)<104)&&window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')?r(!0):h?(i=t.exports.getHistoryDetectResult(e))===n?r(!0):i===o?r(!1):void p({codecTags:[e],timeout:2e3}).then((function(i){if(i=i.isHev1Supported||i.isHvc1Supported,t.exports.setHistoryDetectResult(e,i?n:o),i)return r(!0);r(!1)})).catch((function(e){console.log("hevcDetector ERROR",e),r(!1)})):r(!1)}},{"../config":14,"../lang/index":22,"../player/base/plugin/defaultemptycomponent":91,"./constants":27,"./cookie":28,"./dom":31,"./hardware-decoding-detector":35,"./object":41,"./ua":48}],46:[function(e,t,r){var i=e("./object"),n=e("../player/adaptiveplayer"),o=e("./constants").USER_EVENT_NAME;t.exports.reloadInstance=function(e,r,i){i.dispose();var a=e.readyCallback,s=e._readyCallbackCalled;e=n.create(e,(function(e){r(e),s||a(e)})),t.exports.restoreUserEvents(e),t.exports.removeAllProps(i),(i.__proto__=e)[o]=i[o]},t.exports.storeUserEvents=function(e){var t=e,r=t.__proto__.on,i={};t.on=function(e,n){"function"==typeof n&&(i[e]?i[e].push(n):i[e]=[n],this._el)&&(n.binded=!0,r.call(t,e,n))},t[o]=i},t.exports.restoreUserEvents=function(e){var t=player[o];t&&i.each(t,(function(r){t[r].forEach((function(t){e.on(r,t)}))}))},t.exports.removeAllProps=function(e,t){for(var r in t=[].concat(t=t||[],[o]),e)e.hasOwnProperty(r)&&-1===t.indexOf(r)&&delete e[r]}},{"../player/adaptiveplayer":66,"./constants":27,"./object":41}],47:[function(e,t,r){t.exports.set=function(e,t){try{window.localStorage&&localStorage.setItem(e,t)}catch(r){window[e+"_localStorage"]=t}},t.exports.get=function(e){try{if(window.localStorage)return localStorage.getItem(e)}catch(t){return window[e+"_localStorage"]}return""}},{}],48:[function(e,t,r){var i,n,o,a;if(t.exports.USER_AGENT=navigator.userAgent,t.exports.IS_IPHONE=/iPhone/i.test(t.exports.USER_AGENT),t.exports.IS_IPAD=/iPad/i.test(t.exports.USER_AGENT),t.exports.IS_IPOD=/iPod/i.test(t.exports.USER_AGENT),t.exports.IS_MAC=/mac/i.test(t.exports.USER_AGENT),t.exports.IS_EDGE=/Edge/i.test(t.exports.USER_AGENT),t.exports.IS_EDGE_NEW=/Edg/i.test(t.exports.USER_AGENT)&&!t.exports.IS_EDGE,t.exports.IS_IE11=/Trident\/7.0/i.test(t.exports.USER_AGENT),t.exports.IS_X5=/qqbrowser/i.test(t.exports.USER_AGENT.toLowerCase()),t.exports.IS_CHROME=/Chrome/i.test(t.exports.USER_AGENT)&&!t.exports.IS_EDGE&&!t.exports.IS_EDGE_NEW&&!t.exports.IS_X5,t.exports.IS_SAFARI=/Safari/i.test(t.exports.USER_AGENT)&&!t.exports.IS_CHROME&&!t.exports.IS_EDGE_NEW,t.exports.IS_FIREFOX=/Firefox/i.test(t.exports.USER_AGENT),t.exports.IS_UC=/ucweb|UCBrowser|UBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_HUAWEI=/HuaweiBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_XIAOMI=/MiuiBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_OPPO=/HeyTapBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_VIVO=/VivoBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_MEIZU=/MZBrowser/i.test(t.exports.USER_AGENT),t.exports.IS_SAMSUNG=/samsungbrowser/i.test(t.exports.USER_AGENT),document.all)try{var s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");t.exports.HAS_FLASH=!!s}catch(e){t.exports.HAS_FLASH=!1}else navigator.plugins&&0<navigator.plugins.length?(s=navigator.plugins["Shockwave Flash"],t.exports.HAS_FLASH=!!s):t.exports.HAS_FLASH=!1;t.exports.IS_MAC_SAFARI=t.exports.IS_MAC&&t.exports.IS_SAFARI&&!t.exports.IS_CHROME&&!t.exports.HAS_FLASH,t.exports.IS_IOS=t.exports.IS_IPHONE||t.exports.IS_IPAD||t.exports.IS_IPOD,t.exports.IOS_VERSION=function(){var e=t.exports.USER_AGENT.match(/OS (\d+)_/i);if(e&&e[1])return e[1]}(),t.exports.IS_ANDROID=/Android/i.test(t.exports.USER_AGENT),t.exports.ANDROID_VERSION=(s=t.exports.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i))?(n=s[1]&&parseFloat(s[1]),i=s[2]&&parseFloat(s[2]),n&&i?parseFloat(s[1]+"."+s[2]):n||null):null,t.exports.IS_OLD_ANDROID=t.exports.IS_ANDROID&&/webkit/i.test(t.exports.USER_AGENT)&&t.exports.ANDROID_VERSION<2.3,t.exports.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),t.exports.IS_MOBILE=t.exports.IS_IOS||t.exports.IS_ANDROID,t.exports.IS_H5=t.exports.IS_MOBILE||!t.exports.HAS_FLASH,t.exports.IS_PC=!t.exports.IS_MOBILE,t.exports.is_X5=/micromessenger/i.test(t.exports.USER_AGENT)||/qqbrowser/i.test(t.exports.USER_AGENT),t.exports.IS_ANDROID_FIREFOX=t.exports.IS_ANDROID&&t.exports.IS_FIREFOX,t.exports.CHROME_VERSION=t.exports.IS_CHROME&&t.exports.USER_AGENT.match(/Chrome\/(\d+)/i)[1],t.exports.getHost=function(e){var t,r,i="";return void 0===e||null==e||""==e?"":(t=e.indexOf("//"),r=e,i=r=-1<t?e.substring(t+2):r,(e=(i=(e=r.split("/"))&&0<e.length?e[0]:i).split(":"))&&0<e.length?e[0]:i)},t.exports.dingTalk=function(){var e=t.exports.USER_AGENT.toLowerCase();return/dingtalk/i.test(e)},t.exports.IS_DINGTALK=t.exports.dingTalk(),t.exports.wechat=function(){var e=t.exports.USER_AGENT.toLowerCase();return/micromessenger/i.test(e)},t.exports.inIFrame=function(){return self!=top},t.exports.getReferer=function(){var e=document.referrer;if(t.exports.inIFrame())try{e=top.document.referrer}catch(t){e=document.referrer}return e},t.exports.getHref=function(){if(location.href,t.exports.inIFrame())try{top.location.href}catch(e){location.href}return location.href},t.exports.check360=function(){return-1!=navigator.userAgent.indexOf("Safari")?function(){var e=navigator.userAgent.split(" ");if(-1!=e[e.length-1].indexOf("Safari"))for(var t in navigator.plugins)if("np-mswmp.dll"==navigator.plugins[t].filename)return!0;return!1}():(null==navigator.msPointerEnabled||navigator.msPointerEnabled)&&(1==navigator.msDoNotTrack||1==window.doNotTrack)&&(!!Number(window.screenX)&&window.screenLeft-window.screenX!=8||(-1!=navigator.userAgent.indexOf("MSIE 7.0")||-1!=navigator.userAgent.indexOf("MSIE 8.0"))&&null==console.count)},i=t.exports,function(e,r){var i=this.os={},n=this.browser={},o=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),a=e.match(/(Android);?[\s\/]+([\d.]+)?/),s=!!e.match(/\(Macintosh\; Intel /),l=e.match(/(iPad).*OS\s([\d_]+)/),c=e.match(/(iPod)(.*OS\s([\d_]+))?/),u=!l&&e.match(/(iPhone\sOS)\s([\d_]+)/),p=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),d=(r=/Win\d{2}|Windows/.test(r),e.match(/Windows Phone ([\d.]+)/)),h=p&&e.match(/TouchPad/),f=e.match(/Kindle\/([\d.]+)/),y=e.match(/Silk\/([\d._]+)/),_=e.match(/(BlackBerry).*Version\/([\d.]+)/),g=e.match(/(BB10).*Version\/([\d.]+)/),v=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),m=e.match(/PlayBook/),S=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),b=e.match(/Firefox\/([\d.]+)/),T=e.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),E=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),w=!S&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),x=w||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(n.webkit=!!o)&&(n.version=o[1]),a&&(i.android=!0,i.version=a[2]),u&&!c&&(i.ios=i.iphone=!0,i.version=u[2].replace(/_/g,".")),l&&(i.ios=i.ipad=!0,i.version=l[2].replace(/_/g,".")),c&&(i.ios=i.ipod=!0,i.version=c[3]?c[3].replace(/_/g,"."):null),d&&(i.wp=!0,i.version=d[1]),p&&(i.webos=!0,i.version=p[2]),h&&(i.touchpad=!0),_&&(i.blackberry=!0,i.version=_[2]),g&&(i.bb10=!0,i.version=g[2]),v&&(i.rimtabletos=!0,i.version=v[2]),m&&(n.playbook=!0),f&&(i.kindle=!0,i.version=f[1]),y&&(n.silk=!0,n.version=y[1]),!y&&i.android&&e.match(/Kindle Fire/)&&(n.silk=!0),S&&(n.chrome=!0,n.version=S[1]),b&&(n.firefox=!0,n.version=b[1]),T&&(i.firefoxos=!0,i.version=T[1]),E&&(n.ie=!0,n.version=E[1]),x&&(s||i.ios||r||a)&&(n.safari=!0,i.ios||i.android||(n.version=x[1])),i.ios&&(n.version=i.version),w&&(n.webview=!0),s&&((o=e.match(/[\d]*_[\d]*_[\d]*/))&&0<o.length&&o[0]&&(i.version=o[0].replace(/_/g,".")),/MQBHD/.test(e))&&(n.version=((e.match(/.*OS\s([\d_]+)/)||[])[1]||"").replace(/_/g,".")),i.tablet=!!(l||m||a&&!e.match(/Mobile/)||b&&e.match(/Tablet/)||E&&!e.match(/Phone/)&&e.match(/Touch/)),i.phone=!(i.tablet||i.ipod||!(a||u||p||_||g||S&&e.match(/Android/)||S&&e.match(/CriOS\/([\d.]+)/)||b&&e.match(/Mobile/)||E&&e.match(/Touch/))),i.pc=!i.tablet&&!i.phone,s?i.name="macOS":r?(i.name="windows",i.version=function(){var e=navigator.userAgent,t="";return(-1<e.indexOf("Windows NT 5.0")||-1<e.indexOf("Windows 2000"))&&(t="2000"),(-1<e.indexOf("Windows NT 5.1")||-1<e.indexOf("Windows XP"))&&(t="XP"),(-1<e.indexOf("Windows NT 5.2")||-1<e.indexOf("Windows 2003"))&&(t="2003"),(-1<e.indexOf("Windows NT 6.0")||-1<e.indexOf("Windows Vista"))&&(t="Vista"),(-1<e.indexOf("Windows NT 6.1")||-1<e.indexOf("Windows 7"))&&(t="7"),(-1<e.indexOf("Windows NT 6.2")||-1<e.indexOf("Windows 8"))&&(t="8"),(-1<e.indexOf("Windows NT 6.3")||-1<e.indexOf("Windows 8.1"))&&(t="8.1"),(-1<e.indexOf("Windows NT 10")||-1<e.indexOf("Windows 10"))&&(t="10"),t}()):i.name=function(){var e=navigator.userAgent,r="other",i=t.exports.os;return i.ios?"iOS":i.android?"android":-1<e.indexOf("Baiduspider")?"Baiduspider":-1<e.indexOf("PlayStation")?"PS4":(i="Win32"==navigator.platform||"Windows"==navigator.platform||-1<e.indexOf("Windows"),(e="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform)&&(r="macOS"),"X11"!=navigator.platform||i||e||(r="Unix"),-1<String(navigator.platform).indexOf("Linux")&&(r="Linux"),i?"windows":r)}(),n.name=(c=navigator.userAgent.toLowerCase(),(d=t.exports.browser).firefox?"Firefox":d.ie?/edge/.test(c)?"Edge":"IE":t.exports.IS_EDGE_NEW?"EdgeChromium":/micromessenger/.test(c)?"微信内置浏览器":/qqbrowser/.test(c)?"QQ浏览器":t.exports.IS_UC?"UC":t.exports.IS_DINGTALK?"Dingtalk":t.exports.IS_HUAWEI?"HuaweiBrowser":t.exports.IS_XIAOMI?"MiBrowser":t.exports.IS_OPPO?"OppoBrowser":t.exports.IS_VIVO?"VivoBrowser":t.exports.IS_MEIZU?"MeizuBrowser":t.exports.IS_SAMSUNG?"SamsungBrowser":t.exports.IS_WEBVIEW||/MQBHD/.test(c)?"webview":d.chrome?"Chrome":d.safari?"Safari":/baiduspider/.test(c)?"Baiduspider":/opera/.test(c)?"Opera":/360se/.test(c)?"360浏览器":/bidubrowser/.test(c)?"百度浏览器":/metasr/.test(c)?"搜狗浏览器":/lbbrowser/.test(c)?"猎豹浏览器":/playstation/.test(c)?"PS4浏览器":void 0)}.call(i,navigator.userAgent,navigator.platform),t.exports.IS_WEBVIEW=(n=t.exports.USER_AGENT,o=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig"),a=new RegExp("("+["VivoBrowser","MZBrowser","MiuiBrowser"].join("|")+")","ig"),!!n.match(o)&&!n.match(a))},{}],49:[function(e,t,r){var i=e("./dom");t.exports.getAbsoluteURL=function(e){return e.match(/^https?:\/\//)?e:i.createEl("div",{innerHTML:'<a href="'+e+'">x</a>'}).firstChild.href},t.exports.parseUrl=function(e){var t,r=["protocol","hostname","port","pathname","search","hash","host"],n=i.createEl("a",{href:e}),o=""===n.host&&"file:"!==n.protocol;o&&((t=i.createEl("div")).innerHTML='<a href="'+e+'"></a>',n=t.firstChild,t.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(t));for(var a={},s=0;s<r.length;s++)a[r[s]]=n[r[s]];return a.segments=n.pathname.replace(/^\//,"").split("/"),o&&document.body.removeChild(t),a}},{"./dom":31}],50:[function(e,t,r){var i=e("./dom"),n=e("./ua"),o=e("./playerutil");t.exports.formatTime=function(e){e=Math.floor(e);var t,r=Math.floor(e/3600);return e%=3600,t=Math.floor(e/60),e%=60,!(r===1/0||isNaN(r)||t===1/0||isNaN(t)||e==1/0||isNaN(e))&&("00"===(r=10<=r?r:"0"+r)?"":r+":")+(10<=t?t:"0"+t)+":"+(10<=e?e:"0"+e)},t.exports.extractTime=function(e){var t;return e?("00"===(t=10<=(t=parseInt(e.getHours()))?t:"0"+t)?"":t+":")+(t=10<=(t=parseInt(e.getMinutes()))?t:"0"+t)+":"+(t=10<=(t=parseInt(e.getSeconds()))?t:"0"+t):""},t.exports.convertToTimestamp=function(e,t){var r="";return e&&(t?r=e.gettime():(r=Date.parse(e),r/=1e3)),r},t.exports.convertToDate=function(e,t){var r="";return e&&(r=new Date).setTime(1e3*e),r},t.exports.parseTime=function(e){var t,r,i;return e?(i=r=t=0,3===(e=e.split(":")).length?(t=e[0],r=e[1],i=e[2]):2===e.length?(r=e[0],i=e[1]):1===e.length&&(i=e[0]),3600*(t=parseInt(t,10))+60*(r=parseInt(r,10))+(i=Math.ceil(parseFloat(i)))):"00:00:00"},t.exports.formatDate=function(e,t){var r,i={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return t},t.exports.sleep=function(e){for(var t=Date.now();Date.now()-t<=e;);},t.exports.htmlEncodeAll=function(e){return null==e?"":e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t.exports.toBinary=function(e){if(!window.atob)return"";for(var t=atob(e),r=t.length,i=new Uint8Array(r),n=0;n<r;n++)i[n]=t.charCodeAt(n);return i},t.exports.readyBinary=function(e){for(var t=new Uint8Array(e),r=t.length,i="",n=0;n<r;n++)i+=t[n];return i},t.exports.delayHide=function(e,t){e&&(void 0===t&&(t=1e3),e.delayHanlder&&clearTimeout(e.delayHanlder),e.delayHanlder=setTimeout((function(){i.css(e,"display","none")}),t))},t.exports.openInFile=function(){return-1!=window.location.protocol.toLowerCase().indexOf("file")},t.exports.contentProtocolMixed=function(e,t){return!!((n.os.pc&&(o.isHls(e)&&!n.browser.safari||o.isFlv(e))||t)&&"https:"==window.location.protocol.toLowerCase()&&e&&-1<e.toLowerCase().indexOf("http://"))},t.exports.queryString=function(e){var t,r,i;return 2===(e=(e=decodeURIComponent(e)).split("?")).length&&(e=e[1],t=e.split("&"))?(r={},i=0,$(t).each((function(){var e=t[i].split("=");2===e.length&&(r[e[0]]=e[1].replace(/\+/g," ")),i++})),r):{}},t.exports.log=function(e){var r=window.location.href;(r=t.exports.queryString(r))&&1==r.debug&&console.log(e)}},{"./dom":31,"./playerutil":45,"./ua":48}],51:[function(e,t,r){var i,n="undefined"==typeof Promise?e("es6-promise").Promise:Promise;e=this,i=function(){return t={926:function(e){var t=Object.prototype.hasOwnProperty;function r(e){return"[Throws: "+(e?e.message:"?")+"]"}function i(e){var i=[];return function e(n){if(null===n||"object"!=typeof n)return n;if(-1!==i.indexOf(n))return"[Circular]";if(i.push(n),"function"==typeof n.toJSON)try{var o=e(n.toJSON());return i.pop(),o}catch(e){return r(e)}return o=Array.isArray(n)?n.map(e):Object.keys(n).reduce((function(r,i){return r[i]=e(function(e,r){return t.call(e,r),e[r]}(n,i)),r}),{}),i.pop(),o}(e)}e.exports=function(e,t,r){return JSON.stringify(i(e),t,r)},e.exports.ensureProperties=i}},r={},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,{a:r}),r},e.d=function(t,r){for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i={},function(){"use strict";e.r(i),e.d(i,{AACParser:function(){return t},AvcSPS:function(){return A},BasicLoader:function(){return Mi},BitBuffer:function(){return h},Box:function(){return q},ByteBuffer:function(){return o},CTrackTypeMap:function(){return li},Demuxer:function(){return en},DiscardType:function(){return w},EFormatType:function(){return Er},EH264NALType:function(){return g},EH265NALType:function(){return S},EHandlerType:function(){return Tr},ELoaderStatus:function(){return Ri},ESampleFlag:function(){return si},ETrackType:function(){return wr},ErrorCode:function(){return x},ExpGolomb:function(){return k},FullBox:function(){return W},H264NAL:function(){return T},H265NAL:function(){return C},HevcSPS:function(){return O},Loader:function(){return Fi},MP4Parser:function(){return Bi}});var t={},r=(e.r(t),e.d(t,{AAC_DURATION:function(){return s},AAC_SAMPLING_FREQUENCIES:function(){return a},addADTSHeader:function(){return l},getADTSHeaderLength:function(){return u},getADTSLength:function(){return p},isADTS:function(){return c},readAACSamples:function(){return d}}),{}),o=(e.r(r),e.d(r,{Box:function(){return q},avc1:function(){return K},avcC:function(){return X},btrt:function(){return $},co64:function(){return kr},ctts:function(){return Pr},dinf:function(){return G},dref:function(){return Y},edts:function(){return G},elst:function(){return fe},esds:function(){return Re},ftyp:function(){return De},hdlr:function(){return Ne},hev1:function(){return z},hvc1:function(){return z},hvcC:function(){return Oe},mdat:function(){return Me},mdhd:function(){return He},mdia:function(){return G},mfhd:function(){return ze},mfra:function(){return G},minf:function(){return G},moof:function(){return Ke},moov:function(){return G},mp4a:function(){return Ue},mvex:function(){return $e},mvhd:function(){return Fe},pasp:function(){return Ve},sdtp:function(){return Ye},sidx:function(){return Qe},stbl:function(){return G},stco:function(){return Cr},stsc:function(){return Ir},stsd:function(){return Lr},stss:function(){return Ar},stsz:function(){return Rr},stts:function(){return Qr},tfdt:function(){return jt},tfhd:function(){return fr},tkhd:function(){return qe},traf:function(){return Xe},trak:function(){return G},trex:function(){return mr},trun:function(){return xr},url:function(){return We},vmhd:function(){return Ge}}),y.concatUint8s=function(e){return this.concatUint8.apply(this,e)},y.concatUint8=function(){for(var e,t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return r.length<=1?r[0]||new Uint8Array(0):(e=new Uint8Array(r.reduce((function(e,t){return e+t.byteLength}),0)),t=0,r.forEach((function(r){e.set(r,t),t+=r.byteLength})),e)},y.concat=function(e,t){return y.concatUint8(new Uint8Array(e),new Uint8Array(t)).buffer},Object.defineProperty(y.prototype,"buffer",{get:function(){return this.dv.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"unreadLength",{get:function(){return Math.max(this.end-this.offset,0)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),y.prototype.readFloat=function(e){var t=0;switch(e){case 4:t=this.dv.getFloat32(this.offset);break;case 8:t=this.dv.getFloat64(this.offset);break;default:throw new Error("not supported for read float byte with "+e)}return this.offset+=e,t},y.prototype.back=function(e){this.offset-=e},y.prototype.skip=function(e){this.offset+=e},y.prototype.readInt=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getInt8(t);case 2:return this.dv.getInt16(t);case 4:return this.dv.getInt32(t);default:throw new Error("not supported for read byte with "+e)}},y.prototype.read=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getUint8(t);case 2:return this.dv.getUint16(t);case 3:return(this.dv.getUint16(t)<<8)+this.dv.getUint8(t+2);case 4:return this.dv.getUint32(t);default:return this.back(e-4),this.read(e-4)+this.dv.getUint32(t)*Math.pow(256,e-4)}},y.prototype.writeInt=function(e,t){var r=this.offset;switch(this.offset+=e,e){case 1:return this.dv.setInt8(r,t);case 2:return this.dv.setInt16(r,t);case 3:return this.dv.setInt8(r,t>>16),this.dv.setInt16(r+1,65535&t);case 4:return this.dv.setInt32(r,t);default:throw new Error("不支持Byte write "+e)}},y.prototype.write=function(e,t){var r=this.offset;switch(this.offset+=e,e){case 1:return this.dv.setUint8(r,t);case 2:return this.dv.setUint16(r,t);case 3:return this.dv.setUint8(r,t>>>16),this.dv.setUint16(r+1,65535&t);case 4:return this.dv.setUint32(r,t);default:throw new Error("不支持Byte write "+e)}},y.prototype.readToUint8=function(e){return e=new Uint8Array(this.dv.buffer,this.offset,e||this.unreadLength),this.offset+=e.byteLength,e},y.prototype.readToBuffer=function(e){return e=this.offset||e?this.dv.buffer.slice(this.offset,e?this.offset+e:void 0):this.dv.buffer,this.offset+=e.byteLength,e},y),a=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=1024,l=function(e,t){var r=t.audioObjectType,i=t.sampleRate,n=t.channelCount,s=(t=void 0===(t=t.numberOfRawDataBlocksInFrame)?0:t,e.byteLength+7),l=(i=a.indexOf(i),new Uint8Array(7));return l[0]=255,l[1]=241,l[2]=r-1<<6,l[2]|=i<<2,l[2]|=(4&n)>>2,l[3]=(3&n)<<6,l[3]|=(6144&s)>>11,l[4]=(2047&s)>>3,l[5]=(7&s)<<5,l[5]|=31,l[6]=252,l[6]|=3&t,o.concatUint8(l,e)},c=function(e,t){return t<e.byteLength-1&&255===e[t]&&240==(246&e[t+1])},u=function(e,t){return 1&e[t+1]?7:9},p=function(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5},d=function(e){for(var t,r,i=[],n=0,o=e.byteLength;n+5<o;)c(e,n)?(t=u(e,n),r=p(e,n),i.push({audioObjectType:1+(e[2]>>>6),sampleRate:a[e[2]>>>2&15],channelCount:(1&e[2])<<2|e[3]>>>6,numberOfRawDataBlocksInFrame:0,data:e.subarray(n+t,n+r)}),n+=r):n++;return i},h=(f.fromByte=function(e,t){return new f(e.read(t),t<<3)},f.prototype.skip=function(e){this.offset+=e},f.prototype.read=function(e){var t=this.len-this.offset-e;if(0<=t){for(var r=0,i=0;i<e;i++)r+=1<<i;return this.offset+=e,this.num>>>t&r}return console.warn("bit 读取位数超过限制"),0},f);function f(e,t){this.num=e,this.len=t,this.offset=0}function y(e,t,r){this.dv=new DataView(e),this.start=this.offset=t||this.dv.byteOffset,this.end=r?this.start+r:this.dv.byteLength}m.createAnnexbStartCode=function(){return new Uint8Array([0,0,0,1])},m.createAVCCStartCode=function(e){return new Uint8Array([e>>24&255,e>>16&255,e>>8&255,255&e])},m.extractAVCCNAL=function(e,t){for(var r,i=[],n=new o(e.buffer,e.byteOffset,e.byteLength);n.unreadLength>t;){if((r=n.read(t+1))<=0||r>n.unreadLength){console.warn("extract avc nalu size wrong! lengthSizeMinusOne:",t,"size:",r);break}var a=n.offset-n.start;i.push(e.subarray(a,a+r)),n.skip(r)}return i},m.extractAnnexbNAL=function(e){for(var t=e.byteLength,r=[],i=0;i<t-3;)0===e[i]?0===e[i+1]?0===e[i+2]?0===e[i+3]?i++:(1===e[i+3]&&i+4<t&&r.push({prefixStart:i,start:i+4}),i+=4):(1===e[i+2]&&r.push({prefixStart:i,start:i+3}),i+=3):i+=2:i++;return r.length?r.map((function(t,i){return(i=r[i+1])?e.subarray(t.start,i.prefixStart):e.subarray(t.start)})):[]};var _,g,v=m;function m(){}_=function(e,t){return(_=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},(E=g=g||{})[E.UNUSED=0]="UNUSED",E[E.NON_IDR_SLICE=1]="NON_IDR_SLICE",E[E.SLICE_DP_A=2]="SLICE_DP_A",E[E.SLICE_DP_B=3]="SLICE_DP_B",E[E.SLICE_DP_C=4]="SLICE_DP_C",E[E.SLICE_IDR=5]="SLICE_IDR",E[E.SEI=6]="SEI",E[E.SPS=7]="SPS",E[E.PPS=8]="PPS",E[E.DIVIDER=9]="DIVIDER",E[E.SEQUENCE_END=10]="SEQUENCE_END",E[E.STREAM_END=11]="STREAM_END",E[E.FILL=12]="FILL";var S,b,T=function(e){function t(t){var r=e.call(this)||this;return t=new h(t.read(1),8),r.forbiddenZeroBit=t.read(1),r.nalRefIdc=t.read(2),r.nalType=t.read(5),r}var r=t,i=e;if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=r}return _(r,i),r.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n),t.extractNALType=function(e){return 31&e[0]},t.isSlice=function(e){return(e=this.extractNALType(e))>=g.NON_IDR_SLICE&&e<=g.SLICE_IDR},t}(v),E=(b=function(e,t){return(b=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});(B=S=S||{})[B.SLICE_TRAIL_N=0]="SLICE_TRAIL_N",B[B.SLICE_TRAIL_R=1]="SLICE_TRAIL_R",B[B.SLICE_TSA_N=2]="SLICE_TSA_N",B[B.SLICE_TSA_R=3]="SLICE_TSA_R",B[B.SLICE_STSA_N=4]="SLICE_STSA_N",B[B.SLICE_STSA_R=5]="SLICE_STSA_R",B[B.SLICE_RADL_N=6]="SLICE_RADL_N",B[B.SLICE_RADL_R=7]="SLICE_RADL_R",B[B.SLICE_RASL_N=8]="SLICE_RASL_N",B[B.SLICE_RASL_R=9]="SLICE_RASL_R",B[B.VCL_N10=10]="VCL_N10",B[B.VCL_R11=11]="VCL_R11",B[B.VCL_N12=12]="VCL_N12",B[B.VCL_R13=13]="VCL_R13",B[B.VCL_N14=14]="VCL_N14",B[B.VCL_R15=15]="VCL_R15",B[B.SLICE_BLA_W_LP=16]="SLICE_BLA_W_LP",B[B.SLICE_BLA_W_RADL=17]="SLICE_BLA_W_RADL",B[B.SLICE_BLA_N_LP=18]="SLICE_BLA_N_LP",B[B.SLICE_IDR_W_RADL=19]="SLICE_IDR_W_RADL",B[B.SLICE_IDR_N_LP=20]="SLICE_IDR_N_LP",B[B.SLICE_CRA=21]="SLICE_CRA",B[B.VPS=32]="VPS",B[B.SPS=33]="SPS",B[B.PPS=34]="PPS",B[B.ACCESS_UNIT_DELIMITER=35]="ACCESS_UNIT_DELIMITER",B[B.EOS=36]="EOS",B[B.EOB=37]="EOB",B[B.FILLER_DATA=38]="FILLER_DATA",B[B.SEI=39]="SEI",B[B.SEI_SUFFIX=40]="SEI_SUFFIX",B[B.INVALID=64]="INVALID",E(U,P=v),U.extractNALType=function(e,t){return(126&e[t=void 0===t?0:t])>>1},U.isNonRefNALType=function(e){switch(e){case S.SLICE_TRAIL_N:case S.SLICE_TSA_N:case S.SLICE_STSA_N:case S.SLICE_RADL_N:case S.SLICE_RASL_N:case S.VCL_N10:case S.VCL_N12:case S.VCL_N14:return!0;default:return!1}},U.isNonRef=function(e){return this.isNonRefNALType(this.extractNALType(e))},U.isSlice=function(e){return(e=this.extractNALType(e))>=S.SLICE_TRAIL_N&&e<=S.SLICE_CRA};var w,x,P,C=U,k=(H.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4);if(0===(t=Math.min(4,t)))throw new Error("no bytes available");i.set(e.subarray(r,r+t)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*t,this.bytesAvailable-=t},H.prototype.skipBits=function(e){var t;this.bitsAvailable>e||(e=(e-=this.bitsAvailable)-((t=e>>3)<<3),this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},H.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return 32<e&&console.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?r<<t|this.readBits(t):r},H.prototype.skipLZ=function(){for(var e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},H.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},H.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},H.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},H.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},H.prototype.readUByte=function(){return this.readBits(8)},H.prototype.readUShort=function(){return this.readBits(16)},H.prototype.readUInt=function(){return this.readBits(32)},H.prototype.skipScalingList=function(e){for(var t=8,r=8,i=0;i<e;i++)t=0===(r=0!==r?(t+this.readEG()+256)%256:r)?t:r},H),I=[100,110,122,244,44,83,86,118,128,138,144],L=[[0,1],[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]],A=(M.generateCodec=function(e){return"avc1."+[e.generalProfileIdc,e.generalProfileCompatibility,e.generalLevelIdc].map((function(e){return(e=e.toString(16)).length<2?"0"+e:e})).join("")},M),R=[1,2,2,1],D=[1,2,1,1],O=(N.generateCodec=function(e){var t=["hvc1"],r=e.generalProfileSpace;return 0<r&&r<4&&t.push(String.fromCharCode(64+r)),t.push(e.generalProfileIdc.toString()),t.push(e.generalProfileCompatibilityFlags.reverse().reduce((function(e,t){return e<<1|t}),0).toString(16)),t.push((e.generalTierFlag?"H":"L")+e.generalLevelIdc),e.generalConstraintIndicatorFlags.forEach((function(e){e&&t.push(e.toString(16))})),t.join(".")},N);function N(e){var t=this;this.generalProfileSpace=0,this.generalTierFlag=0,this.generalProfileIdc=0,this.generalProfileCompatibilityFlags=[],this.generalConstraintIndicatorFlags=[],this.subLayerProfilePresentFlags=[],this.subLayerLevelPresentFlags=[],this.separateColourPlaneFlag=0,this.pixelRatio=[],this.codec="",this.checkProfileIdc=function(e){return t.generalProfileIdc===e||t.generalProfileCompatibilityFlags[e]};var r,i,n,o,a=new k(e);for(this.vpsId=a.readBits(4),this.maxSubLayersMinus1=a.readBits(3),this.temporalIdNestingFlag=a.readBits(1),this.generalProfileSpace=a.readBits(2),this.generalTierFlag=a.readBits(1),this.generalProfileIdc=a.readBits(5),r=0;r<32;r++)this.generalProfileCompatibilityFlags[r]=a.readBits(1),0===this.generalProfileIdc&&0<r&&this.generalProfileCompatibilityFlags[r]&&(this.generalProfileIdc=r);for(r=0;r<6;r++)this.generalConstraintIndicatorFlags.push(a.readUByte());for(this.generalLevelIdc=a.readUByte(),r=0;r<this.maxSubLayersMinus1;r++)this.subLayerProfilePresentFlags[r]=a.readBits(1),this.subLayerLevelPresentFlags[r]=a.readBits(1);for(0<this.maxSubLayersMinus1&&a.skipBits(2*(8-this.maxSubLayersMinus1)),r=0;r<this.maxSubLayersMinus1;r++)this.subLayerProfilePresentFlags[r]&&a.skipBits(48),this.subLayerLevelPresentFlags[r]&&a.readUByte();this.spsId=a.readUEG(),this.codec=N.generateCodec(this),this.chromaFormatIdc=a.readUEG(),3===this.chromaFormatIdc&&(this.separateColourPlaneFlag=a.readBits(1)),this.separateColourPlaneFlag&&(this.chromaFormatIdc=0),this.width=a.readUEG(),this.height=a.readUEG(),a.readBits(1)&&(e=R[this.chromaFormatIdc],o=D[this.chromaFormatIdc],i=a.readUEG()*e,e=a.readUEG()*e,n=a.readUEG()*o,o=a.readUEG()*o,this.width-=i+e,this.height-=n+o)}function M(e){this.generalProfileSpace=0,this.generalTierFlag=0,this.generalProfileIdc=0,this.generalProfileCompatibility=0,this.crop=0,this.cropLeft=0,this.cropRight=0,this.cropTop=0,this.cropBottom=0,this.pixelRatio=[],this.codec="";var t,r,i=new k(e);if(this.generalProfileIdc=i.readUByte(),this.generalProfileCompatibility=i.readUByte(),this.generalLevelIdc=i.readUByte(),this.spsId=i.readUEG(),this.codec=M.generateCodec(this),-1<I.indexOf(this.generalProfileIdc)){if(this.chromaFormatIdc=i.readUEG(),3===this.chromaFormatIdc&&i.skipBits(1),i.skipUEG(),i.skipUEG(),i.skipBits(1),i.readBits(1))for(t=0,r=3===this.chromaFormatIdc?8:12;t<r;t++)i.readBits(1)&&(t<6?i.skipScalingList(16):i.skipScalingList(64))}else this.chromaFormatIdc=1;if(i.skipUEG(),0===(e=i.readUEG()))i.skipUEG();else if(1===e)for(i.skipBits(1),i.skipEG(),i.skipEG(),t=0,r=i.readUEG();t<r;t++)i.skipEG();i.skipUEG(),i.skipBits(1),e=i.readUEG()+1;var n,o=i.readUEG()+1,a=i.readBits(1);a||i.skipBits(1),this.height=o*(2-a),i.skipBits(1),this.crop=i.readBits(1),this.crop&&(n=1<<(1===this.chromaFormatIdc||2===this.chromaFormatIdc?1:0),a=2-a<<(1===this.chromaFormatIdc?1:0),this.cropLeft=i.readUEG()*n,this.cropRight=i.readUEG()*n,this.cropTop=i.readUEG()*a,this.cropBottom=i.readUEG()*a),this.width=16*e-(this.cropRight+this.cropLeft),this.height=16*o-(this.cropTop+this.cropBottom),i.readBits(1)&&i.readBits(1)&&(255===(n=i.readUByte())?(this.pixelRatio[0]=i.readUByte()<<8|i.readUByte(),this.pixelRatio[1]=i.readUByte()<<8|i.readUByte()):n<L.length&&(this.pixelRatio=L[n]))}function H(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}function U(e){var t=P.call(this)||this;return e=new h(e.read(2),16),t.forbiddenZeroBit=e.read(1),t.nalType=e.read(6),t.nhLayerId=e.read(6),t.nhTimeId=e.read(3),t}(B=w=w||{})[B.NONE=-16]="NONE",B[B.DEFAULT=0]="DEFAULT",B[B.NONREF=8]="NONREF",B[B.BIDIR=16]="BIDIR",B[B.NONINTRA=24]="NONINTRA",B[B.NONKEY=32]="NONKEY",B[B.ALL=48]="ALL",(E=x=x||{})[E.ABORTED=1]="ABORTED",E[E.NETWORK=2]="NETWORK",E[E.DECODE=3]="DECODE",E[E.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",E[E.PARSER=1001]="PARSER",E[E.COROUTINE=10001]="COROUTINE",E[E.WEBGL_NOT_SUPPORTED=10002]="WEBGL_NOT_SUPPORTED",E[E.BUFFERING=10004]="BUFFERING",E[E.RENDERER=10005]="RENDERER",he=function(e,t){return(he=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var F,B=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}he(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},j=function(){return(j=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},V=new Date("1904-01-01T00:00:00Z").getTime(),q=(Ee.prototype.append=function(e){this.children.push(e)},Ee.mapBoxToJSON=function(e){return j({box:e},e.children.reduce((function(e,t){var r=t.header.type,i=e[r];return t=Ee.mapBoxToJSON(t),i?Array.isArray(i)?i.push(t):e[r]=[i,t]:e[r]=t,e}),{}))},Ee),W=(B(Te,de=q),Te);pe=function(e,t){return(pe=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}pe(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(be,ue=q);var G=be;ce=function(e,t){return(ce=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ce(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(Se,le=G);var K=Se;se=function(e,t){return(se=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}se(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(me,ae=q);var X=me;oe=function(e,t){return(oe=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}oe(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(ve,ne=K);var z=ve;ie=function(e,t){return(ie=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ie(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(ge,re=q);var $=ge;te=function(e,t){return(te=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}te(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(_e,ee=G);var Y=_e;Z=function(e,t){return(Z=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Z(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(ye,J=q);var Q,J,Z,ee,te,re,ie,ne,oe,ae,se,le,ce,ue,pe,de,he,fe=ye;function ye(e,t){var r=J.call(this,e,t)||this;r.entries=[],r.version=t.read(1),r.flag=t.read(3),r.entryCount=t.read(4);for(var i=0;i<r.entryCount;i++){var n=1===r.version;r.entries.push({segmentDuration:t.read(n?8:4),mediaTime:t.read(n?8:4),mediaRateInteger:t.read(2),mediaRateFraction:t.read(2)})}return r}function _e(e,t){return(e=ee.call(this,e,t)||this).version=t.read(1),e.flag=t.read(3),e.entryCount=t.read(4),e}function ge(e,t){return(e=re.call(this,e,t)||this).bufferSizeDB=t.read(4),e.maxBitrate=t.read(4),e.avgBitrate=t.read(4),e}function ve(){return null!==ne&&ne.apply(this,arguments)||this}function me(e,t){var r=ae.call(this,e,t)||this;r.sps=[],r.pps=[],r.configVersion=t.read(1),r.generalProfileIdc=t.read(1),r.generalProfileCompatibility=t.read(1),r.generalLevelIdc=t.read(1),r.lengthSizeMinusOne=3&t.read(1),r.numOfSequenceParameterSets=31&t.read(1);var i,n=0,o=[];for(n=0;n<r.numOfSequenceParameterSets;n++){for(i=t.read(2),o=[];i--;)o.push(t.read(1));r.sps.push(new Uint8Array(o))}for(r.numOfPictureParameterSets=31&t.read(1),n=0;n<r.numOfPictureParameterSets;n++){for(i=t.read(2),o=[];i--;)o.push(t.read(1));r.pps.push(new Uint8Array(o))}return r.codec=A.generateCodec(r),r}function Se(e,t){e=le.call(this,e,t)||this;var r=(t.skip(4),t.skip(2),e.bitReferenceId=t.read(2),e.codeStreamVersion=t.read(4),t.skip(4),t.skip(8),e.width=t.read(2),e.heigth=t.read(2),e.horizontalResolution=t.read(4),e.verticalResolution=t.read(4),t.skip(4),e.frameCount=t.read(2),Math.min(t.read(1),32));return e.compressorName=Array.from(new Array(r)).map((function(){return String.fromCharCode(t.read(1))})).join(""),t.skip(32-(r+1)),e.depth=t.read(2),t.skip(2),e}function be(){var e=null!==ue&&ue.apply(this,arguments)||this;return e.isContainer=!0,e}function Te(e,t){return(e=de.call(this,e,t)||this).version=t.read(1),e.flag=t.read(3),e}function Ee(e,t){this.children=[],this.isContainer=!1,this.toStandardTime=function(e){return e&&V+1e3*e},this.header=e}Q=function(e,t){return(Q=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},E=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Q(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},(B=F=F||{})[B.OD=1]="OD",B[B.IOD=2]="IOD",B[B.ESD=3]="ESD",B[B.DCD=4]="DCD",B[B.DSD=5]="DSD",B[B.SLCD=6]="SLCD";var we=function(){this.constructor=Be};dr.readSize=function(e){for(var t,r=0,i=4;i--&&(r=r<<7|127&(t=e.read(1)),128&t););return r},dr.extractDescriptors=function(e){for(var t,r,i,n=[];e.unreadLength;){if(t=new dr(e),i=new o(e.buffer,e.offset,t.size),e.skip(t.size),t.size<=0)return n;switch(t.tag){case F.ESD:r=new ke(t,i);break;case F.DCD:r=new Ie(t,i);break;case F.DSD:r=new Le(t,i);break;case F.SLCD:r=new Ae(t,i);break;default:r=null}r&&i.unreadLength&&(r.children=dr.extractDescriptors(i)),n.push(r)}return n};var xe,Pe=dr,Ce=(pr.findDescriptor=function(e,t){var r;return e.some((function(e){return!!(r=e.probe.tag===t?e:pr.findDescriptor(e.children,t))})),r},pr),ke=(E(ur,Bt=Ce),ur),Ie=(E(cr,Ft=Ce),cr),Le=(E(lr,Ut=Ce),lr),Ae=(E(sr,Ht=Ce),sr);Mt=function(e,t){return(Mt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var Re=((B=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Mt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(ar,Nt=W),ar);Ot=function(e,t){return(Ot=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var De=((E=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ot(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(or,Dt=q),or);Rt=function(e,t){return(Rt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var Oe=((B=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Rt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(nr,At=q),nr);Lt=function(e,t){return(Lt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var Ne=((E=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Lt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(ir,It=q),ir);kt=function(e,t){return(kt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var Me=((B=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}kt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(rr,Ct=q),rr);Pt=function(e,t){return(Pt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var He=((E=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Pt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(tr,xt=q),tr);wt=function(e,t){return(wt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var Ue=((B=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}wt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(er,Et=G),er);Tt=function(e,t){return(Tt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var Fe=((E=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Tt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Zt,bt=q),Zt),Be=(St=function(e,t){return(St=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},Jt),je=mt=q;if("function"!=typeof je&&null!==je)throw new TypeError("Class extends value "+String(je)+" is not a constructor or null");St(Be,je),Be.prototype=null===je?Object.create(je):(we.prototype=je.prototype,new we);var Ve=Jt;vt=function(e,t){return(vt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}vt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(Qt,gt=q);var qe=Qt;_t=function(e,t){return(_t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}_t(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(Yt,yt=q);var We=Yt;ft=function(e,t){return(ft=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ft(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}($t,ht=q);var Ge=$t;dt=function(e,t){return(dt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}dt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(zt,pt=G);var Ke=zt;ut=function(e,t){return(ut=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ut(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(Xt,ct=G);var Xe=Xt;lt=function(e,t){return(lt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}lt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(Kt,st=W);var ze=Kt;at=function(e,t){return(at=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}at(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(Gt,ot=G);var $e=Gt;nt=function(e,t){return(nt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}nt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(Wt,it=W);var Ye=Wt;rt=function(e,t){return(rt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}rt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(qt,tt=W);var Qe=qt;et=function(e,t){return(et=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}et(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(Vt,Ze=W);var Je,Ze,et,tt,rt,it,nt,ot,at,st,lt,ct,ut,pt,dt,ht,ft,yt,_t,gt,vt,mt,St,bt,Tt,Et,wt,xt,Pt,Ct,kt,It,Lt,At,Rt,Dt,Ot,Nt,Mt,Ht,Ut,Ft,Bt,jt=Vt;function Vt(e,t){return 1===(e=Ze.call(this,e,t)||this).version?e.baseMediaDecodeTime=t.read(8):e.baseMediaDecodeTime=t.read(4),e}function qt(e,t){var r=tt.call(this,e,t)||this;r.references=[],r.trackId=t.read(4),r.timescale=t.read(4),0===r.version?(r.pts=t.read(4),r.offset=t.read(4)):(r.pts=t.read(8),r.offset=t.read(8)),t.skip(2),r.references=[];for(var i=t.read(2),n=0;n<i;n++){var o=new h(t.read(4),32),a=t.read(4),s=new h(t.read(4),32);r.references.push({type:o.read(1),size:o.read(31),duration:a,startWithSap:s.read(1),sapType:s.read(3),sapDeltaTime:s.read(28)})}return r}function Wt(e,t){var r=it.call(this,e,t)||this;r.isLeadings=[],r.sampleDependsOns=[],r.sampleIsDependedOns=[],r.sampleHasRedundancys=[];for(var i=0,n=void 0;i<t.unreadLength;i++)n=new h(t.read(1),8),r.isLeadings[i]=n.read(2),r.sampleDependsOns[i]=n.read(2),r.sampleIsDependedOns[i]=n.read(2),r.sampleHasRedundancys[i]=n.read(2);return r}function Gt(){return null!==ot&&ot.apply(this,arguments)||this}function Kt(){return null!==st&&st.apply(this,arguments)||this}function Xt(){return null!==ct&&ct.apply(this,arguments)||this}function zt(){return null!==pt&&pt.apply(this,arguments)||this}function $t(e,t){return(e=ht.call(this,e,t)||this).version=t.read(1),e.flag=t.read(3),e.graphicsMode=t.read(2),e.opcolor=[t.read(2),t.read(2),t.read(2)],e}function Yt(e,t){return(e=yt.call(this,e,t)||this).version=t.read(1),e.flag=t.read(3),e}function Qt(e,t){var r=gt.call(this,e,t)||this;r.matrix=[],r.version=t.read(1),r.flag=t.read(3),r.createTime=r.toStandardTime(t.read(4)),r.modifyTime=r.toStandardTime(t.read(4)),r.trackId=t.read(4),t.skip(4),r.duration=t.read(4),t.skip(8),r.layer=t.read(2),r.alternateGroup=t.read(2),r.volume=Number(t.read(1)+"."+t.read(1)),t.skip(2);for(var i=0;i<9;i++)r.matrix.push(Number(t.read(2)+"."+t.read(2)));return r.width=Number(t.read(2)+"."+t.read(2)),r.height=Number(t.read(2)+"."+t.read(2)),r}function Jt(e,t){var r=mt.call(this,e,t)||this;for(r.data=[];0<t.unreadLength;)r.data.push(t.read(1));return r}function Zt(e,t){var r=bt.call(this,e,t)||this;r.matrix=[],r.version=t.read(1),r.flag=t.read(3),r.createTime=r.toStandardTime(t.read(4)),r.modifyTime=r.toStandardTime(t.read(4)),r.timeScale=t.read(4),r.duration=t.read(4),r.rate=Number(t.read(2)+"."+t.read(2)),r.volume=Number(t.read(1)+"."+t.read(1)),t.skip(10);for(var i=0;i<9;i++)r.matrix.push(Number(t.read(2)+"."+t.read(2)));return t.skip(24),r.nextTrackId=t.read(4),r}function er(e,t){return e=Et.call(this,e,t)||this,t.skip(6),e.dataReferenceIndex=t.read(2),t.skip(8),e.channelCount=t.read(2),e.sampleSize=t.read(2),t.skip(4),e.sampleRate=t.read(4)>>>16,e}function tr(e,t){function r(e){return 96+(31&e)}var i=((e=xt.call(this,e,t)||this).version=t.read(1),e.flag=t.read(3),1===e.version);return e.createTime=e.toStandardTime(t.read(i?8:4)),e.modifyTime=e.toStandardTime(t.read(i?8:4)),e.timeScale=t.read(4),e.duration=t.read(i?8:4),i=t.read(2),e.language=String.fromCharCode(r(i>>10),r(i>>5),r(i)),e.quality=Number(t.read(1)+"."+t.read(1)),e}function rr(e,t){var r=Ct.call(this,e,t)||this;return r.data=t.readToUint8(e.size-e.length),r}function ir(e,t){var r=It.call(this,e,t)||this;for(r.name="",r.version=t.read(1),r.flag=t.read(3),r.preDefined=String.fromCharCode(t.read(1),t.read(1),t.read(1),t.read(1)),r.handleType=String.fromCharCode(t.read(1),t.read(1),t.read(1),t.read(1)),t.skip(12);0<t.unreadLength;)r.name+=String.fromCharCode(t.read(1));return r}function nr(e,t){var r,i=At.call(this,e,t)||this;i.nalus=[],i.vps=[],i.sps=[],i.pps=[],i.configVersion=t.read(1),r=new h(t.read(1),8),i.generalProfileSpace=r.read(2),i.generalTierFlag=r.read(1),i.generalProfileIdc=r.read(5),r=new h(t.read(4),32),i.generalProfileCompatibilityFlags=Array.from(new Array(32)).map((function(){return r.read(1)})),i.generalConstraintIndicatorFlags=Array.from(new Array(6)).map((function(){return t.read(1)})),i.generalLevelIdc=t.read(1),i.minSpatialSegmentationIdc=4095&t.read(2),i.parallelismType=3&t.read(1),i.chromaFormatIdc=3&t.read(1),i.bitDepthLumaMinus8=7&t.read(1),i.bitDepthChromaMinus8=7&t.read(1),i.avgFrameRate=t.read(2),r=new h(t.read(1),8),i.constantFrameRate=r.read(2),i.numTemporalLayers=r.read(3),i.temporalIdNested=r.read(1),i.lengthSizeMinusOne=r.read(2),i.nalus=[];for(var n=t.read(1),o=0;o<n;o++){var a=[],s=(r=new h(t.read(1),8)).read(1);r.read(1);for(var l=r.read(6),c=t.read(2),u=0;u<c;u++)a.push(new Uint8Array(t.read(2)).map((function(){return t.read(1)})));i.nalus.push({completeness:s,type:l,data:a}),l===S.VPS?a.forEach((function(e){return i.vps.push(e)})):l===S.SPS?a.forEach((function(e){return i.sps.push(e)})):l===S.PPS&&a.forEach((function(e){return i.pps.push(e)}))}return i.codec=O.generateCodec(i),i}function or(e,t){var r=Dt.call(this,e,t)||this;for(r.compatibleBrands=[],r.majorBrand=String.fromCharCode(t.read(1),t.read(1),t.read(1),t.read(1)),r.minorVersion=t.read(4);4<=t.unreadLength;)r.compatibleBrands.push(String.fromCharCode(t.read(1),t.read(1),t.read(1),t.read(1)));return r}function ar(e,t){(e=Nt.call(this,e,t)||this).descriptors=[],e.audioObjectType=0,e.samplingfrequencyIndex=0,e.descriptors=Pe.extractDescriptors(t),t=Ce.findDescriptor(e.descriptors,F.DCD);var r=Ce.findDescriptor(e.descriptors,F.DSD);return r&&(e.audioObjectType=r.audioObjectType,e.samplingfrequencyIndex=r.samplingfrequencyIndex),e.codec=t&&r?"mp4a."+t.mepg4Audio.toString(16)+"."+r.audioObjectType.toString(16):"mp4a",e}function sr(e,t){return(e=Ht.call(this,e)||this).esId=t.read(2),e}function lr(e,t){return e=Ut.call(this,e)||this,t=new h(t.read(2),16),e.audioObjectType=t.read(5),e.samplingfrequencyIndex=t.read(4),e.channel=t.read(4),e.frameLengthFlag=t.read(1),e.dependsOnCoreCoder=t.read(1),e.extesionFlag=t.read(1),e}function cr(e,t){return(e=Ft.call(this,e)||this).mepg4Audio=t.read(1),e.audioStream=t.read(1),e.bufferSize=t.read(3),e.maxBitrate=t.read(4),e.avgBitrate=t.read(4),e}function ur(e,t){return(e=Bt.call(this,e)||this).streamDependenceFlag=0,e.URLFlag=0,e.OCRStreamFlag=0,e.esId=t.read(2),e.esFlag=t.read(1),128&e.esFlag&&(e.streamDependenceFlag=t.read(2)),64&e.esFlag&&(e.URLFlag=t.read(1),t.skip(e.URLFlag)),32&e.esFlag&&(e.OCRStreamFlag=t.read(2)),e}function pr(e){this.children=[],this.probe=e}function dr(e){this.tag=e.read(1),this.size=dr.readSize(e)}Je=function(e,t){return(Je=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},B=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Je(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},(E=xe=xe||{})[E.BASE_DATA_OFFSET=1]="BASE_DATA_OFFSET",E[E.SAMPLE_DESC=2]="SAMPLE_DESC",E[E.SAMPLE_DUR=8]="SAMPLE_DUR",E[E.SAMPLE_SIZE=16]="SAMPLE_SIZE",E[E.SAMPLE_FLAG=32]="SAMPLE_FLAG",E[E.DUR_EMPTY=65536]="DUR_EMPTY",E[E.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF",B(br,vr=W);var hr,fr=br;gr=function(e,t){return(gr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}gr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(Sr,_r=W);var yr,_r,gr,vr,mr=Sr;function Sr(e,t){return(e=_r.call(this,e,t)||this).trackId=t.read(4),e.defaultSampleDescriptionIndex=t.read(4),e.defaultSampleDuration=t.read(4),e.defaultSampleSize=t.read(4),e.defaultSampleFlag=t.read(4),e}function br(e,t){return(e=vr.call(this,e,t)||this).baseDataOffset=0,e.defaultSampleDescriptionIndex=0,e.defaultSampleDuration=0,e.defaultSampleSize=0,e.defaultSampleFlag=0,e.trackId=t.read(4),e.flag&xe.BASE_DATA_OFFSET&&(e.baseDataOffset=t.read(8)),e.flag&xe.SAMPLE_DESC&&(e.defaultSampleDescriptionIndex=t.read(4)),e.flag&xe.SAMPLE_DUR&&(e.defaultSampleDuration=t.read(4)),e.flag&xe.SAMPLE_SIZE&&(e.defaultSampleSize=t.read(4)),e.flag&xe.SAMPLE_FLAG&&(e.defaultSampleFlag=t.read(4)),e}yr=function(e,t){return(yr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},E=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}yr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},(B=hr=hr||{})[B.DATA_OFFSET=1]="DATA_OFFSET",B[B.FIRST_FLAG=4]="FIRST_FLAG",B[B.DURATION=256]="DURATION",B[B.SIZE=512]="SIZE",B[B.FLAG=1024]="FLAG",B[B.CTS_OFFSET=2048]="CTS_OFFSET",E(ai,Yr=W);var Tr,Er,wr,xr=ai;$r=function(e,t){return($r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}$r(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(oi,zr=q);var Pr=oi;Xr=function(e,t){return(Xr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Xr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(ni,Kr=q);var Cr=ni;Gr=function(e,t){return(Gr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Gr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(ii,Wr=q);var kr=ii;qr=function(e,t){return(qr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}qr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(ri,Vr=q);var Ir=ri;jr=function(e,t){return(jr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}jr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(ti,Br=G);var Lr=ti;Fr=function(e,t){return(Fr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Fr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(ei,Ur=G);var Ar=ei;Hr=function(e,t){return(Hr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Hr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(Zr,Mr=q);var Rr=Zr;function Dr(e,t){var r=e.offset;this.start=t,this.size=e.read(4),this.type=String.fromCharCode(e.read(1),e.read(1),e.read(1),e.read(1)).trim(),1===this.size&&(this.size=e.read(8)),this.length=e.offset-r}Nr=function(e,t){return(Nr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Nr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(Jr,Or=q);var Or,Nr,Mr,Hr,Ur,Fr,Br,jr,Vr,qr,Wr,Gr,Kr,Xr,zr,$r,Yr,Qr=Jr;function Jr(e,t){var r=Or.call(this,e,t)||this;r.sampleCounts=[],r.sampleDurations=[],r.version=t.read(1),r.flag=t.read(3);for(var i=t.read(4),n=0;n<i;n++)r.sampleCounts[n]=t.read(4),r.sampleDurations[n]=t.read(4);return r}function Zr(e,t){var r=Mr.call(this,e,t)||this;r.isContainer=!0,r.sampleSizes=[],r.version=t.read(1),r.flag=t.read(3),r.sampleSize=t.read(4);for(var i=t.read(4),n=0;n<i;n++)0===r.sampleSize?r.sampleSizes.push(t.read(4)):r.sampleSizes.push(r.sampleSize);return r}function ei(e,t){var r=Ur.call(this,e,t)||this;r.sampleNumbers=[],r.version=t.read(1),r.flag=t.read(3);for(var i=t.read(4),n=0;n<i;n++)r.sampleNumbers.push(t.read(4));return r}function ti(e,t){return(e=Br.call(this,e,t)||this).version=t.read(1),e.flag=t.read(3),e.entryCount=t.read(4),e}function ri(e,t){var r=Vr.call(this,e,t)||this;r.entries=[],r.version=t.read(1),r.flag=t.read(3);for(var i=t.read(4),n=0;n<i;n++)r.entries.push({firstChunk:t.read(4),samplePerChunk:t.read(4),sampleDescriptionIndex:t.read(4)});return r}function ii(e,t){var r=Wr.call(this,e,t)||this;r.chunkOffsets=[],r.version=t.read(1),r.flag=t.read(3);for(var i=t.read(4),n=0;n<i;n++)r.chunkOffsets.push(t.read(8));return r}function ni(e,t){var r=Kr.call(this,e,t)||this;r.chunkOffsets=[],r.version=t.read(1),r.flag=t.read(3);for(var i=t.read(4),n=0;n<i;n++)r.chunkOffsets.push(t.read(4));return r}function oi(e,t){var r=zr.call(this,e,t)||this;r.sampleCounts=[],r.sampleOffsets=[],r.version=t.read(1),r.flag=t.read(3),r.entryCount=t.read(4);for(var i=0;i<r.entryCount;i++)r.sampleCounts.push(t.read(4)),r.sampleOffsets.push(t.read(4));return r}function ai(e,t){var r=Yr.call(this,e,t)||this;r.sampleDurations=[],r.sampleSizes=[],r.sampleFlags=[],r.sampleCTSs=[],r.sampleCount=t.read(4),r.flag&hr.DATA_OFFSET?r.dataOffset=t.readInt(4):r.dataOffset=0,r.flag&hr.FIRST_FLAG?r.firstSampleFlag=t.read(4):r.firstSampleFlag=0;for(var i=0;i<r.sampleCount;i++)r.flag&hr.DURATION&&(r.sampleDurations[i]=t.read(4)),r.flag&hr.SIZE&&(r.sampleSizes[i]=t.read(4)),r.flag&hr.FLAG&&(r.sampleFlags[i]=t.read(4)),r.flag&hr.CTS_OFFSET&&(0===r.version?r.sampleCTSs[i]=t.read(4):r.sampleCTSs[i]=t.readInt(4));return r}(B=Tr=Tr||{}).VIDE="vide",B.SOUN="soun",(E=Er=Er||{})[E.FLV=0]="FLV",E[E.MP4=1]="MP4",E[E.HLS=2]="HLS",E[E.MPEGTS=3]="MPEGTS",(B=wr=wr||{})[B.UNKNOWN=0]="UNKNOWN",B[B.VIDEO=1]="VIDEO",B[B.AUDIO=2]="AUDIO",(E={})[Tr.VIDE]=wr.VIDEO,E[Tr.SOUN]=wr.AUDIO;var si,li=E;function ci(e){return Array.isArray(e)?e:e?[e]:[]}function ui(e){return e<10?"0"+e:e}(B=si=si||{})[B.DEGRADATION_PRIORITY_MASK=65535]="DEGRADATION_PRIORITY_MASK",B[B.IS_NON_SYNC=65536]="IS_NON_SYNC",B[B.PADDING_MASK=917504]="PADDING_MASK",B[B.REDUNDANCY_MASK=3145728]="REDUNDANCY_MASK",B[B.DEPENDED_MASK=12582912]="DEPENDED_MASK",B[B.DEPENDS_MASK=50331648]="DEPENDS_MASK",B[B.DEPENDS_NO=33554432]="DEPENDS_NO",B[B.DEPENDS_YES=16777216]="DEPENDS_YES",Ti.prototype.addTrack=function(e){this.tracks.push(e)},Ti.prototype.getTracks=function(){return this.tracks},Ti.prototype.getTrackById=function(e){return this.tracks.find((function(t){return t.options.id===e}))};var pi,di=Ti,hi=function(){return(hi=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},fi=(bi.prototype.getSamples=function(){return this.samples},bi.prototype.getNextSampleOffset=function(){var e=this.samples[this.nextSampleIndex];return e?e.offset:0},bi.prototype.addSample=function(e){this.samples.push(e),this.duration+=e.duration},bi.prototype.processNextSample=function(e,t){void 0===t&&(t=0);var r=this.samples[this.nextSampleIndex];if(r)return this.processSample(e,t,r)},bi.prototype.processSample=function(e,t,r){var i=(t=void 0===t?0:t)+e.byteLength;if(0<=(t=r.offset-t)&&r.offset+r.size<=i)return this.nextSampleIndex++,hi(hi({},r),{data:e.subarray(t,t+r.size)})},bi.prototype.processSamples=function(e,t){void 0===t&&(t=0);for(var r=this.samples,i=[],n=this.nextSampleIndex,o=r.length;n<o;n++){var a=this.processSample(e,t,r[n]);if(!a)break;i.push(a)}return i},bi.prototype.seek=function(e){for(var t,r=e*this.options.timeScale,i=-1,n=-1,o=0,a=this.samples.length;o<a;o++)if((t=this.samples[o]).isSync&&(n=o),t.dts+t.cts>=r){i=n;break}if(-1<i)return this.nextSampleIndex=i,this.samples[i]},bi),yi=(Si.prototype.createMedia=function(e){return this._parseMoovJSON(e)},Si.prototype._parseMoovJSON=function(e){var t=this,r=e.mvhd.box,i=new di({duration:r.duration,timeScale:r.timeScale,rate:r.rate,modifyTime:r.modifyTime,createTime:r.createTime});return e.trak&&[].concat(e.trak).forEach((function(r){var n=r.tkhd,o=(r=r.mdia).mdhd,a=r.hdlr,s=(r=r.minf.stbl,n=n.box,a=a.box,o=o.box,li[a.handleType]),l=(r=t._buildSamples(r,s),{id:n.trackId,name:a.name,handleType:a.handleType,type:s,createTime:n.createTime,modifyTime:n.modifyTime,layer:n.layer,volume:n.volume,matrix:n.matrix,duration:n.duration,width:n.width,height:n.height,timeScale:o.timeScale,language:o.language,quality:o.quality,defaultSampleDescriptionIndex:1,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlag:0}),c=((s=null==(a=e.mvex)?void 0:a.trex)&&[].concat(s).forEach((function(e){e=e.box,l.defaultSampleDescriptionIndex=e.defaultSampleDescriptionIndex,l.defaultSampleDuration=e.defaultSampleDuration,l.defaultSampleSize=e.defaultSampleSize,l.defaultSampleFlag=e.defaultSampleFlag})),new fi(l));r.forEach((function(e){return c.addSample(e)})),i.addTrack(c)})),i},Si.prototype._buildSamples=function(e,t){var r,i,n,o,a,s,l,c,u,p,d,h,f,y,_,g,v,m=e.stts,S=e.stss,b=e.ctts,T=e.stsc,E=e.stsz||e.stz2;return E?(s=e.stco||e.co64,l=T.box,c=null==S?void 0:S.box,u=m.box,p=null==b?void 0:b.box,y=f=h=d=-1,_=0,g=[],(v=E.box.sampleSizes).forEach((function(e,m){var S={},b=l.entries;S.size=e,S.trackType=t,0===m?(i=1,r=0,S.chunkIndex=i,a=b[S.chunkRunIndex=r].samplePerChunk,o=0,n=r+1<b.length?b[r+1].firstChunk-1:1/0):m<a?(S.chunkIndex=i,S.chunkRunIndex=r):(i++,o=0,n<(S.chunkIndex=i)&&(n=1+ ++r<b.length?b[r+1].firstChunk-1:1/0),a+=b[S.chunkRunIndex=r].samplePerChunk),S.descriptionIndex=b[r].sampleDescriptionIndex-1,S.offset=s.box.chunkOffsets[S.chunkIndex-1]+o,o+=S.size,d<m&&(h++,d=Math.max(d,0),d+=u.sampleCounts[h]),0<m?((e=g[m-1]).duration=u.sampleDurations[h],S.dts=g[m-1].dts+e.duration):S.dts=0,p?(f<=m&&(y++,f=Math.max(f,0),f+=p.sampleCounts[y]),S.cts=p.sampleOffsets[y]):S.cts=0,c?m===c.sampleNumbers[_]-1?(S.isSync=!0,_++):S.isSync=!1:S.isSync=!0,S.isLast=m===v.length-1,g.push(S)})),g):[]},Si),_i=(mi.prototype.init=function(e){this.options=e},mi.prototype.parse=function(e){var t=this;ci(e.traf).forEach((function(r){return t._buildSamples(r,e.box)}))},mi.prototype._buildSamples=function(e,t){var r=e.tfhd.box,i=this._getTrakById(r.trackId);if(i)for(var n=i.options,o=e.tfdt.box,a=r.flag,s=(a&xe.SAMPLE_DESC?r:n).defaultSampleDescriptionIndex,l=(a&xe.SAMPLE_DUR?r:n).defaultSampleDuration,c=(a&xe.SAMPLE_SIZE?r:n).defaultSampleSize,u=(a&xe.SAMPLE_FLAG?r:n).defaultSampleFlag,p=ci(e.trun),d=n.id,h=n.type,f=a&xe.BASE_DATA_OFFSET?r.baseDataOffset:a&xe.DEFAULT_BASE_IS_MOOF?t.header.start:0,y=0,_=0;_<p.length;_++)for(var g=p[_].box,v=g.flag,m=g.dataOffset+f,S=0;S<g.sampleCount;S++){var b={},T=(b.trackId=d,b.trackType=h,b.descriptionIndex=s,v&hr.SIZE?b.size=g.sampleSizes[S]:b.size=c,v&hr.DURATION?b.duration=g.sampleDurations[S]:b.duration=l,b.dts=0<y?y:o?o.baseMediaDecodeTime:0,y=b.dts+b.duration,v&hr.CTS_OFFSET?b.cts=g.sampleCTSs[S]:b.cts=0,u);v&hr.FLAG?T=g.sampleFlags[S]:0===S&&v&hr.FIRST_FLAG&&(T=g.firstSampleFlag),b.offset=m,b.flag=T,b.isSync=!(T&(si.IS_NON_SYNC|si.DEPENDS_YES)),b.isLeading=T>>26&3,b.dependsOn=T>>24&3,b.isDependedOn=T>>22&3,b.hasRedundancy=T>>20&3,b.degradationPriority=65535&T,m+=b.size,b.isLast=_===p.length-1&&S===g.sampleCount-1,i.addSample(b)}},mi.prototype.destroy=function(){this.options=null},mi),gi=(E=e(926),e.n(E)),vi="undefined"!=typeof performance&&"function"==typeof performance.now;function mi(){var e=this;this.options=null,this._getTrakById=function(t){var r;return null==(r=e.options)?void 0:r.media.getTracks().find((function(e){return e.options.id===t}))}}function Si(){}function bi(e){this.samples=[],this.nextSampleIndex=0,this.duration=0,this.options=e}function Ti(e){this.tracks=[],this.options=e}function Ei(){return(vi?performance:Date).now()}(B=pi=pi||{})[B.TRACE=-1]="TRACE",B[B.DEBUG=0]="DEBUG",B[B.LOG=1]="LOG",B[B.INFO=2]="INFO",B[B.WARN=10]="WARN",B[B.ERROR=11]="ERROR",B[B.NONE=1e3]="NONE";var wi=pi.INFO,xi=pi.ERROR,Pi=2e3,Ci=Ei(),ki=[],Ii=0;function Li(e){var t=this;this.trace=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t._print(pi.TRACE,r)},this.debug=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t._print(pi.DEBUG,r)},this.log=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t._print(pi.LOG,r)},this.info=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t._print(pi.INFO,r)},this.warn=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t._print(pi.WARN,r)},this.error=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t._print(pi.ERROR,r)},this.name=e}function Ai(){var e=this;this._eventMap={},this.listeners=function(t){return e._eventMap[t]||[]},this.emit=function(t,r){return t=e._eventMap[t],!!Array.isArray(t)&&(t.forEach((function(e){return e(r)})),!0)},this.off=function(t,r){var i=e._eventMap[t];return Array.isArray(i)&&(e._eventMap[t]=i.filter((function(e){return e!==r}))),e},this.removeAllListeners=function(t){return void 0===t?e._eventMap={}:e._eventMap[t]&&(e._eventMap[t]=[]),e},this.on=function(t,r){return e._eventMap[t]?e._eventMap[t].push(r):e._eventMap[t]=[r],e},this.once=function(t,r){return e.on(t,(function i(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];e.off(t,i),r.apply(e,n)})),e},this.proxy=function(t,r){r.forEach((function(r){e.on(r,(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e.unshift(r),t.emit.apply(t,e)}))}))},this.proxyOnce=function(t,r){r.forEach((function(r){e.once(r,(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e.unshift(r),t.emit.apply(t,e)}))}))}}(E=Li.prototype)._print=function(e,t){var r,i,n,o,a,s,l,c;wi<=e&&(r=Ei()-Ci,n="["+pi[e]+"]["+this.name+"]["+(i=r,void 0===(n=!0)&&(n=!0),n=void 0!==n&&n,((o=c=Math.floor(i/1e3))===1/0?o:(s=Math.floor(o/60),s-=60*(a=Math.floor(s/60)),o=Math.floor(o-60*(60*a+s)),l=[],(n||0<a)&&l.push(ui(a)),l.push(ui(s)),l.push(ui(o)),l.join(":")))+".")+Math.floor(1e3*(i-1e3*c))+"]",ki.push({id:Ii++,level:e,name:this.name,timestamp:r,args:t,prefix:n,message:""}),ki.length>Pi&&ki.shift(),xi<=e)&&(a=(pi[e]||"").toLowerCase(),s=console[a])&&s.apply(void 0,[n].concat(t))},E.getLogs=function(){return ki.map((function(e){return e.message=e.prefix+" "+e.args.map((function(e){return"string"==typeof e?e:gi()(e)})).join(" "),e}))},E.clear=function(){ki=[]},E.setSize=function(e){Pi=e},E.setLevel=function(e){wi=e},E.setPrintLevel=function(e){xi=e},E.reset=function(){wi=pi.INFO,xi=pi.ERROR,Pi=2e3,Ci=Ei(),ki=[],Ii=0},(B=Li).LogLevel=pi;var Ri,Di,Oi,Ni=new B("demuxer"),Mi=(Di=function(e,t){return(Di=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},E=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Di(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},(B=Ri=Ri||{})[B.IDLE=0]="IDLE",B[B.LOADING=1]="LOADING",B[B.SUSPENGING=2]="SUSPENGING",B[B.ERROR=3]="ERROR",E(Ui,Oi=Ai),Object.defineProperty(Ui.prototype,"eof",{get:function(){return this.offset===this.total},enumerable:!1,configurable:!0}),Ui.prototype._changeStatus=function(e){this.status!==e&&(Ni.log("loader status changed: ".concat(Ri[this.status]," -> ").concat(Ri[e])),this.status=e)},Ui.prototype.jump=function(e){this.offset=e},Ui.prototype.load=function(e,t,r){return this.reset(),this.url=e,this.loadRange(t,r)},Ui.prototype.resume=function(){return this.loadRange(this.offset)},Ui.prototype.suspend=function(){this.abort(),this._changeStatus(Ri.SUSPENGING)},Ui.prototype.reset=function(){this.abort(),this.offset=0,this.total=1/0,this.url=""},Ui.prototype.destroy=function(){this.removeAllListeners(),this.reset()},Ui),Hi={isIos:!1,isDingtalk:!1,isQQBrowser:!1};function Ui(e){void 0===e&&(e={});var t=Oi.call(this)||this;return t.timeout=15e3,t.total=1/0,t.offset=0,t.status=Ri.IDLE,t.url="",t._handleError=function(e){if("AbortError"===e.name)return!1;throw t._changeStatus(Ri.ERROR),t.emit("error",{code:x.NETWORK,message:e.message,origin:e}),e},t.timeout=e.timeout||t.timeout,t}B=(window.navigator.userAgent||"").toLowerCase(),/(iPhone\sOS)\s([\d_]+)/i.test(B)&&(Hi.isIos=!0),-1<B.indexOf("dingtalk")?Hi.isDingtalk=!0:-1<B.indexOf("qqbrowser")&&(Hi.isQQBrowser=!0),Yi=function(e,t){return(Yi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Yi(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(an,$i=Mi),an.isSupported=function(){return Hi.isIos&&(Hi.isDingtalk||Hi.isQQBrowser)?(console.log("ios","isDingtalk",Hi.isDingtalk,"isQQBrowser",Hi.isQQBrowser),!1):"undefined"!=typeof AbortController&&"undefined"!=typeof ReadableStream},an.prototype.loadRange=function(e,t){var r=this;if(void 0===e&&(e=0),void 0===t&&(t=1/0),!this.url||e>=this.total)return n.resolve(!1);if(this.status===Ri.LOADING||this.status===Ri.ERROR)return n.resolve(!1);Ni.info("执行load, from=".concat(e," to=").concat(t," url=").concat(this.url)),this.abort();var i=new Headers,o=0<e||t<1/0;return o&&(t=Math.min(this.total-1,t),i.set("Range","bytes=".concat(e,"-").concat(t===1/0?"":t))),this._changeStatus(Ri.LOADING),this.controller=new AbortController,this.emit("loadstart",void 0),this.timer=setTimeout(this.triggerTimeout,this.timeout),fetch(this.url,{method:"GET",headers:i,signal:this.controller.signal}).then((function(t){var i,n;if(clearTimeout(r.timer),t.body&&200<=t.status&&t.status<300)return i=t.body.getReader(),r.offset=e,o?(n=t.headers.get("Content-Range")||"",r.total=Number(n.split("/")[1])||r.total):r.total=Number(t.headers.get("Content-Length"))||r.total,function e(){return i.read().then((function(t){return t.done?(r.controller=null,r._changeStatus(Ri.IDLE),r.emit("loadend",void 0),!0):(r.offset+=t.value.byteLength,r.emit("progress",{offset:r.offset-t.value.byteLength,data:t.value}),e())}))}();throw new Error("媒体流数据不存在")})).catch((function(e){return clearTimeout(r.timer),r._handleError(e)}))},E=an,zi=function(e,t){return(zi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}zi(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(on,Xi=Mi),on.prototype.abort=function(){var e=this.xhr;e&&(e.onerror=null,e.onprogress=null,e.onloadend=null,e.onreadystatechange=null,e.abort(),this.xhr=null,this._resolve(!1)),this._changeStatus(Ri.IDLE)},on.prototype.loadRange=function(e,t){var r=this;return void 0===e&&(e=0),void 0===t&&(t=1/0),!this.url||e>=this.total||this.status===Ri.LOADING||this.status===Ri.ERROR?n.resolve(!1):(this.abort(),new n((function(i,n){function o(){var e,t,i=a.responseText,n=i.length,o=l;0<n&&o<n&&(t=r.offset,r.offset+=n-o,l=n,r.emit("progress",{offset:t,data:(e=i.substring(o,n),new Uint8Array(e.length).map((function(t,r){return e.charCodeAt(r)})))}))}r.xhr=new XMLHttpRequest,r._resolve=i;var a=r.xhr,s=0<e||t<1/0,l=(a.open("GET",r.url),s&&a.setRequestHeader("Range","bytes=".concat(e,"-").concat(t===1/0?"":t)),a.onreadystatechange=function(){var e;a.readyState===a.HEADERS_RECEIVED&&200<=a.status&&a.status<300&&(s?(e=a.getResponseHeader("Content-Range")||"",r.total=Number(e.split("/")[1])||r.total):r.total=Number(a.getResponseHeader("Content-Length"))||r.total),a.readyState>=a.HEADERS_RECEIVED&&clearTimeout(r._timer)},r.offset=e,0);a.timeout=r.timeout,a.onprogress=o,a.onloadend=function(){o(),r.xhr=null,r._changeStatus(Ri.IDLE),r.emit("loadend",void 0),i(!0)},a.onerror=function(e){r.xhr=null;try{r._handleError(new Error(e.constructor.name))}catch(e){n(e)}},a.overrideMimeType("text/plain; charset=x-user-defined"),r._changeStatus(Ri.LOADING),r.emit("loadstart",void 0),r._timer=setTimeout(r.triggerTimeout,r.timeout),a.send()})))},B=on;var Fi=E.isSupported()?E:B;Ki=function(e,t){return(Ki=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ki(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(nn,Gi=Ai),Object.defineProperty(nn.prototype,"loader",{get:function(){return this.customLoader||this.originLoader},enumerable:!1,configurable:!0}),Object.defineProperty(nn.prototype,"status",{get:function(){return this.loader.status},enumerable:!1,configurable:!0}),nn.probe=function(e){throw new Error("parser should implements static probe")},nn.prototype.onProgress=function(e){},nn.prototype.onLoadEnd=function(){},nn.prototype.load=function(e){return this.reset(),this.loader.load(e)},nn.prototype.suspend=function(){return this.loader.suspend()},nn.prototype.resume=function(){return this.loader.resume()},nn.prototype.reset=function(){this.loader.reset(),this.metadata=null},nn.prototype.destroy=function(){this.reset(),this.loader.off("progress",this.onProgress),this.loader.off("loadend",this.onLoadEnd),this.originLoader.destroy(),this.removeAllListeners()},Wi=function(e,t){return(Wi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Wi(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(rn,qi=E=nn),rn.probe=function(e){return!(e.byteLength<8)&&"ftyp"===[e[4],e[5],e[6],e[7]].map((function(e){return String.fromCharCode(e)})).join("")},rn.prototype.processPackets=function(e,t){var r,i=this,n=[];return this.media&&e.byteLength&&(this.media.getTracks().forEach((function(r){r.processSamples(e,t).forEach((function(e){(e=i.convertSampleToPacket(e))&&n.push(e)}))})),r=this.getMinNextSampleOffset()-t,this.unhandleBuffer=r>=e.byteLength?null:e.slice(r).buffer),n},Object.defineProperty(rn.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),rn.prototype.seek=function(e){var t,r=this.options.progressive;this.unhandleBuffer=null,r&&this.loader.suspend(),null!=(t=this.media)&&t.getTracks().map((function(t){return t.seek(e)})),r&&this.loader.loadRange(this.getMinNextSampleOffset())},rn.prototype.onProgress=function(e){var t=e.data;e=e.offset,t.length&&(this.unhandleBuffer&&(t=o.concatUint8(new Uint8Array(this.unhandleBuffer),t),e-=this.unhandleBuffer.byteLength,this.unhandleBuffer=null),this.metadata||this.parse(new o(t.buffer,0),e),this.metadata)&&(t=this.processPackets(t,e)).length&&this.emit("loadeddata",{packets:t})},rn.prototype.getMinNextSampleOffset=function(){return this.media?Math.min.apply(Math,this.media.getTracks().map((function(e){return e.getNextSampleOffset()}))):0},rn.prototype.parse=function(e,t){var i,n=this;void 0===t&&(t=0);for(var a=e.offset,s=0,l=this;8<=e.unreadLength;){var c=function(){var c,u,p,d,h;return s=e.offset-a,0===(c=new Dr(e,t+s)).size?(p=new Error("box [".concat(c.type,"] size 为 0")),console.error(p),l.emit("error",{code:x.PARSER,message:p.message,origin:p}),"break"):l.options.progressive&&"mdat"===c.type&&!l.metadata?(u=c.start+c.size,l.loader.suspend(),l.unhandleBuffer=null,Ni.info("检测到mdat box在moov box之后，跳转moov起始偏移位"),l.loader.loadRange(u).then((function(){n.unhandleBuffer=null,n.loader.jump(c.start),n.loader.status!==Ri.SUSPENGING&&n.loader.loadRange(c.start,u)})),{value:void 0}):(p=c.size-c.length,e.unreadLength>=p?((h=r[c.type])?(d=new o(e.buffer,e.offset,p),(i=new h(c,d)).isContainer&&((h=new rn({sub:!0})).proxy(l,["loadedbox"]),h.parse(d,s+t+c.length),h.removeAllListeners(),h.boxes.forEach((function(e){i.append(e)})))):i=new q(c),e.skip(p),l.boxes.push(i),void l.emit("loadedbox",i)):(e.back(c.length),"break"))}();if("object"==typeof c)return c.value;if("break"===c)break}e.unreadLength&&(this.unhandleBuffer=e.readToBuffer())},rn.prototype.reset=function(){qi.prototype.reset.call(this),this.boxes=[],this.unhandleBuffer=null,this.avcCBox=void 0,this.hvcCBox=void 0,this.mp4aBox=void 0,this.media=null,this.moofParser.destroy()};var Bi=rn;Vi=function(e,t){return(Vi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var ji,Vi,qi,Wi,Gi,Ki,Xi,zi,$i,Yi,Qi=function(){return(Qi=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Ji=["loadedcodecinfo","loadedmetadata","updatedmetadata","loadeddata","error"],Zi=[Bi],en=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Vi(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(tn,ji=Ai),tn.prototype.createLoader=function(){var e=new Fi(this.options);return e.proxy(this,["progress","error"]),e.proxyOnce(this,["loadstart","loadend"]),e.once("progress",this.handleFirstLoadData),e},tn.prototype.createParser=function(e){return(e=new e(Qi(Qi({},this.options),{loader:this.loader}))).proxy(this,Ji),e},Object.defineProperty(tn.prototype,"skipFrame",{get:function(){return this.activeParser.skipFrame},set:function(e){Ni.info("设置skipFrame:",e),void 0!==e&&(this.options.skipFrame=e,this.activeParser.skipFrame=e)},enumerable:!1,configurable:!0}),Object.defineProperty(tn.prototype,"status",{get:function(){return this.activeParser.status},enumerable:!1,configurable:!0}),Object.defineProperty(tn.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),tn.prototype.parse=function(e){Ni.info("执行parse"),this.loader.reset(),this.handleFirstLoadData({offset:0,data:e}),this.activeParser.onLoadEnd()},tn.prototype.load=function(e){return Ni.info("执行load",e),this.loader.destroy(),this.loader=this.createLoader(),this.loader.load(e)},tn.prototype.seek=function(e){return Ni.info("执行seek",e),this.activeParser.seek(e)},tn.prototype.suspend=function(){return this.activeParser.suspend()},tn.prototype.resume=function(){return this.activeParser.resume()},tn.prototype.destroy=function(){Ni.info("执行destory"),this.loader.destroy(),this.activeParser.destroy(),this.removeAllListeners()},tn);function tn(e){void 0===e&&(e={});var t=ji.call(this)||this;return t.loader=new Fi,t.parserClasses=Zi,t.logger=Ni,t.handleFirstLoadData=function(e){var r,i;e&&((i=t.parserClasses.find((function(t){return t.probe(e.data)})))?(r=t.activeParser.formatType,t.activeParser.destroy(),t.activeParser=t.createParser(i),Ni.info("切换parser, ".concat(Er[r]," -> ").concat(Er[t.activeParser.formatType])),t.emit("parserchange",void 0),t.activeParser.onProgress(e)):(i="未找到对应的Parser, Byte数据: "+e.data.slice(0,20).join(","),Ni.error(i),t.emit("error",{code:x.PARSER,message:i})))},t.options=e,t.loader=t.createLoader(),t.activeParser=t.createParser(t.parserClasses[0]),t.logger.info("demuxer options",e),t}function rn(e){var t=qi.call(this,e=void 0===e?{}:e)||this;return t.media=null,t.unhandleBuffer=null,t.formatType=Er.MP4,t.boxes=[],t._handleBoxLoad=function(e){var r,i,n,o,a,s,l,c,u,p,d=e.header.type;t._handleCodecBoxLoaded(d),"hvcC"===d?t.hvcCBox=e:"hvc1"===d||"hev1"===d?t.hvcCBox&&(t.hvcCBox.codecTag=d):"avcC"===d?t.avcCBox=e:"esds"===d?t.esdsBox=e:"mp4a"===d?t.mp4aBox=e:"moov"===d?(p=q.mapBoxToJSON(e),t.media=t.moovParser.createMedia(p),t.moofParser.init({media:t.media}),a=(p=t.mp4aBox||{}).sampleRate,r=void 0===a?0:a,a=p.sampleSize,i=void 0===a?0:a,a=p.channelCount,n=void 0===a?0:a,a=(p=t.esdsBox||{}).audioObjectType,o=void 0===a?0:a,a=p.codec,s=void 0===a?"":a,l=[],c=[],u=[],t.hvcCBox?(c=t.hvcCBox.vps,u=t.hvcCBox.pps,l=t.hvcCBox.sps):t.avcCBox&&(u=t.avcCBox.pps,l=t.avcCBox.sps),t.metadata={formatType:Er.MP4,live:!!t.options.live,progressive:!!t.options.progressive,url:t.loader.url,basePTS:0,baseDTS:0,duration:t.media.options.duration,timescale:t.media.options.timeScale,tracks:t.media.getTracks().map((function(e){var a,p,d,h={};switch(h.id=e.options.id,h.type=e.options.type,h.timescale=e.options.timeScale,h.baseDTS=0,h.basePTS=0,h.type){case wr.VIDEO:h.width=e.options.width,h.height=e.options.height,h.vps=c,h.sps=l,h.pps=u,h.rotate=(a=e.options.matrix).length<5||(p=Math.hypot(a[0],a[3]),d=Math.hypot(a[1],a[4]),0===p)||0===d?0:180*Math.atan2(a[1]/d,a[0]/p)/Math.PI,h.pixelRatio=[],h.codec=t.hvcCBox?t.hvcCBox.codec:(null==(d=t.avcCBox)?void 0:d.codec)||"",h.codecTag=t.hvcCBox?t.hvcCBox.codecTag:void 0;break;case wr.AUDIO:h.audioObjectType=o,h.sampleRate=r,h.sampleSize=i,h.channelCount=n,h.codec=s;break;default:h.type=wr.UNKNOWN}return h}))},p=Number(t.options.offsetTime),t.metadata.progressive&&0<p&&t.seek(p),Ni.info("loadedmetadata metadata:",t.metadata),t.emit("loadedmetadata",t.metadata)):"moof"===d&&(Ni.info("检测到moof box被加载，当前素材为fMP4"),t.moofParser.parse(q.mapBoxToJSON(e)))},t._handleCodecBoxLoaded=function(e){var r=["hvc1","hev1","avc1"].find((function(t){return t===e}));r&&t.emit("loadedcodecinfo",r)},t.convertSampleToPacket=function(e){var r,i,n,o,a;return e.trackType===wr.VIDEO&&(t.hvcCBox||t.avcCBox)?(a=e.data,r=e.isSync,i=(n=t.hvcCBox||t.avcCBox).lengthSizeMinusOne,n=n.codec,o=v.extractAVCCNAL(a,i),a=!1,t.hvcCBox&&(a=o.every((function(e){return C.isNonRef(e)}))),r&&(t.hvcCBox?(t.hvcCBox.pps.forEach((function(e){return o.unshift(e)})),t.hvcCBox.sps.forEach((function(e){return o.unshift(e)})),t.hvcCBox.vps.forEach((function(e){return o.unshift(e)}))):t.avcCBox&&(t.avcCBox.pps.forEach((function(e){return o.unshift(e)})),t.avcCBox.sps.forEach((function(e){return o.unshift(e)})))),{codec:n,trackId:e.trackId,trackType:e.trackType,isLast:e.isLast,dts:e.dts,pts:e.cts+e.dts,isSync:e.isSync,isNonRef:a,data:o,size:o.reduce((function(e,t){return e+t.byteLength}),0),offset:e.offset}):e.trackType===wr.AUDIO&&t.esdsBox?{codec:t.esdsBox.codec,trackId:e.trackId,trackType:e.trackType,dts:e.dts,pts:e.cts+e.dts,isLast:e.isLast,isSync:!0,isNonRef:!1,data:[e.data],size:e.data.byteLength,offset:e.offset}:void 0},t.options=e,t.moovParser=new yi,t.moofParser=new _i,e.sub||t.on("loadedbox",t._handleBoxLoad),t}function nn(e){var t=Gi.call(this)||this;return t.skipFrame=w.DEFAULT,t.metadata=null,t.options=e,t.onProgress=t.onProgress.bind(t),t.onLoadEnd=t.onLoadEnd.bind(t),t.originLoader=new Fi(t.options),t.customLoader=e.loader,t.loader.on("progress",t.onProgress),t.loader.on("loadend",t.onLoadEnd),t.skipFrame=e.skipFrame||w.DEFAULT,t}function on(){var e=null!==Xi&&Xi.apply(this,arguments)||this;return e.xhr=null,e._timer=-1,e._resolve=function(e){},e.triggerTimeout=function(){e.abort(),e._handleError(new Error("加载超时，请重试"))},e}function an(){var e=null!==$i&&$i.apply(this,arguments)||this;return e.controller=null,e.timer=-1,e.abort=function(){clearTimeout(e.timer),e.controller&&!e.controller.signal.aborted&&(e.controller.abort(),e.controller=null),e._changeStatus(Ri.IDLE)},e.triggerTimeout=function(){e.abort(),e._handleError(new Error("加载超时，请重试"))},e}}(),i;function e(i){var n=r[i];return void 0!==n||(n=r[i]={exports:{}},t[i](n,n.exports,e)),n.exports}var t,r,i},"object"==typeof r&&"object"==typeof t?t.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof r?r.VideoxDemux=i():e.VideoxDemux=i()},{"es6-promise":8}],52:[function(e,t,r){function i(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()}var n=e("./vttparse");t.exports={parse:function(e,t,r){e=e.trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n");var o,a=[],s=new n;s.oncue=function(e){e.id=i(e.startTime)+i(e.endTime)+i(e.text),e.text=decodeURIComponent(escape(e.text)),e.isBig=!1;var t=e.text.split("#xywh=");2==t.length&&(t=t[1].split(","),e.x=t[0],e.y=t[1],e.w=t[2],e.h=t[3],e.isBig=!0),0<e.endTime&&a.push(e)},s.onparsingerror=function(e){o=e},s.onflush=function(){o&&r?(r(o),console.log(o)):t(a)},e.forEach((function(e){s.parse(e+"\n")})),s.flush()}}},{"./vttparse":54}],53:[function(e,t,r){function i(e){return"string"==typeof e&&!!s[e.toLowerCase()]&&e.toLowerCase()}function n(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)e[r]=i[r]}return e}function o(e,t,r){var o=this,s=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),l={},c=(s?o=document.createElement("custom"):l.enumerable=!0,o.hasBeenReset=!1,""),u=!1,p=e,d=t,h=r,f=null,y="",_=!0,g="auto",v="start",m=50,S="middle",b=50,T="middle";if(Object.defineProperty(o,"id",n({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(o,"pauseOnExit",n({},l,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(o,"startTime",n({},l,{get:function(){return p},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",n({},l,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",n({},l,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",n({},l,{get:function(){return f},set:function(e){f=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",n({},l,{get:function(){return y},set:function(e){if(!1===(e="string"==typeof e&&!!a[e.toLowerCase()]&&e.toLowerCase()))throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",n({},l,{get:function(){return _},set:function(e){_=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",n({},l,{get:function(){return g},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",n({},l,{get:function(){return v},set:function(e){if(!(e=i(e)))throw new SyntaxError("An invalid or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",n({},l,{get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",n({},l,{get:function(){return S},set:function(e){if(!(e=i(e)))throw new SyntaxError("An invalid or illegal string was specified.");S=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",n({},l,{get:function(){return b},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",n({},l,{get:function(){return T},set:function(e){if(!(e=i(e)))throw new SyntaxError("An invalid or illegal string was specified.");T=e,this.hasBeenReset=!0}})),o.displayState=void 0,s)return o}var a,s;t.exports="undefined"!=typeof window&&window.VTTCue?window.VTTCue:(a={"":!0,lr:!0,rl:!0},s={start:!0,middle:!0,end:!0,left:!0,right:!0},o.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},o)},{}],54:[function(e,t,r){function i(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}}var n=e("./vttcue");function o(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[]}function a(){this.values=Object.create(null)}function s(e,t,r,i){var n,o,a=i?e.split(i):[e];for(n in a)"string"==typeof a[n]&&2===(o=a[n].split(r)).length&&t(o[0],o[1])}a.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var l=new n(0,0,0),c="middle"===l.align?"middle":"center";function u(e,t,r){var i,n,o=e;function u(){var t,r=(r=(r=e).match(/^(\d+):(\d{2})(:\d{2})?(\.\d{3})?/))?(t=(t=r[4])&&t.replace(".",""),r[3]?i(r[1],r[2],r[3].replace(":",""),t):59<r[1]?i(r[1],r[2],0,t):i(0,r[1],r[2],t)):null;function i(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+(0|i)/1e3}if(null===r)throw new Error("Malformed timestamp: "+o);return e=e.replace(/^[^\sa-zA-Z-]+/,""),r}function p(){e=e.replace(/^\s+/,"")}if(p(),t.startTime=u(),p(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+o);e=e.substr(3),p(),t.endTime=u(),p(),i=e,n=new a,s(i,(function(e,t){switch(e){case"region":for(var i=r.length-1;0<=i;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];n.integer(e,a),n.percent(e,a)&&n.set("snapToLines",!1),n.alt(e,a,["auto"]),2===o.length&&n.alt("lineAlign",o[1],["start",c,"end"]);break;case"position":o=t.split(","),n.percent(e,o[0]),2===o.length&&n.alt("positionAlign",o[1],["start",c,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",c,"end","left","right"])}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical",""),"auto"===(i=n.get("line","auto"))&&-1===l.line&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",c),"auto"===(i=n.get("position","auto"))&&50===l.position&&(i="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=i}o.prototype={parse:function(e){var t=this;function r(){for(var e=0,r=(r=t.buffer).replace(/<br(?: \/)?>/gi,"\n");e<r.length&&"\r"!==r[e]&&"\n"!==r[e];)++e;var i=r.substr(0,e);return"\r"===r[e]&&++e,"\n"===r[e]&&++e,t.buffer=r.substr(e),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var i,o=(i=r()).match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:i=r(),t.state){case"HEADER":/:/.test(i)?s(i,(function(e,t){"Region"===e&&console.log("parse region",t)}),/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new n(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{u(i,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var l=-1!==i.indexOf("--\x3e");if(!i||l&&(a=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&"HEADER"!==this.state||(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}},t.exports=o},{"./vttcue":53}],55:[function(e,t,r){function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,r){t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1})}var a=e("./vtt-parser"),s=e("./vtt-renderer"),l=e("./vtt-loader"),c=e("../../player/base/event/eventtype"),u=e("../../lib/ua"),p=e("../../lib/event"),d=e("../../ui/component/util"),h=(e=function(){function e(e){this.parser=null,this.activeRenderer=null,this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.tickTimer=null,this.prevPosition=null,this._enabled=!1,this._isShow=!1,this.sleeper=new h,this.player=(e=e||{}).player,this.loader=new l,this.parser=new a,this.createRendererInstance(),this.bindEvents()}var t=e.prototype;return t.bindEvents=function(){var e,t=this,r=this,n=this.player,o=(n.on(c.Private.TextTrackFounded,(function(e){if("user"===e.paramData.from)t.hasUserTracks=!0;else if(t.hasUserTracks)return;(e=e.paramData.textTracks)&&e.length&&(t.enabled=!0,t.trackConfigs=e.map((function(e){return i({},e,{label:e.label||e.srclang,language:e.srclang})})),t.trackConfigs.forEach((function(e){t.activeRenderer.addTrack(e),"always"===n.getOptions().controlBarVisibility&&t.activeRenderer.forceUpdateCuesStyle({transform:"translateY(-44px)"},t.parser.cues)})))})),n.on(c.Private.UserTrackReset,(function(){t.hasUserTracks=!1})),u.IS_IOS?(e=!1,n.on(c.Player.RequestFullScreen,(function(){e=!0})),p.on(n.tag,"webkitendfullscreen",(function(){e=!1})),p.on(n.tag.textTracks,"change",(function(){var r;t.sleeper.isSleep||(t.sleeper.sleep(1e3),t.isCustomRenderer)||e&&(r=n.tag.textTracks,(r=Array.from(r).find((function(e){return"showing"===e.mode})))?t.activeTrackConfig&&t.activeTrackConfig.language===r.language||(t.switchTrack(r.language),n.trigger(c.Private.SelectorValueChange,{type:"cc",text:r.label})):n.trigger(c.Private.CCStateChanged,{value:"off",lang:""}))}))):(n.on(c.Player.RequestFullScreen,this.adjustLayout.bind(this)),n.on(c.Player.CancelFullScreen,this.adjustLayout.bind(this)),o=d.debounce((function(){r.isCustomRenderer&&r.activeRenderer.resetCuesStyle(t.parser.cues)}),100),p.on(window,"resize",o)),d.throttle((function(){r.isShow&&(r.activeRenderer.forceUpdateCuesStyle({transform:"translateY(-44px)"},r.parser.cues),r.player.paused())&&(r.activeRenderer.hide(),r.activeRenderer.restore())}),100));n.on(c.Private.ShowBar,o),o=d.throttle((function(){r.isShow&&(r.activeRenderer.forceUpdateCuesStyle({transform:"none"},r.parser.cues),r.player.paused())&&(r.activeRenderer.hide(),r.activeRenderer.restore())}),100),n.on(c.Private.HideBar,o),n.on(c.Private.VttHide,(function(){t.hide()})),n.on(c.Private.VttSwitchTrack,(function(e){t.switchTrack(e.paramData)})),n.on(c.Private.VttClearTracks,(function(){t.reset()}))},t.createRendererInstance=function(e){this.activeRenderer&&this.activeRenderer.dispose();var t=this.player.getOptions(),r={player:this.player};this.adaptPlatform(),e?e===s.VttBasicRenderer.RENDER_TYPE_NATIVE?this.activeRenderer=new s.NativeRenderer(r):(r.overlayId=this.getOverlayId(),this.activeRenderer=new s.CustomRenderer(r)):t.useNativeTextRenderer?this.activeRenderer=new s.NativeRenderer(r):(r.overlayId=this.getOverlayId(),this.activeRenderer=new s.CustomRenderer(r))},t.switchTrack=function(e){var t,r=this;this.trackConfigs&&this.trackConfigs.length&&(this.activeTrackConfig&&(this.parser.dispose(),this.parser=new a,this.activeRenderer.clearTrack(this.activeTrackConfig.language),this.activeRenderer.hide()),this.activeTrackConfig=e,t=this.trackConfigs.find((function(t){return t.language===e})))&&(t=t._loaded?"":(t||{}).src,this.loadVtt(t,(function(){r.parseVtt(),r.activeRenderer.addCues(r.parser.cues,r.activeTrackConfig.language),r.show()})))},t.adaptPlatform=function(){var e=this.player.getOptions();u.IS_IOS&&(e.useNativeTextRenderer=!0)},t.loadVtt=function(e,t){var r=this;e?this.loader.loadFromUrl(e,(function(e){r.activeTrackConfig._loaded=!0,r.vttText[r.activeTrackConfig.language]=e,t&&t()})):t&&t()},t.show=function(){this._isShow=!0,this.isCustomRenderer&&this.startTickTimeListener(),this.activeRenderer.show(this.activeTrackConfig.language)},t.hide=function(){this._isShow=!1,this.clearTicker(),this.activeRenderer.hide()},t.switchRenderer=function(e){var t=this,r=s.VttBasicRenderer.RENDER_TYPE_NATIVE,i=s.VttBasicRenderer.RENDER_TYPE_CUSTOM;(e===r&&this.activeRenderer.type!==r||e===i&&this.activeRenderer.type!==i)&&(this.createRendererInstance(e),this.trackConfigs.forEach((function(e){return t.activeRenderer.addTrack(e)})),this.activeRenderer.addCues(this.parser.cues,this.activeTrackConfig.language),this.show())},t.parseVtt=function(){this.parser.parse(this.vttText[this.activeTrackConfig.language])},t.adjustLayout=function(){var e=this;this.isShow&&this.isCustomRenderer&&(this.activeRenderer.hide(),setTimeout((function(){e.activeRenderer.restore()}),300))},t.startTickTimeListener=function(){var e=this;this.clearTicker(),this.tick((function(){var t=e.player.getCurrentTime();isNaN(t)||e.activeRenderer.renderCues(e.findTargetCues(t))}))},t.tick=function(e){var t=this;this.tickTimer=requestAnimationFrame((function(){try{e()}catch(e){console.log("e",e)}t.tick(e)}))},t.clearTicker=function(){this.tickTimer&&(cancelAnimationFrame(this.tickTimer),this.tickTimer=null)},t.getOverlayId=function(){var e=(document.getElementsByClassName("prism-text-overlay")||[])[0];if(e)return e.id},t.findTargetCues=function(e){if(this.parser&&e!==this.prevPosition){this.prevPosition=e;for(var t=[],r=0;r<this.parser.cues.length;r++){var i=this.parser.cues[r];if(e>=i.startTime&&e<=i.endTime)t.push(i);else if(e<i.startTime)break}return t}},t.reset=function(){this.clearTicker(),this.parser&&this.parser.reset(),this.activeRenderer&&this.activeRenderer.reset()},t.dispose=function(){this.clearTicker(),this.parser&&(this.parser.dispose(),this.parser=null),this.activeRenderer&&(this.activeRenderer.dispose(),this.activeRenderer=null),this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.prevPosition=null,this._enabled=!1,this._isShow=!1},o(e,[{key:"isShow",get:function(){return this._isShow}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e}},{key:"isCustomRenderer",get:function(){if(this.activeRenderer)return this.activeRenderer.type===s.VttBasicRenderer.RENDER_TYPE_CUSTOM}},{key:"activeTrackConfig",get:function(){var e;return null==(e=this.trackConfigs)?void 0:e.find((function(e){return e._isActive}))},set:function(e){this.trackConfigs.forEach((function(t){return t._isActive=t.language===e}))}}]),e}(),function(){function e(){this.value=!1,this.timer=null}return e.prototype.sleep=function(e){var t=this;this.timer&&clearTimeout(this.timer),this.value=!0,this.timer=setTimeout((function(){t.value=!1}),e)},o(e,[{key:"isSleep",get:function(){return this.value}}]),e}());t.exports=e},{"../../lib/event":32,"../../lib/ua":48,"../../player/base/event/eventtype":69,"../../ui/component/util":157,"./vtt-loader":57,"./vtt-parser":58,"./vtt-renderer":59}],56:[function(e,t,r){function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function n(e,t){e.prototype=Object.create(t.prototype),o(e.prototype.constructor=e,t)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,r){t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1})}var l=e("../../lib/data"),c={DISABLED:"disabled",SHOWING:"showing",HIDDEN:"hidden"},u={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",METADATA:"metadata",CHAPTERS:"chapters"},p=(e=function(e){function t(t){var r=(t=i({},t=void 0===t?{}:t,{kind:t.kind||u.SUBTITLES,language:t.language||t.srclang||""})).mode||c.DISABLED;return t.default,-1<[u.METADATA,u.CHAPTERS].indexOf(t.kind)&&(r=c.HIDDEN),t.mode=r,(r=e.call(this,t)||this)._cues=[],r._activeCues=[],r._settings={},r._nativeTrack=null,r._extData={},r._settings=t,r}n(t,e);var r=t.prototype;return r.setExtData=function(e){this._extData=i({},this._extData,e=void 0===e?{}:e)},r.addCue=function(e){this._cues.push(e),this.nativeTrack&&this.nativeTrack.addCue(e)},r.removeCue=function(e){this._cues=this._cues.filter((function(t){return t!==e})),this.nativeTrack&&this.nativeTrack.removeCue(e)},s(t,[{key:"default",get:function(){return this._settings.default}},{key:"mode",get:function(){return this._settings.mode},set:function(e){this._settings.mode=e,this.nativeTrack&&(this.nativeTrack.mode=e)}},{key:"language",get:function(){return this._settings.language},set:function(e){this._settings.language=e,this.nativeTrack&&(this.nativeTrack.language=e)}},{key:"cues",get:function(){return this._cues}},{key:"activeCues",get:function(){return this._activeCues}},{key:"nativeTrack",get:function(){return this._nativeTrack},set:function(e){this._nativeTrack=e}}]),t}(function(){function e(e){this._id=(e=void 0===e?{}:e).id||"prism-track-"+l.guid(),this._kind=e.kind||"",this._language=e.language||"",this._label=e.label||""}return s(e,[{key:"label",get:function(){return this._label},set:function(e){this._label=e}},{key:"id",get:function(){return this._id}},{key:"kind",get:function(){return this._kind}},{key:"language",get:function(){return this._language}}]),e}()),function(e){function t(){return e.call(this)||this}return n(t,e),t}(function(){function e(){this._trackList=[]}return e.prototype.addTrack=function(e){var t=this.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this._trackList[t]}}),-1===this._trackList.indexOf(e)&&this._trackList.push(e)},s(e,[{key:"length",get:function(){return this._trackList.length}},{key:"list",get:function(){return this._trackList}}]),e}()));t.exports.TextTrack=e,t.exports.TextTrackList=p,t.exports.TRACK_MODE=c,t.exports.TRACK_KIND=u},{"../../lib/data":29}],57:[function(e,t,r){var i=e("../io");t.exports=function(){function e(){}return e.prototype.loadFromUrl=function(e,t){i.get(e,(function(e){t(e)}),(function(e,t){console.log("ERR",e,t)}))},e}()},{"../io":39}],58:[function(e,t,r){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=e("./vttjs").WebVTT;e=function(){function e(){var e=this;this._cues=[],this._regions=[],this.parser=new n.Parser(window,n.StringDecoder()),this.parser.onregion=function(t){e._regions.push(t)},this.parser.oncue=function(t){e._cues.push(t)},this.parser.onflush=function(){},this.parser.onparsingerror=function(e){console.log("onparsingerror",e)}}var t,r=e.prototype;return r.parse=function(e){this.parser.parse(e),this.parser.flush()},r.reset=function(){this.parser.flush(),this._cues=[],this._regions=[]},r.dispose=function(){this.parser.flush(),this.parser=null,this._cues=[],this._regions=[]},r=e,(t=[{key:"cues",get:function(){return this._cues}}])&&i(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),e}(),t.exports=e},{"./vttjs":60}],59:[function(e,t,r){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),a(e.prototype.constructor=e,t)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e("../../player/base/event/eventtype");var s=e("./text-track"),l=e("./vttjs").WebVTT,c=e("../../lib/dom"),u=s.TextTrack,p=s.TextTrackList,d=s.TRACK_MODE,h=(s.TRACK_KIND,function(){function e(e){this.player=null,this.type=null,this.trackList=null,this.overrideStyle={},this.player=(e=e||{}).player,this.defineTextTrackGetter(),this.trackList=new p}var t=e.prototype;return t.log=function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];(e=console).log.apply(e,["[LOG:"+this.type+"]"].concat(r))},t.defineTextTrackGetter=function(){var e=this;this.player.getTextTracks=function(){return e.trackList||[]}},t.show=function(e){(e=this.findTrackByLanguage(e))&&(e.mode=d.SHOWING)},t.findTrackByLanguage=function(e){return this.trackList.list.find((function(t){return t.language===e}))},t.clearCurrentCues=function(e){if(e){var t=e.mode;if(t===d.DISABLED&&(e.mode=d.HIDDEN),e.cues)for(var r=e.cues.length;r--;)e.removeCue(e.cues[r]);t===d.DISABLED&&(e.mode=t)}},t.addTrack=function(){},t.addCues=function(){},t.restore=function(){},t.renderCues=function(){},t.updateCuesStyle=function(){},t.clearTrack=function(e){this.clearCurrentCues(this.findTrackByLanguage(e))},t.clearAllTracks=function(){var e=this;this.trackList&&this.trackList.length&&this.trackList.list.forEach((function(t){t.mode=d.DISABLED,e.clearCurrentCues(t)})),this.trackList=new p},t.reset=function(){this.hide(),this.clearAllTracks()},t.dispose=function(){this.hide(),this.clearAllTracks(),this.player&&this.player.getTextTracks&&(this.player.getTextTracks=null),this.player=null,this.type=null},e}());h.RENDER_TYPE_CUSTOM="CUSTOM",h.RENDER_TYPE_NATIVE="NATIVE",e=function(e){function t(t){var r=e.call(this,t)||this;return r.overlayId=null,r.currentCues=null,t=t||{},r.type=h.RENDER_TYPE_CUSTOM,r.overlayId=t.overlayId,r}o(t,e);var r=t.prototype;return r.addTrack=function(e){var t=new u({kind:e.kind,label:e.label,language:e.language});t.mode=e.default?d.SHOWING:d.DISABLED,this.trackList.addTrack(t)},r.hide=function(){return l.processCues(window,[],document.getElementById(this.overlayId))},r.restore=function(){this.currentCues&&(this.currentCues.forEach((function(e){return e.displayState=null})),l.processCues(window,this.currentCues,this.overlayEl),this.updateCuesStyle(this.currentCues))},r.renderCues=function(e){e&&(this.currentCues=e,this.overlayEl||(this.overlayEl=document.getElementById(this.overlayId)),l.processCues(window,e,this.overlayEl),this.updateCuesStyle(e))},r.updateCuesStyle=function(e){var t=this;e.forEach((function(e){var r,i=e.displayState;i._styleSetDone||i&&(i.setAttribute("class","prism-cue"),t.overlayEl||(t.overlayEl=document.getElementById(t.overlayId)),e=t.overlayEl.offsetWidth,r=t.overlayEl.offsetHeight,(e=Math.min(e,r))&&(i.style.fontSize=.05*e+"px",i.style.height="auto",i.style.top="auto"),Object.keys(t.overrideStyle).forEach((function(e){t.tryUpdateStyle(i,e,t.overrideStyle[e])})),i._styleSetDone=!0)}))},r.updateOverrideStyle=function(e){this.overrideStyle=n({},this.overrideStyle,e=void 0===e?{}:e)},r.forceUpdateCuesStyle=function(e,t){void 0===t&&(t=[]),this.updateOverrideStyle(e=void 0===e?{}:e),this.resetCuesStyle(t)},r.tryUpdateStyle=function(e,t,r){try{e.style[t]=r}catch(e){}},r.resetCuesStyle=function(e){e&&e.length&&e.forEach((function(e){e.displayState&&(e.displayState=null)}))},r.dispose=function(){e.prototype.dispose.call(this),this.overlayId=null,this.currentCues=null},t}(h),s=function(e){function t(t){return(t=e.call(this,t=void 0===t?{}:t)||this).type=h.RENDER_TYPE_NATIVE,t}o(t,e);var r,n=t.prototype;return n.addTrack=function(e){var t=this.player.tag,r=Array.from(t.textTracks)||[],i=r.find((function(t){return t.language===e.language}));(this.log("sameLangTrack",i,r),(r=i?(this.clearCurrentCues(i),i.kind=e.kind,i.label=e.label,i):t.addTextTrack(e.kind,e.label,e.language)).mode=e.default?d.SHOWING:d.DISABLED,i=new u(e)).nativeTrack=r,this.trackList.addTrack(i)},n.addCues=function(e,t){var r;e&&e.length&&(r=this.trackList.list.find((function(e){return e.language===t})))&&e.forEach((function(e){r.addCue(e)}))},n.hide=function(){this.trackList.list.forEach((function(e){e.mode=e.mode===d.SHOWING?d.HIDDEN:e.mode}))},n.invalidAllTracks=function(){},n.forceUpdateCuesStyle=function(e,t){c.addCssByStyle("video::-webkit-media-text-track-container{transform: "+e.transform+";}")},n.dispose=function(){e.prototype.dispose.call(this)},n=t,(r=[{key:"activeTrack",get:function(){return this.trackList.list.find((function(e){return e.mode===d.SHOWING}))}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(h),t.exports.VttBasicRenderer=h,t.exports.CustomRenderer=e,t.exports.NativeRenderer=s},{"../../lib/dom":31,"../../player/base/event/eventtype":69,"./text-track":56,"./vttjs":60}],60:[function(e,t,r){t.exports={WebVTT:e("./vtt.js").WebVTT}},{"./vtt.js":61}],61:[function(e,t,r){function i(e,t){return void 0===t&&(t=1),"rgba("+[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16),t].join(",")+")"}var n,o=1;function a(e,t,r){switch(r){case"webvtt.font.color":case"webvtt.font.opacity":var a=Services.prefs.getCharPref("webvtt.font.color"),s=Services.prefs.getIntPref("webvtt.font.opacity")/100;n.fontSet=i(a,s);break;case"webvtt.font.scale":o=Services.prefs.getIntPref("webvtt.font.scale")/100;break;case"webvtt.bg.color":case"webvtt.bg.opacity":a=Services.prefs.getCharPref("webvtt.bg.color"),s=Services.prefs.getIntPref("webvtt.bg.opacity")/100,n.backgroundSet=i(a,s);break;case"webvtt.edge.color":case"webvtt.edge.type":a=Services.prefs.getIntPref("webvtt.edge.type"),s=Services.prefs.getCharPref("webvtt.edge.color"),n.edgeSet=["","0px 0px ","4px 4px 4px ","-2px -2px ","2px 2px "][a]+i(s)}}"undefined"!=typeof Services&&(n={},["webvtt.font.color","webvtt.font.opacity","webvtt.font.scale","webvtt.bg.color","webvtt.bg.opacity","webvtt.edge.color","webvtt.edge.type"].forEach((function(e){a(0,0,e),Services.prefs.addObserver(e,a,!1)})));var s=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return l.prototype=e,new l};function l(){}function c(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function u(e){function t(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+(0|i)/1e3}return(e=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/))?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null}function p(){this.values=s(null)}function d(e,t,r,i){var n,o,a=i?e.split(i):[e];for(n in a)"string"==typeof a[n]&&2===(o=a[n].split(r)).length&&t(o[0],o[1])}((c.prototype=s(Error.prototype)).constructor=c).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},p.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var h={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},f={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},y={v:"title",lang:"lang"},_={rt:"ruby"};function g(e,t){function r(e){return h[e]}for(var i,n,o,a,s,l,c,p=e.document.createElement("div"),d=p,g=[];null!==(c=void 0,c=t?(c=(c=t.match(/^([^<]*)(<[^>]+>?)?/))[1]||c[2],t=t.substr(c.length),c):null);)"<"===c[0]?"/"===c[1]?g.length&&g[g.length-1]===c.substr(2).replace(">","")&&(g.pop(),d=d.parentNode):(o=u(c.substr(1,c.length-2)))?(i=e.document.createProcessingInstruction("timestamp",o),d.appendChild(i)):(n=c.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(o=n[1],a=n[3],l=s=void 0,i=(l=f[o])?((s=e.document.createElement(l)).localName=l,(l=y[o])&&a&&(s[l]=a.trim()),s):null)&&(o=d,_[(l=i).localName]&&_[l.localName]!==o.localName||(n[2]&&(i.className=n[2].substr(1).replace("."," ")),g.push(n[1]),d.appendChild(i),d=i)):d.appendChild(e.document.createTextNode(function(e){for(;n=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(n[0],r);return e}(c)));return p}var v=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function m(){}function S(e,t,r){var i="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent),o="rgba(255, 255, 255, 1)",a="rgba(0, 0, 0, 0.8)",s="",l=(void 0!==n&&(o=n.fontSet,a=n.backgroundSet,s=n.edgeSet),i&&(o="rgb(255, 255, 255)",a="rgb(0, 0, 0)"),m.call(this),this.cue=t,this.cueDiv=g(e,t.text),o={color:o,backgroundColor:a,textShadow:s,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"},i||(o.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",o.unicodeBidi="plaintext"),this.applyStyles(o,this.cueDiv),this.div=e.document.createElement("div"),o={textAlign:"middle"===t.align?"center":t.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},i||(o.direction=function(e){var t=[],r="";if(e&&e.childNodes)for(n(t,e);r=function e(t){var r,i,o;return t&&t.length?(i=(r=t.pop()).textContent||r.innerText)?(o=i.match(/^.*(\n|\r)/))?o[t.length=0]:i:"ruby"===r.tagName?e(t):r.childNodes?(n(t,r),e(t)):void 0:null}(t);)for(var i=0;i<r.length;i++)if(function(e){for(var t=0;t<v.length;t++){var r=v[t];if(e>=r[0]&&e<=r[1])return 1}}(r.charCodeAt(i)))return"rtl";return"ltr";function n(e,t){for(var r=t.childNodes.length-1;0<=r;r--)e.push(t.childNodes[r])}}(this.cueDiv),o.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"plaintext"),this.applyStyles(o),this.div.appendChild(this.cueDiv),0);switch(t.positionAlign){case"start":l=t.position;break;case"middle":l=t.position-t.size/2;break;case"end":l=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(l,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(l,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function b(e){var t,r,i,n,o="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent);e.div&&(t=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop,n=(n=(n=e.div.childNodes)&&n[0])&&n.getClientRects&&n.getClientRects(),e=e.div.getBoundingClientRect(),n=n?Math.max(n[0]&&n[0].height||0,e.height/n.length):0),this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||t,this.bottom=e.bottom||i+(e.height||t),this.width=e.width||r,this.lineHeight=void 0!==n?n:e.lineHeight,o&&!this.lineHeight&&(this.lineHeight=13)}function T(e,t,r,i){var n,o=new b(t),a=t.cue,s=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,r=t.textTrackList,i=0,n=0;n<r.length&&r[n]!==t;n++)"showing"===r[n].mode&&i++;return-1*++i}(a),l=[];if(a.snapToLines){switch(a.vertical){case"":l=["+y","-y"],n="height";break;case"rl":l=["+x","-x"],n="width";break;case"lr":l=["-x","+x"],n="width"}var c=o.lineHeight,u=c*Math.round(s),p=r[n]+c,d=l[0];Math.abs(u)>p&&(u=u<0?-1:1,u*=Math.ceil(p/c)*c),s<0&&(u+=""===a.vertical?r.height:r.width,l=l.reverse()),o.move(d,u)}else{var h=o.lineHeight/r.height*100;switch(a.lineAlign){case"middle":s-=h/2;break;case"end":s-=h}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}l=["+y","-x","+x","-y"],o=new b(t)}p=function(e,t){for(var n,o=new b(e),a=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(r,t[s])||e.within(r)&&e.overlapsAny(i);)e.move(t[s]);if(e.within(r))return e;var l=e.intersectPercentage(r);l<a&&(n=new b(e),a=l),e=new b(o)}return n||o}(o,l),t.move(p.toCSSCompatValues(r))}function E(){}m.prototype.applyStyles=function(e,t){for(var r in t=t||this.div,e)e.hasOwnProperty(r)&&(t.style[r]=e[r])},m.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(S.prototype=s(m.prototype)).constructor=S,b.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},b.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},b.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},b.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},b.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},b.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},b.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},b.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,r=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||r}},E.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},E.convertCueToDOMTree=function(e,t){return e&&t?g(e,t):null},E.processCues=function(e,t,r){if(!e||!t||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",r.appendChild(i),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return 1}(t))for(var n,a,s=[],l=b.getSimpleBoxPosition(i),c={font:Math.round(.05*l.height*100)/100*o+"px sans-serif"},u=0;u<t.length;u++)n=new S(e,a=t[u],c),i.appendChild(n.div),T(0,n,l,s),a.displayState=n.div,s.push(b.getSimpleBoxPosition(n));else for(var p=0;p<t.length;p++)i.appendChild(t[p].displayState)},(E.Parser=function(e,t){this.window=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof c))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function r(){for(var e=t.buffer,r=0;r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var i=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),i}function i(e){d(e,(function(e,r){var i;"Region"===e&&(e=r,i=new p,d(e,(function(e,t){switch(e){case"id":i.set(e,t);break;case"width":i.percent(e,t);break;case"lines":i.integer(e,t);break;case"regionanchor":case"viewportanchor":var r,n=t.split(",");2===n.length&&((r=new p).percent("x",n[0]),r.percent("y",n[1]),r.has("x")&&r.has("y"))&&(i.set(e+"X",r.get("x")),i.set(e+"Y",r.get("y")));break;case"scroll":i.alt(e,t,["up"])}}),/=/,/\s/),i.has("id"))&&((e=new t.window.VTTRegion).width=i.get("width",100),e.lines=i.get("lines",3),e.regionAnchorX=i.get("regionanchorX",0),e.regionAnchorY=i.get("regionanchorY",100),e.viewportAnchorX=i.get("viewportanchorX",0),e.viewportAnchorY=i.get("viewportanchorY",100),e.scroll=i.get("scroll",""),t.onregion&&t.onregion(e),t.regionList.push({id:i.get("id"),region:e}))}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var n,o=(n=r()).match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new c(c.Errors.BadSignature);t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:n=r(),t.state){case"HEADER":/:/.test(n)?i(n):n||(t.state="ID");continue;case"NOTE":n||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){t.state="NOTE";break}if(!n)continue;if(t.cue=new t.window.VTTCue(0,0,""),t.state="CUE",-1===n.indexOf("--\x3e")){t.cue.id=n;continue}case"CUE":try{!function(e,t,r){var i,n,o=e;function a(){var t=u(e);if(null===t)throw new c(c.Errors.BadTimeStamp,"Malformed timestamp: "+o);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=a(),s(),"--\x3e"!==e.substr(0,3))throw new c(c.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+o);e=e.substr(3),s(),t.endTime=a(),s(),i=e,n=new p,d(i,(function(e,t){switch(e){case"region":for(var i=r.length-1;0<=i;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];n.integer(e,a),n.percent(e,a)&&n.set("snapToLines",!1),n.alt(e,a,["auto"]),2===o.length&&n.alt("lineAlign",o[1],["start","middle","end"]);break;case"position":o=t.split(","),n.percent(e,o[0]),2===o.length&&n.alt("positionAlign",o[1],["start","middle","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","middle","end","left","right"])}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical",""),t.line=n.get("line","auto"),t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align","middle"),t.position=n.get("position","auto"),t.positionAlign=n.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}(n,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==n.indexOf("--\x3e");if(!n||s&&(a=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=n;continue;case"BADCUE":n||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),!e.cue&&"HEADER"!==e.state||(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new c(c.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},this.WebVTT=E},{}],62:[function(e,t,r){var i=e("../lib/io");function n(e){this._uploadDuration=e.logDuration||5,this._uploadCount=e.logCount||10,this._logReportTo=e.logReportTo,this._logs=[],this._retry=0,this._disposed=!1,this._supportLocalStorage=!0;var t,r=this;window&&(window.onbeforeunload=function(e){if(0<r._logs.length)if(r._supportLocalStorage)localStorage.setItem("__aliplayer_log_data",JSON.stringify(r._logs));else{r._report();for(var t=(new Date).getTime(),i=t;i<t+500;)i=(new Date).getTime()}});try{localStorage?(t=localStorage.getItem("__aliplayer_log_data"),localStorage.removeItem("__aliplayer_log_data"),t&&(this._logs=JSON.parse(t))):this._supportLocalStorage=!1}catch(e){this._supportLocalStorage=!1}this._start()}e("../lib/storage"),n.prototype.add=function(e){var t=this._logs.length;e.__time__=Math.round(new Date/1e3),0<t&&"4001"==e.e&&"4001"==(t=this._logs[t-1]).e&&t.__time__-e.__time__<5||(this._logs.push(e),(this._logs.length>this._uploadCount||"4001"==e.e||"2002"==e.e)&&this._report())},n.prototype.dispose=function(){this._report(),this._disposed=!0},n.prototype._start=function(){this._disposed=!1,this._retry=0,this._report()},n.prototype._report=function(e){var t,r,n;this._tickHandler&&(clearTimeout(this._tickHandler),this._tickHandler=null),0<(e=e||this._logs.splice(0,this._uploadCount)).length?(n={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(t=JSON.stringify({__logs__:e,__source__:""})).length},i.postWithHeader((r=this)._logReportTo,t,n,(function(e){r._tick()}),(function(t){0==r._retry?(r._retry=1,r._report(e)):r._tick()}))):this._tick()},n.prototype._tick=function(){var e;this._disposed||(this._retry=0,(e=this)._logs.length>this._uploadCount?e._report():this._tickHandler=setTimeout((function(){e._report()}),1e3*this._uploadDuration))},t.exports=n},{"../lib/io":39,"../lib/storage":47}],63:[function(e,t,r){function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}var n,o=e("../lib/oo"),a=e("../lib/object"),s=e("../lib/data"),l=e("../lib/io"),c=e("../lib/ua"),u=e("../config"),p=e("../player/base/event/eventtype"),d=e("./util"),h=e("./log"),f=0,y={STARTFETCHDATA:1003,COMPLETEFETCHDATA:1004,PREPARE:1101,PREPAREEND:1102,STARTPLAY:2e3,PLAY:2001,STOP:2002,PAUSE:2003,SEEK:2004,FULLSREEM:2005,QUITFULLSCREEM:2006,RESOLUTION:2007,RESOLUTION_DONE:2008,RECOVER:2010,SEEK_END:2011,SEEKED:2014,CANPLAY:2018,FETCHEDIP:2020,CDNDETECT:2021,DETECT:2022,HEVCINFO:2023,UNDERLOAD:3002,LOADED:3001,RETRY:3003,HEARTBEAT:9001,ERROR:4001,ERRORRETRY:4002,RTSFALLBACK:4003,SNAPSHOT:2027,ROTATE:2028,IMAGE:2029,THUMBNAILSTART:2031,THUMBNAILCOMPLETE:2032,CCSTART:2033,CCCOMPLETE:2034,AUDIOTRACKSTART:2033,AUDIOTRACKCOMPLETE:2034};e=o.extend({init:function(e,t,r){this.trackLog=r=void 0===r||r,this.player=e,this.requestId="",this.sessionId=s.guid(),this.playId=0,this.firstPlay=!0,this.osName=c.os.name,this.osVersion=c.os.version||"",this.exName=c.browser.name,this.exVersion=c.browser.version||"",this.lightSaasVideoId="",this._logService="",this._h265ProbeCost={},this.startPlayReported=!1,this.canplayReported=!1,this.seekingData={seekingStartTime:0},this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},t.logBatched&&(this._logService=new h(u)),r=this.player.getOptions(),e=t.from||"",r.isLive,t=r.isLive?"live":"vod";var i="pc",n=(c.IS_IPAD?i="pad":c.os.phone&&(i="phone"),this.encodeURL(c.getReferer())),o=c.getHref(),a=this.encodeURL(o),l="",p=(o&&(l=c.getHost(o)),o=u.h5Version,d.getUuid()),f=r.source?this.encodeURL(r.source):"",y=c.getHost(r.source),_=r.userId?r.userId+"":"0",g=this.sessionId,v=(new Date).getTime();r=r.traceId||"",this._userNetInfo={cdnIp:"",localIp:""},this.opt={APIVersion:"0.6.0",t:v,ll:"info",lv:"1.0",pd:"player",md:"saas_player",ui:"saas_player",sm:"play",os:this.osName,ov:this.osVersion,et:this.exName,ev:this.exVersion,uat:c.USER_AGENT,hn:"0.0.0.0",bi:e,ri:g,e:"0",args:"0",vt:t,tt:i,dm:"h5",av:o,uuid:p,vu:f,vd:y,ua:_,dn:"custom",cdn_ip:"0.0.0.0",app_n:l,r:n,pu:a,ti:r},this.bindEvent()},updateVideoInfo:function(e){e=e.from||"",this.opt.bi=e+"",this.updateSourceInfo()},updateSourceInfo:function(){var e,t=this.player.getOptions();t&&(e=t.source?this.encodeURL(t.source):"",t=c.getHost(t.source),this.opt.vu=e,this.opt.vd=t)},updateTraceId:function(e){this.opt.ti=e},updateLightSaasVideoId:function(e){this.lightSaasVideoId=e},replay:function(){this.reset(),this.player.trigger(p.Video.LoadStart),this.player.trigger(p.Video.LoadedMetadata),this.player.trigger(p.Video.LoadedData)},bindEvent:function(){var e=this;this.player.on(p.Player.Init,(function(){e._onPlayerInit()})),this.player.on(p.Video.LoadStart,(function(){e._onPlayerloadstart()})),this.player.on(p.Video.LoadedMetadata,(function(){e._onPlayerLoadMetadata()})),this.player.on(p.Video.LoadedData,(function(){e._onPlayerLoaddata()})),this.player.on(p.Player.H265PlayInfo,(function(t){e._onPlayerH265PlayInfo(t)})),this.player.on(p.Video.Play,(function(){e._onPlayerPlay()})),this.player.on(p.Video.Playing,(function(){e._onPlayerReady()})),this.player.on(p.Video.Ended,(function(){e._onPlayerFinish()})),this.player.on(p.Video.Pause,(function(){e._onPlayerPause()})),this.player.on("seeking",(function(){e._onPlayerSeeking()})),this.player.on("seeked",(function(){e._onPlayerSeeked()})),this.player.on(p.Private.SeekStart,(function(t){e._onPlayerSeekStart(t)})),this.player.on(p.Private.EndStart,(function(t){e._seekEndData=t.paramData})),this.player.on(p.Player.Waiting,(function(){e._onPlayerLoaded()})),this.player.on(p.Video.CanPlayThrough,(function(){})),this.player.on(p.Video.CanPlay,(function(){e._waitingDelayLoadingShowHandle&&(clearTimeout(e._waitingDelayLoadingShowHandle),e._waitingDelayLoadingShowHandle=null),e._onPlayerUnderload(),e._onPlayerCanplay()})),this.player.on(p.Video.TimeUpdate,(function(){e._waitingDelayLoadingShowHandle&&(clearTimeout(e._waitingDelayLoadingShowHandle),e._waitingDelayLoadingShowHandle=null),e._seekEndData&&e.player._seeking&&e._onPlayerSeekEnd()})),this.player.on(p.Player.Error,(function(){e._onPlayerError()})),this.player.on(p.Player.RequestFullScreen,(function(){e._onFullscreenChange(1)})),this.player.on(p.Player.CancelFullScreen,(function(){e._onFullscreenChange(0)})),this.player.on(p.Private.PREPARE,(function(t){e._prepareTime=(new Date).getTime(),e._log("PREPARE",{dn:t.paramData})})),this.player.on(p.Player.Snapshoted,(function(){e._log("SNAPSHOT")})),this.player.on(p.Private.Retry,(function(t){t=t.paramData||{},e._log("RETRY",{type:t.type,source:t.source})})),this.player.on(p.Player.RtsFallback,(function(t){var r;t=t.paramData||{},e._log("RTSFALLBACK",{reason:null==(r=t.reason)?void 0:r.error_msg,url:t.fallbackUrl})})),this.startHeartBeat.call(this)},removeEvent:function(){this.player.off("init"),this.player.off("ready"),this.player.off("ended"),this.player.off("play"),this.player.off("pause"),this.player.off("seekStart"),this.player.off("seekEnd"),this.player.off("canplaythrough"),this.player.off("playing"),this.player.off("timeupdate"),this.player.off("error"),this.player.off("fullscreenchange"),this.player.off("seeking"),this.player.off("seeked"),this.player.off(p.Private.PREPARE),this.player.off(p.Player.RtsFallback),this._logService&&this._logService.dispose(),clearInterval(n)},reset:function(){this.stucking=!1,this.startTimePlay=0,this.buffer_flag=0,this.firstPlay=!1,this.playId=0,this._LoadedData=0,this._canPlay=0,this.seekingStartTime=0,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},f=0,this.lightSaasVideoId=""},encodeURL:function(e){var t;return e?(t=this.player.getOptions())&&!t.logBatched?encodeURIComponent(e):e:""},startHeartBeat:function(){var e=this;n&&clearInterval(n),n=setInterval((function(){var t;e.player.getCurrentTime()&&(t=Math.floor(1e3*e.player.getCurrentTime()),e.player.paused()?e.prevStats.timestamp=0:++f>=e.player._options.heartHeatInterval&&e.updateStats.call(e,(function(r){var n=e._imageInfo()||{},o=e.player.tag.playbackRate,a=e.player.getVolume();n={vt:t,interval:1e3*f,imgLength:n.imgLength,playbackRate:o,volume:a},r&&(n=i({},n,{dls:Math.floor(r.downloadSpeedPerSec),dfps:Math.floor(r.decodedFramesPerSec),pkl:Number((r.packageLossRate||0).toFixed(2)),rtt:1e3*r.rtt})),e._log("HEARTBEAT",n),f=0})))}),1e3)},updateStats:function(e){e=e||function(){};var t=this;this.player.getStats().then((function(r){var i,n,o,a;r?(a=t.prevStats,r.bytesReceived=r.bytesReceived||0,r.framesDecoded=r.framesDecoded||0,r.packetsLost=r.packetsLost||0,r.packetsReceived=r.packetsReceived||0,i=((t.prevStats=r).timestamp-a.timestamp)/1e3,n=(r.bytesReceived-a.bytesReceived)/i,o=(r.framesDecoded-a.framesDecoded)/i,a=(r.packetsLost-a.packetsLost)/(r.packetsLost-a.packetsLost+(r.packetsReceived-a.packetsReceived)),r=r.rtt,e({downloadSpeedPerSec:n,decodedFramesPerSec:o,packageLossRate:a,rtt:r,timeGap:i})):e()})).catch((function(t){console.log("error in monitor getStats: ",t),e()}))},reportStartPlay:function(){this.startPlayReported||(this._log("STARTPLAY",{vt:(new Date).getTime()}),this.startPlayReported=!0)},reportCanplay:function(){this.canplayReported||(this._log("CANPLAY",{vt:(new Date).getTime()}),this.canplayReported=!0)},resetStartPlayReportFlag:function(){this.startPlayReported=!1},resetCanplayReportFlag:function(){this.canplayReported=!1},resetSessionId:function(){this.sessionId=s.guid()},resetVV:function(){this.startPlayReported&&(this.resetStartPlayReportFlag(),this.resetCanplayReportFlag(),this.resetSessionId())},updateH265ProbeCost:function(e){this._h265ProbeCost=e||{}},_onFullscreenChange:function(e){e?this._log("FULLSREEM",{}):this._log("QUITFULLSCREEM",{})},_onPlayerloadstart:function(){this.loadstartTime=(new Date).getTime(),this.playId=s.guid()},_onPlayerLoadMetadata:function(){this.loadMetaDataCost=(new Date).getTime()-this.loadstartTime},_onPlayerLoaddata:function(){var e,t,r,i;this._LoadedData||this.buffer_flag||(t=e=0,this.player.tag&&(e=this.player.tag.videoWidth,t=this.player.tag.videoHeight),e={tc:(new Date).getTime()-this._prepareTime,cc:(new Date).getTime()-this.loadstartTime,md:this.loadMetaDataCost,mi:JSON.stringify({type:"video",definition:e+"*"+t})},null!=(t=this.player.tag)&&t.duration&&(e.vdur=1e3*(null==(t=this.player.tag)?void 0:t.duration)),(5<this._h265ProbeCost.codecCost||5<this._h265ProbeCost.decoderCost)&&(t=Math.floor(this._h265ProbeCost.codecCost)||0,r=Math.floor(this._h265ProbeCost.decoderCost)||0,e.tc+=i=t+r,e.cc+=i,e.pcc=t,e.pdc=r),this._log("PREPAREEND",e)),this._LoadedData=1},_onPlayerH265PlayInfo:function(e){e=e.paramData||{},this._log("HEVCINFO",{cd:e.codecTag,rd:e.renderType,si:e.simd,sio:e.simdOption,wt:e.wasmThreads,wto:e.wasmThreadsOption})},_onPlayerCanplay:function(){this._canPlay=1,this.reportCanplay(),this._reportPlay(),this.prevStats.timestamp||this.updateStats.call(this)},_onPlayerInit:function(){this.stucking=!1,this.buffer_flag=0,this.pause_flag=0,this.startTimePlay=0,this._LoadedData=0,this._canPlay=0,this.seekingStartTime=0},_onPlayerReady:function(){this.startTimePlay||(this.startTimePlay=(new Date).getTime())},_onPlayerFinish:function(){this._log("STOP",{vt:Math.floor(1e3*this.player.getCurrentTime())}),this.reset()},_reportPlay:function(){var e;return!(this.buffer_flag||!this._LoadedData||!this.playstartTime||(this.first_play_time=(new Date).getTime(),e={dsm:"fix",tc:this.first_play_time-this.loadstartTime,fc:this.first_play_time-this.playstartTime},this._log("PLAY",e),this.buffer_flag=1,0))},_onPlayerPlay:function(){this.playstartTime=(new Date).getTime(),0==this.playId&&(this.playId=s.guid()),this.player._isPreload()||(this.loadstartTime=(new Date).getTime()),this._canPlay&&this._reportPlay()||this.buffer_flag&&this.pause_flag&&(this.pause_flag=0,this.pauseEndTime=(new Date).getTime(),this._log("RECOVER",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.pauseEndTime-this.pauseTime}))},_onPlayerPause:function(){!this.buffer_flag||this.startTimePlay&&!this.player._seeking&&(this.pause_flag=1,this.pauseTime=(new Date).getTime(),this._log("PAUSE",{vt:Math.floor(1e3*this.player.getCurrentTime())}))},_onPlayerSeekStart:function(e){this.seekStartTime=e.paramData.fromTime,this.startTimePlay=0,this.seekStartStamp=(new Date).getTime()},_onPlayerSeekEnd:function(){this.seekEndStamp=(new Date).getTime(),this._log("SEEK",{drag_from_timestamp:Math.floor(1e3*this.seekStartTime),drag_to_timestamp:Math.floor(1e3*this._seekEndData.toTime)}),this._log("SEEK_END",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.seekEndStamp-this.seekStartStamp}),this._seekEndData=null},_onPlayerLoaded:function(){var e,t=this;this.buffer_flag&&!this.stucking&&(this.player._seeking?(this.seekingStartTime=this.player.getCurrentTime(),setTimeout((function(){var e=t.player.readyState()<4;t.player.readyState()||(e=!0),t.player.getCurrentTime()===t.seekingStartTime&&e&&(e=t._getbwEstimator(),t._log("UNDERLOAD",{vt:Math.floor(1e3*t.player.getCurrentTime()),bw:e}),t.stucking=!0,t.stuckStartTime=(new Date).getTime())}),500)):(this.stuckStartTime=(new Date).getTime(),this.stuckStartTime-this.startTimePlay<=1e3||(this.stucking=!0,e=this._getbwEstimator(),this._log("UNDERLOAD",{vt:Math.floor(1e3*this.player.getCurrentTime()),bw:e}),this.stuckStartTime=(new Date).getTime())))},_onPlayerUnderload:function(){var e,t,r;!this.buffer_flag&&this.player._options&&this.player._options.autoplay||this.stucking&&(e=Math.floor(1e3*this.player.getCurrentTime()),t=this.stuckStartTime||(new Date).getTime(),0<(t=Math.floor((new Date).getTime()-t))&&t<(1e3*this.player._options.waitingTimeout||6e4)&&(r=this._getbwEstimator(),this._log("LOADED",{vt:e,cost:t,bw:r,cbs:this.seekStart?1:0})),this.seekStart=!1,this.stucking=!1)},_onPlayerSeeking:function(){this.seekStart=!0,this.seekingData.seekingStartTime=performance.now()},_onPlayerSeeked:function(){var e=this;this.player._splayer?this.player.one("canplay",(function(){e._reportSeeked()})):this._reportSeeked()},_reportSeeked:function(){var e=performance.now();e=Math.floor(e-this.seekingData.seekingStartTime),this._log("SEEKED",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:e})},_onPlayerError:function(){this.playId=0,this._LoadedData=1,this.buffer_flag||this._reportPlay(),this.player.getOptions().autoplay&&this.reportStartPlay()},_getbwEstimator:function(){var e=NaN;try{e=this.player._getbwEstimator&&this.player._getbwEstimator()}catch(e){}return e},_log:function(e,t){if(this.trackLog){this.updateSourceInfo();var r,i=a.copy(this.opt),n=(this.requestId=s.guid(),u.logReportTo),o=(""!=(i.e=y[e]+"",i.ri=this.sessionId,i.bi=i.bi&&String(i.bi),i.t=(new Date).getTime()+"",i.cdn_ip=this._userNetInfo.cdnIp,i.hn=this._userNetInfo.localIp,e=this.player.getCurrentQuality())&&(i.definition=e.definition),[]);a.each(t,(function(e,t){if("string"!=typeof t)try{t=JSON.stringify(t)}catch(e){}o.push(e+"="+t)})),e="",((t=this.player.getOptions())&&t.vid||this.lightSaasVideoId)&&(e=t.vid||this.lightSaasVideoId),o.push("vid="+e),e="",(e=t&&t.mediaAuth?t.mediaAuth:e)&&o.push("pauth="+e);try{Aliplayer&&Aliplayer.__logCallback__&&(i.args=o,Aliplayer.__logCallback__(i))}catch(e){console.log(e)}return""==(o=o.join("&"))&&(o="0"),i.args=this.encodeURL(o),this._logService?this._logService.add(i):(r=[],a.each(i,(function(e,t){r.push(e+"="+t)})),r=r.join("&"),l.jsonp(n+"?"+r,(function(){}),(function(){}))),this.sessionId}},_imageInfo:function(){try{var e,t,r,i,n,o,a;return/MSIE\s8\.0/.test(navigator.userAgent)?{}:(e=this.player.tag)?(t=document.createElement("canvas"),r=e.videoWidth,i=e.videoHeight,t.width=r,t.height=i,(n=t.getContext("2d")).save(),n.drawImage(e,0,0,r,i),n.restore(),o=t.toDataURL("image/jpeg",1),a="",{imgLength:(a=o?(a=o.substr(o.indexOf(",")+1))||"":a).length}):{}}catch(e){return{}}}}),t.exports=e},{"../config":14,"../lib/data":29,"../lib/io":39,"../lib/object":41,"../lib/oo":42,"../lib/ua":48,"../player/base/event/eventtype":69,"./log":62,"./util":64}],64:[function(e,t,r){var i=e("../lib/cookie"),n=e("../lib/data"),o=e("../lib/ua");t.exports.getUuid=function(){var e=i.get("p_h5_u");return e||(e=n.guid(),i.set("p_h5_u",e,730)),e},t.exports.getTerminalType=function(){var e="pc";return o.IS_IPAD?e="pad":o.IS_ANDROID?e="android":o.IS_IOS&&(e="iphone"),e},t.exports.returnUTCDate=function(e){var t=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate(),n=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds();return e=e.getUTCMilliseconds(),Date.UTC(t,r,i,n,o,a,e)},t.exports.getRfc822=function(e){return e.toUTCString().replace("UTC","GMT")}},{"../lib/cookie":28,"../lib/data":29,"../lib/ua":48}],65:[function(e,t,r){var i=e("./base/player"),n=e("./flash/flashplayer"),o=e("./saas/mtsplayer"),a=e("./saas/vodplayer"),s=e("./saas/lightPlayer"),l=e("./audio/audioplayer"),c=e("./hls/hlsplayer"),u=e("./flv/flvplayer"),p=e("./rts/rtsplayer"),d=e("./drm/drmplayer"),h=e("./splayer/splayer"),f=e("../lib/ua"),y=e("../lib/playerutil"),_=(e("../lib/dom"),e("../lib/io"),e("../lang/index")),g=e("../lib/constants"),v=e("./base/event/eventtype");t.exports.create=function(e,t){navigator&&navigator.userAgent&&-1<navigator.userAgent.indexOf("Olympic_Android")&&(e.useNativeControls=!0),e.readyCallback=t="function"!=typeof t?function(){}:t,_.setCurrentLanguage(e.language,"h5",e.languageTexts),e=(t=y.handleOption(e)).source;var r,m=y.isAudio(e),S=(m&&(t.mediaType="audio"),y.createWrapper(t));if(S.player)return S.player;if(m)r=new l(S,t);else if(y.isRts(e))r=new p(S,t);else if(!t.useFlashPrism&&y.isFlv(e)&&y.isSupportFlv())r=new u(S,t);else if(f.IS_MOBILE||!t.useFlashPrism&&!y.isRTMP(e))if(-1!==[null,void 0].indexOf(t.mediaAuth)||t.source)if(t.vid&&!t.source)if(t.authInfo)r=new o(S,t);else{if(!(t.playauth||t.accessKeyId&&t.accessKeySecret))throw m="vid="+t.vid+" playauth='', playauth property is required by VOD(视频点播) as new Aliplayer.",new Error(m);r=new a(S,t)}else y.isDash(e)&&y.isSupportMSE()?r=new d(S,t):y.isHls(e)?y.canPlayHls()?r=new(y.isSupportHls()&&(y.isUsedHlsPluginOnMobile()||y.isSafariUsedHlsPlugin(t.useHlsPluginForSafari))?t.isDrm?d:c:t.isDrm?d:i)(S,t):y.isSupportHls()?r=new(t.isDrm?d:c)(S,t):f.os.pc?t.userH5Prism||t.useH5Prism||(r=new n(S,t)):r=new i(S,t):y.isMp4(e)&&(t.forceH265||t.enableH265)&&y.hizksj()?r=new h(S,t):(r=new i(S,t),t.source||(m={error_code:g.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL",display_msg:_.get("Error_Empty_Source")},r.trigger(v.Player.Error,m)));else r=new s(S,t);else r=new n(S,t);return r}},{"../lang/index":22,"../lib/constants":27,"../lib/dom":31,"../lib/io":39,"../lib/playerutil":45,"../lib/ua":48,"./audio/audioplayer":67,"./base/event/eventtype":69,"./base/player":90,"./drm/drmplayer":97,"./flash/flashplayer":98,"./flv/flvplayer":100,"./hls/hlsplayer":102,"./rts/rtsplayer":104,"./saas/lightPlayer":108,"./saas/mtsplayer":110,"./saas/vodplayer":116,"./splayer/splayer":125}],66:[function(e,t,r){var i=e("./base/player"),n=e("./flash/flashplayer"),o=e("./saas/mtsplayer"),a=e("./saas/vodplayer"),s=e("./saas/lightPlayer"),l=e("./audio/audioplayer"),c=e("./hls/hlsplayer"),u=e("./flv/flvplayer"),p=e("./rts/rtsplayer"),d=e("./drm/drmplayer"),h=e("./splayer/splayer"),f=e("../lib/ua"),y=e("../lib/playerutil"),_=(e("../lib/dom"),e("../lib/io"),e("../lang/index")),g=e("../lib/constants"),v=e("./base/event/eventtype");t.exports.create=function(e,t){navigator&&navigator.userAgent&&-1<navigator.userAgent.indexOf("Olympic_Android")&&(e.useNativeControls=!0),e.readyCallback=t="function"!=typeof t?function(){}:t,_.setCurrentLanguage(e.language,"h5",e.languageTexts),e=(t=y.handleOption(e)).source;var r,m=y.isAudio(e),S=(m&&(t.mediaType="audio"),y.createWrapper(t));if(S.player)return S.player;if(m)r=new l(S,t);else if(y.isRts(e))r=new p(S,t);else if(!t.useFlashPrism&&y.isFlv(e)&&y.isSupportFlv())r=new u(S,t);else if(f.IS_MOBILE||!t.useFlashPrism&&!y.isRTMP(e))if(-1!==[null,void 0].indexOf(t.mediaAuth)||t.source)if(t.vid&&!t.source)if(t.authInfo)r=new o(S,t);else{if(!(t.playauth||t.accessKeyId&&t.accessKeySecret))throw m="vid="+t.vid+" playauth='', playauth property is required by VOD(视频点播) as new Aliplayer.",new Error(m);r=new a(S,t)}else y.isDash(e)&&y.isSupportMSE()?r=new d(S,t):y.isHls(e)?y.canPlayHls()?r=new(y.isSupportHls()&&(y.isUsedHlsPluginOnMobile()||y.isSafariUsedHlsPlugin(t.useHlsPluginForSafari))?t.isDrm?d:c:t.isDrm?d:i)(S,t):y.isSupportHls()?r=new(t.isDrm?d:c)(S,t):f.os.pc?t.userH5Prism||t.useH5Prism||(r=new n(S,t)):r=new i(S,t):y.isMp4(e)&&(t.forceH265||t.enableH265)&&y.hizksj()?r=new h(S,t):(r=new i(S,t),t.source||(m={error_code:g.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL",display_msg:_.get("Error_Empty_Source")},r.trigger(v.Player.Error,m)));else r=new s(S,t);else r=new n(S,t);return r}},{"../lang/index":22,"../lib/constants":27,"../lib/dom":31,"../lib/io":39,"../lib/playerutil":45,"../lib/ua":48,"./audio/audioplayer":67,"./base/event/eventtype":69,"./base/player":90,"./drm/drmplayer":97,"./flash/flashplayer":98,"./flv/flvplayer":100,"./hls/hlsplayer":102,"./rts/rtsplayer":104,"./saas/lightPlayer":108,"./saas/mtsplayer":110,"./saas/vodplayer":116,"./splayer/splayer":125}],67:[function(e,t,r){var i=e("../base/player"),n=e("../../ui/component"),o=e("../../lib/dom"),a=e("../../lib/object"),s=e("../../lib/playerutil");e=i.extend({init:function(e,t){this._isAudio=!0,void 0===t.skinLayout&&(t.skinLayout=s.defaultAudioLayout),i.call(this,e,t)}}),e.prototype.createEl=function(){"AUDIO"!==this.tag.tagName&&(this._el=this.tag,this.tag=n.prototype.createEl.call(this,"audio"));var e=this._el,t=this.tag,r=(t.player=this,o.getElementAttributes(t));return a.each(r,(function(t){e.setAttribute(t,r[t])})),this.setVideoAttrs(),t.parentNode&&t.parentNode.insertBefore(e,t),o.insertFirst(t,e),e},t.exports=e},{"../../lib/dom":31,"../../lib/object":41,"../../lib/playerutil":45,"../../ui/component":129,"../base/player":90}],68:[function(e,t,r){var i=e("../../../lib/event"),n=e("./eventtype"),o=e("../eventHandler/video/index"),a=e("../eventHandler/player/index");t.exports.offAll=function(e){var t,r,o,a=e.tag,s=e._el;for(t in n.Video)i.off(a,n.Video[t]);for(r in n.Player)i.off(s,n.Player[r]);for(o in n.Private)i.off(s,n.Private[o])},t.exports.offVideoAll=function(e){var t,r=e.tag;for(t in n.Video)i.off(r,n.Video[t])},t.exports.onAll=function(e){o.bind(e),a.bind(e)}},{"../../../lib/event":32,"../eventHandler/player/index":73,"../eventHandler/video/index":83,"./eventtype":69}],69:[function(e,t,r){t.exports={Video:{TimeUpdate:"timeupdate",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",Suspend:"suspend",Stalled:"stalled",LoadStart:"loadstart",DurationChange:"durationchange",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Progress:"progress",CanPlayThrough:"canplaythrough",ContextMenu:"contextmenu",Seeking:"seeking",Seeked:"seeked",ManualEnded:"manualended",VolumeChange:"volumechange",RateChange:"ratechange"},Player:{TimeUpdate:"timeupdate",DurationChange:"durationchange",Init:"init",Ready:"ready",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",RequestFullScreen:"requestFullScreen",CancelFullScreen:"cancelFullScreen",Snapshoted:"snapshoted",Snapshoting:"snapshoting",OnM3u8Retry:"onM3u8Retry",LiveStreamStop:"liveStreamStop",AutoPlayPrevented:"autoPlayPrevented",AutoPlay:"autoplay",StartSeek:"startSeek",CompleteSeek:"completeSeek",TextTrackReady:"textTrackReady",AudioTrackReady:"audioTrackReady",AudioTrackUpdated:"audioTrackUpdated",LevelsLoaded:"levelsLoaded",AudioTrackSwitch:"audioTrackSwitch",AudioTrackSwitched:"audioTrackSwitched",LevelSwitch:"levelSwitch",LevelSwitched:"levelSwitched",MarkerDotOver:"markerDotOver",MarkerDotOut:"markerDotOut",DefaultBandWidth:"defaultbandwidth",ResolutionChange:"resolutionChange",SeiFrame:"seiFrame",RtsFallback:"rtsFallback",H265PlayInfo:"h265PlayInfo",H265DecoderOverload:"h265DecoderOverload"},Private:{Play_Btn_Show:"play_btn_show",UiH5Ready:"uiH5Ready",Error_Hide:"error_hide",Error_Show:"error_show",Info_Show:"info_show",Info_Hide:"info_hide",H5_Loading_Show:"h5_loading_show",H5_Loading_Hide:"h5_loading_hide",HideProgress:"hideProgress",CancelHideProgress:"cancelHideProgress",UpdateProgress:"updateProgress",UpdateCursorPosition:"updateCursorPosition",Click:"click",MouseOver:"mouseover",MouseOut:"mouseout",MouseEnter:"mouseenter",MouseLeave:"mouseleave",TouchStart:"touchstart",TouchMove:"touchmove",TouchEnd:"touchend",HideBar:"hideBar",ShowBar:"showBar",ControlBarClick:"controlBarClick",ReadyState:"readyState",SourceLoaded:"sourceloaded",QualityChange:"qualitychange",Play_Btn_Hide:"play_btn_hide",Cover_Hide:"cover_hide",Cover_Show:"cover_show",SeekStart:"seekStart",EndStart:"endStart",UpdateProgressBar:"updateProgressBar",LifeCycleChanged:"lifeCycleChanged",Dispose:"dispose",Created:"created",Snapshot_Hide:"snapshot_hide",AutoStreamShow:"auto_stream_show",AutoStreamHide:"auto_stream_hide",VolumnChanged:"volumnchanged",LiveShiftQueryCompleted:"liveShiftQueryCompleted",LiveShiftSwitchToLive:"LiveShiftSwitchToLive",StreamSelectorHide:"streamSelectorHide",SpeedSelectorHide:"speedSelectorHide",SettingShow:"settingShow",SettingHide:"settingHide",SelectorShow:"selectorShow",SelectorHide:"selectorHide",SettingListShow:"settingListShow",SettingListHide:"settingListHide",ThumbnailHide:"thumbnailHide",ThumbnailShow:"thumbnailShow",ThumbnailLoaded:"thumbnailLoaded",TooltipShow:"tooltipShow",TooltipHide:"tooltipHide",SelectorUpdateList:"selectorUpdateList",SelectorValueChange:"selectorValueChange",SelectorGenerateList:"selectorGenerateList",VolumeVisibilityChange:"volumeVisibilityChange",VolumeUpdatePosition:"volumeUpdatePosition",ChangeURL:"changeURL",UpdateToSettingList:"updateToSettingList",CCChanged:"CCChanged",CCStateChanged:"CCStateChanged",CCReset:"ccReset",TextTrackFounded:"textTrackFounded",UserTrackReset:"userTrackReset",PlayClick:"click",ProgressMarkerLoaded:"progressMarkerLoaded",MarkerTextShow:"markerTextShow",MarkerTextHide:"markerTextHide",PREPARE:"prepare",ProgressMarkerChanged:"progressMarkerChanged",SeiFrame:"privateSeiFrame",PlayInfoLoaded:"playInfoLoaded",Retry:"retry",PatchWaiting:"patchWaiting",VttHide:"vttHide",VttSwitchTrack:"vttSwitchTrack",VttClearTracks:"vttClearTracks",SafariDrmLevelSwitch:"safariDrmLevelSwitch"}}},{}],70:[function(e,t,r){e("../../event/eventtype");var i=e("../../../../lib/dom"),n=e("../../../../lib/ua");t.exports.handle=function(){n.IS_IOS||i.removeClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":31,"../../../../lib/ua":48,"../../event/eventtype":69}],71:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this;t.trigger(i.Player.CompleteSeek,e.paramData.toTime),t.one(i.Player.CanPlay,(function(){t._enteredProgressMarker&&t.pause()}))}},{"../../event/eventtype":69}],72:[function(e,t,r){var i=e("../../event/eventtype"),n=(e("../../../../lib/constants"),e("../../../../lang/index"),e("../../../../monitor/util"));t.exports.handle=function(e){var t=this;e=e.paramData,t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Cover_Hide),t.trigger(i.Private.Play_Btn_Hide),t.trigger(i.Private.SettingListHide),t.trigger(i.Private.SelectorHide),t.trigger(i.Private.VolumeVisibilityChange,""),e=e||{},t._monitor&&(e.uuid=n.getUuid(),e.requestId=t._serverRequestId,e.cdnIp=t._monitor._userNetInfo.cdnIp,e.localIp=t._monitor._userNetInfo.localIp),t._isError=!0,t.trigger(i.Private.Error_Show,e),t.trigger(i.Private.LifeCycleChanged,{type:i.Player.Error,data:e})}},{"../../../../lang/index":22,"../../../../lib/constants":27,"../../../../monitor/util":64,"../../event/eventtype":69}],73:[function(e,t,r){var i=e("../../event/eventtype"),n=e("../../../../lib/event"),o=e("./lifecyclecommon"),a={endStart:e("./endstart"),seekStart:e("./seekstart"),requestFullScreen:e("./requestfullscreen"),cancelFullScreen:e("./cancelfullscreen"),error:e("./error"),privateSeiFrame:e("./seiframe"),patchWaiting:e("../video/waiting")},s=[i.Private.EndStart,i.Private.SeekStart,i.Player.RequestFullScreen,i.Player.CancelFullScreen,i.Player.Error,i.Player.Ready,i.Private.Dispose,i.Private.Created,i.Private.SeiFrame,i.Private.PatchWaiting];t.exports.bind=function(e){e.el();for(var t=0;t<s.length;t++){var r=s[t];"undefined"!=a[r]&&function(e,t,r){var i=e.el();n.on(i,t,(function(i){(r&&r.handle?r:o).handle.call(e,i,t)}))}(e,r,a[r])}}},{"../../../../lib/event":32,"../../event/eventtype":69,"../video/waiting":89,"./cancelfullscreen":70,"./endstart":71,"./error":72,"./lifecyclecommon":74,"./requestfullscreen":75,"./seekstart":76,"./seiframe":77}],74:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e,t){this.trigger(i.Private.LifeCycleChanged,{type:t,data:e})}},{"../../event/eventtype":69}],75:[function(e,t,r){e("../../event/eventtype");var i=e("../../../../lib/dom"),n=e("../../../../lib/ua");t.exports.handle=function(){n.IS_IOS||i.addClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":31,"../../../../lib/ua":48,"../../event/eventtype":69}],76:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){this._seeking=!0,this.trigger(i.Player.StartSeek,e.paramData.fromTime)}},{"../../event/eventtype":69}],77:[function(e,t,r){e("../../event/eventtype"),t.exports.handle=function(e){var t,r,i=(e=e.paramData).pts;this._hls&&(t=e.pts,r=this._initPTS,i=parseInt((t-r)/90,10)),this._seis[i]=e.dataContent}},{"../../event/eventtype":69}],78:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this,r=(t._retrySwitchUrlCount=0,t._liveRetryCount=0,t._clearLiveErrorHandle(),(new Date).getTime()-t.readyTime);t._options.autoplay||t._options._autoplay||!t.paused()||(t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Play_Btn_Show)),t.trigger(i.Player.CanPlay,{loadtime:r})}},{"../../event/eventtype":69}],79:[function(e,t,r){var i=e("../../event/eventtype"),n=e("../../../../lib/dom"),o=e("../../../../lib/ua");t.exports.handle=function(e){this._seeking=!1;var t=this.tag;"none"===t.style.display&&o.IS_IOS&&setTimeout((function(){n.css(t,"display","block")}),100),this.trigger(i.Video.CanPlayThrough)}},{"../../../../lib/dom":31,"../../../../lib/ua":48,"../../event/eventtype":69}],80:[function(e,t,r){t.exports.handle=function(e,t){var r="";e&&e.paramData&&(r=e.paramData),this.trigger(t,r)}},{}],81:[function(e,t,r){var i=e("../../event/eventtype");e("../../../../lang/index"),e("../../../../lib/event"),t.exports.handle=function(e){var t=this;t.waiting=!1,t._ended=!0,t._monitor&&t._monitor._onPlayerInit(),t._options.rePlay?(t.seek(0),t.tag.play()):t._options.isLive&&t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Play_Btn_Show),t.trigger(i.Player.Ended)}},{"../../../../lang/index":22,"../../../../lib/event":32,"../../event/eventtype":69}],82:[function(e,t,r){var i=e("../../event/eventtype"),n=e("../../../../lib/constants"),o=e("../../../../lang/index"),a=e("../../../../lib/event"),s=e("../../../../lib/ua");t.exports.handle=function(e){var t,r,l,c,u,p=this;p.waiting=!1,p._clearTimeout(),p.checkOnline()&&!p._splayer&&(l="",t=(e=e.target||e.srcElement).error.message,l="",e.error.code&&(r=e.error.code,l=n.VideoErrorCode[e.error.code],t=r+" || "+t),p._options.isLive?p._options.liveRetry>p._liveRetryCount?p._reloadAndPlayForM3u8():(p._liveRetryCount=0,p.trigger(i.Player.LiveStreamStop),p._liveErrorHandle=setTimeout((function(){var e={mediaId:"ISLIVE",error_code:l,error_msg:o.get("Error_Play_Text")+"，"+o.get("Error_Retry_Text")};p.logError(e),p.trigger("error",e)})),s.IS_UC&&(p._liveErrorHandle=null)):-1<t.indexOf("NS_ERROR_DOM_MEDIA_FATAL_ERR")?(e=p.getCurrentTime(),(c=p.getDuration())-e<.5&&(p.pause(),p._ended=!0,p.tag.currentTime=c,a.trigger(p.tag,i.Video.ManualEnded))):3==r?(u={mediaId:p._options.vid||"",error_code:l,error_msg:t},p.logError(u),u.display_msg=n.VideoErrorCodeText[r],p.trigger(i.Player.Error,u)):p._reloadForVod()||(e=o.get("Error_Play_Text"),c=!1,r<3?e=n.VideoErrorCodeText[r]:p._eventState==n.SUSPEND?(e=o.get("Error_Load_Abort_Text"),l=n.ErrorCode.RequestDataError):p._eventState==n.LOAD_START?(e=o.get("Error_Network_Text"),0<p._options.source.indexOf("auth_key")&&(e=e+"，"+o.get("Error_AuthKey_Text")),l=n.ErrorCode.StartLoadData):p._eventState==n.LOADED_METADATA&&(e=o.get("Error_Play_Text"),l=n.ErrorCode.PlayingError),e=e+"，"+o.get("Error_Retry_Text"),1<p._urls.length&&p._retrySwitchUrlCount<3&&-1==p._options.source.indexOf(".mpd")&&(p.switchUrl(),c=!0),u={mediaId:p._options.vid||"",error_code:l,error_msg:t},c)||(p.logError(u),u.display_msg=e,p.trigger(i.Player.Error,u)))}},{"../../../../lang/index":22,"../../../../lib/constants":27,"../../../../lib/event":32,"../../../../lib/ua":48,"../../event/eventtype":69}],83:[function(e,t,r){var i=e("../../../../lib/event"),n=e("../../event/eventtype"),o={canplay:e("./canplay"),canplaythrough:e("./canplaythrough"),common:e("./common"),ended:e("./ended"),error:e("./error"),pause:e("./pause"),play:e("./play"),playing:e("./playing"),waiting:e("./waiting"),timeupdate:e("./timeupdate"),manualended:e("./ended"),loadedmetadata:e("./loadedmetadata")};t.exports.bind=function(e){for(var t in e.tag,n.Video)!function(e,t,r){var o=e.tag;i.on(o,t,(function(i){r.handle.call(e,i,t),t!=n.Video.Error&&(t==n.Video.ManualEnded&&(t=n.Video.Ended),e.trigger(n.Private.LifeCycleChanged,{type:t,data:i}))}))}(e,t=n.Video[t],void 0!==o[t]?o[t]:o.common)}},{"../../../../lib/event":32,"../../event/eventtype":69,"./canplay":78,"./canplaythrough":79,"./common":80,"./ended":81,"./error":82,"./loadedmetadata":84,"./pause":85,"./play":86,"./playing":87,"./timeupdate":88,"./waiting":89}],84:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this.tag;this._duration=t.duration<1?0:t.duration,this.trigger(i.Private.ReadyState),this._splayer&&this.trigger(i.Video.DurationChange),this.trigger(i.Video.LoadedMetadata)}},{"../../event/eventtype":69}],85:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){this._seeking&&this._splayer||(this._clearTimeout(),this.trigger(i.Private.AutoStreamHide),this.trigger(i.Player.Pause),this._isManualPause&&(this.trigger(i.Private.Play_Btn_Show),this.trigger(i.Private.H5_Loading_Hide)),this.waiting=!1)}},{"../../event/eventtype":69}],86:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){this.trigger(i.Private.Error_Hide),this.trigger(i.Private.Cover_Hide),this.trigger(i.Private.AutoStreamHide),this.waiting=!1,this.trigger(i.Player.Play)}},{"../../event/eventtype":69}],87:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this,r=(t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Cover_Hide),t.trigger(i.Private.Info_Hide),t.waiting=!1,t._ended=!1,t._liveRetryCount=0,t._vodRetryCount=0,t._seeking=!1,t.getCurrentTime());t._waitingReloadTime!=r&&(t._waitingTimeoutCount=0),t._checkTimeoutHandle&&(clearTimeout(t._checkTimeoutHandle),t._checkTimeoutHandle=null),t._waitingLoadedHandle&&(clearTimeout(t._waitingLoadedHandle),t._waitingLoadedHandle=null),t._waitingDelayLoadingShowHandle&&(clearTimeout(t._waitingDelayLoadingShowHandle),t._waitingDelayLoadingShowHandle=null),t._waitingTimeoutHandle&&(clearTimeout(t._waitingTimeoutHandle),t._waitingTimeoutHandle=null,t._ccService)&&t._options.isLive&&(r=t._ccService.getCurrentSubtitle(),t._setDefaultCC=!0,r)&&t._ccService.switch(r),t.trigger(i.Private.AutoStreamHide),t.trigger(i.Player.Playing),t.trigger(i.Private.Error_Hide),t.tag.paused||t.trigger(i.Private.Play_Btn_Hide)}},{"../../event/eventtype":69}],88:[function(e,t,r){var i=e("../../event/eventtype"),n=e("../../../../lib/ua"),o=e("../../../../lib/event"),a=e("../../plugin/status");t.exports.handle=function(e){var t,r=this,s=(r.trigger(i.Player.TimeUpdate,e.timeStamp),(n.IS_IOS||n.IS_MAC_SAFARI)&&(clearTimeout(r._waitingPatchTimer),r._waitingPatchTimer=setTimeout((function(){r.waiting||r._isError||r.paused()||r._disposed||(console.log("!!!!!!!manually waiting!!!!!!!"),r.trigger(i.Private.PatchWaiting))}),3e3)),e=r.getCurrentTime(),r.waiting&&!r._TimeUpdateStamp&&(r._TimeUpdateStamp=e),0!=r.waiting&&r._TimeUpdateStamp==e||(r.trigger(i.Private.H5_Loading_Hide),r.trigger(i.Private.AutoStreamHide),r._checkTimeoutHandle&&clearTimeout(r._checkTimeoutHandle),r._waitingTimeoutHandle&&clearTimeout(r._waitingTimeoutHandle),r._waitingLoadedHandle&&clearTimeout(r._waitingLoadedHandle),r.waiting=!1),n.IS_ANDROID&&n.IS_UC&&(r._timeNotUpdateCount=r._timeNotUpdateCount||0,r.waiting||e!==r._TimeUpdateStamp||(r._timeNotUpdateCount++,2<=r._timeNotUpdateCount&&(r._timeNotUpdateCount=0,r.trigger(i.Private.PatchWaiting)))),r._TimeUpdateStamp=e,r._options.isLive||(t=!1,(t=!!((s=r.getDuration())<e&&!r.paused()||s-e<.2&&0<=n.browser.version.indexOf("49.")&&!r.paused()||r.exceedPreviewTime(e))||t)&&!r._ended&&(r.pause(),o.trigger(r.tag,i.Video.ManualEnded))),r._player.tag),l=(s&&r._options.isLive&&(r._player.resolution&&0<s.videoWidth&&0<s.videoHeight&&(0<r._player.resolution.width||0<r._player.resolution.height)&&(r._player.resolution.width!==s.videoWidth||r._player.resolution.height!==s.videoHeight)&&(t={oldResolution:{width:r._player.resolution.width,height:r._player.resolution.height},newResolution:{width:s.videoWidth,height:s.videoHeight}},r.trigger(i.Player.ResolutionChange,t)),r._player.resolution.width=0==s.videoWidth?r._player.resolution.width:s.videoWidth,r._player.resolution.height=0==s.videoHeight?r._player.resolution.height:s.videoHeight),n.IS_CHROME&&Number(n.CHROME_VERSION)<50&&(r._playingSlientPause&&(clearTimeout(r._playingSlientPause),r._playingSlientPause=null),r._playingSlientPause=setTimeout((function(){var e,t;r._status!=a.playing||r.paused()||r._drm||r._urls.length||(e=r.getCurrentTime(),t=r._options.isLive?0:e,r._loadByUrlInner(r._options.source,t,e,!0))}),3e3)),r._seis||{}),c=Object.keys(l);if(0!==c.length){var u=parseInt(1e3*e,10);if(!(d=l[u]))for(var p=0;p<250;p++){var d,h=u+p;if(d=l[h]){for(var f=0;f<c.length&&c[f]<=h;f++)delete l[c[f]];break}}d&&r.trigger(i.Player.SeiFrame,d)}}},{"../../../../lib/event":32,"../../../../lib/ua":48,"../../event/eventtype":69,"../../plugin/status":94}],89:[function(e,t,r){var i=e("../../event/eventtype"),n=e("../../../../lib/constants"),o=e("../../../../lib/event"),a=e("../../../../lang/index");e("../../../../lib/ua"),t.exports.handle=function(e){var t=this;if(!t._options.isLive){var r=this.getCurrentTime(),s=this.getDuration();if(!t._ended&&0<s&&(s-r<.5||s<r))return t.pause(),t._ended=!0,void o.trigger(this.tag,i.Video.ManualEnded)}function l(){t._checkTimeoutHandle&&(clearTimeout(t._checkTimeoutHandle),t._checkTimeoutHandle=null),t._waitingTimeoutHandle&&(clearTimeout(t._waitingTimeoutHandle),t._waitingTimeoutHandle=null),t._waitingLoadedHandle&&(clearTimeout(t._waitingLoadedHandle),t._waitingLoadedHandle=null),t._waitingDelayLoadingShowHandle&&(clearTimeout(t._waitingDelayLoadingShowHandle),t._waitingDelayLoadingShowHandle=null)}t.waiting=!0,l(),t._waitingDelayLoadingShowHandle=setTimeout((function(){t.trigger(i.Private.H5_Loading_Show)}),1e3*t._options.delayLoadingShow),t._TimeUpdateStamp=null,t._checkTimeoutHandle=setTimeout((function(){t.trigger(i.Private.AutoStreamShow)}),1e3*t._options.loadDataTimeout),t.trigger(i.Player.Waiting),t._waitingTimeoutHandle=setTimeout((function(){var e;t.tag&&t._options&&(t.pause(),e={mediaId:t._options.vid||"",error_code:n.ErrorCode.LoadingTimeout,error_msg:a.get("Error_Waiting_Timeout_Text")},t.logError(e),t.trigger("error",e))}),1e3*t._options.waitingTimeout),t._waitingLoadedHandle=setTimeout((function(){var e=t.getCurrentTime();0==t._waitingTimeoutCount&&e!=t._waitingReloadTime&&(t._waitingTimeoutCount=1,t._waitingReloadTime=e,e=t._options.isLive?0:e,t._loadByUrlInner(t._options.source,e,!0))}),t._options.waitingTimeout/2*1e3),t.on("error",(function(){l()}))}},{"../../../../lang/index":22,"../../../../lib/constants":27,"../../../../lib/event":32,"../../../../lib/ua":48,"../../event/eventtype":69}],90:[function(e,t,r){var i="undefined"==typeof Promise?e("es6-promise").Promise:Promise,n=e("../../ui/component"),o=e("../../lib/object"),a=e("../../lib/dom"),s=e("../../lib/event"),l=e("../../ui/exports"),c=e("../../monitor/monitor"),u=e("../../lib/ua"),p=e("../../lib/constants"),d=e("../../lib/playerutil"),h=e("./x5play"),f=e("../../lib/cookie"),y=e("../../lang/index"),_=e("../../feature/autoPlayDelay"),g=e("./event/eventmanager"),v=e("../../ui/component/cover"),m=e("../../ui/component/text-track-display"),S=e("../../ui/component/play-animation"),b=e("../../commonui/autostreamselector"),T=e("./event/eventtype"),E=e("./plugin/lifecyclemanager"),w=e("../service/export"),x=e("../../ui/component/progressmarker"),P=e("../../feature/keyboardControl"),C=e("../../feature/AntiRecord"),k=e("./eventHandler/video/index"),I=e("../../lib/vttnext/index"),L=e("../../lib/codec-probe"),A=e("../splayer/splayerinjector"),R=(e=e("../../ui/component/util").throttle,n.extend({init:function(e,t){var r;this.tag=e,this.loaded=!1,this.played=!1,this.waiting=!1,this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._isError=!1,this._isHls=!1,this._liveRetryCount=0,this._liveRetryTimer=null,this._vodRetryCount=0,this._seeking=!1,this._serverRequestId=0,this._waitingTimeoutCount=0,this._waitingReloadTime=0,this._created=!1,this._enteredProgressMarker=!1,this._liveShiftSeekStartTime=0,this._duration=0,this._seis={},this._initPTS=0,this.isMutiLevel=!1,this._antiRecord=null,this.__disposed=!1,this.resolution={width:0,height:0},void 0===t.skinLayout&&(t.skinLayout=d.defaultH5Layout),d.isRts(t.source)&&!t.autoplay&&(t.preload=!1),n.call(this,this,t),this.addClass("prism-player"),t.plugins&&o.each(t.plugins,(function(e,t){this[e](t)}),this),this._createService(),this.UI={},t.useNativeControls?this.tag.setAttribute("controls","controls"):(this.UI=l,0==t.errorDisplay&&(this.UI.errorDisplay=void 0)),this.initChildren(),this._options.trackLog&&(this._monitor=new c(this,{video_id:0,album_id:0,from:this._options.from,source:this._options.source,logBatched:this._options.logBatched},this._options.trackLog)),g.onAll(this),this._options.preventRecord&&(this._antiRecord=new C({player:this}),this._antiRecord.start()),this._lifeCycleManager=new E(this),this._overrideNativePlay(),this._liveshiftService&&!this._liveshiftService.validate()?(e={mediaId:this._options.vid||"",error_code:p.ErrorCode.InvalidParameter,error_msg:y.get("ShiftLiveTime_Error")},this.trigger(T.Player.Error,e)):(this._options.extraInfo&&(t=this._options.extraInfo).liveRetry&&(this._options.liveRetry=t.liveRetry),this.on(T.Private.ReadyState,(function(){this.trigger(T.Player.Ready)})),this._thumbnailService&&this._options.thumbnailUrl&&this._thumbnailService.get(this._options.thumbnailUrl),0<this._options.progressMarkers.length&&this.trigger(T.Private.ProgressMarkerLoaded,this._options.progressMarkers),this._options.source&&this._options._native&&this._executeReadyCallback(),this._options.autoplay||this._options.preload?this.trigger(T.Private.H5_Loading_Show):this.trigger(T.Private.Play_Btn_Show),this._extraMultiSources(),this._options.source&&(this.trigger(T.Private.PREPARE,"custom"),this._options.autoPlayDelay?(this._autoPlayDelay=new _(this),(r=this)._autoPlayDelay.handle((function(){r.initPlay()}))):this.initPlay()),P.init.call(this),this._vttBroker=new I({player:this}),this._getUserTextTracks())}}));R.prototype.isSupportMSE=function(){return d.isSupportMSE()},R.prototype.initPlay=function(e){this._initPlayBehavior(e,this._options.source)},R.prototype.initChildren=function(){var e=this.options(),t=e.skinLayout;if(!1!==t&&!o.isArray(t))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");!1!==t&&0!==t.length&&(this.options({children:t}),n.prototype.initChildren.call(this)),this.UI.cover=v,e.className="",this.addChild("cover",e),this.UI.playanimation=S,this.addChild("playanimation",e),this.UI.autoStreamSelector=b,this.addChild("autoStreamSelector",e),this.UI.progressMarker=x,this.addChild("progressMarker",e),this.UI.textTrackDisplay=m,this.addChild("textTrackDisplay",e),this.trigger(T.Private.UiH5Ready)},R.prototype.createEl=function(){var e=!1,t=("VIDEO"!==this.tag.tagName?(this._el=this.tag,this.tag=n.prototype.createEl.call(this,"video"),this._options.playsinline&&(this.tag.setAttribute("webkit-playsinline",""),this.tag.setAttribute("playsinline",""),this.tag.setAttribute("x-webkit-airplay",""),this.tag.setAttribute("x5-playsinline",""))):(e=!0,this._el=this.tag.parentNode),this._el),r=this.tag,i=(this._options.enableSystemMenu||(r.addEventListener?r.addEventListener("contextmenu",(function(e){e.preventDefault()}),!1):r.attachEvent("oncontextmenu",(function(){window.event.returnValue=!1}))),r.player=this,a.getElementAttributes(r));return o.each(i,(function(e){t.setAttribute(e,i[e])})),this.setVideoAttrs(),e||(r.parentNode&&r.parentNode.insertBefore(t,r),a.insertFirst(r,t)),t},R.prototype.setVideoAttrs=function(){var e=this._options.preload,t=this._options.autoplay;if(this.tag.style.width=this._options.videoWidth||"100%",this.tag.style.height=this._options.videoHeight||"100%",e&&this.tag.setAttribute("preload","preload"),t&&!this._isEnabledAILabel()&&"15"!==u.IOS_VERSION&&this.tag.setAttribute("autoplay","autoplay"),u.IS_IOS&&this.tag.setAttribute("poster","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAMZJREFUeAHt0DEBAAAAwqD1T20LL4hAYcCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMDAc2CcpAABaODCqQAAAABJRU5ErkJggg=="),(u.IS_UC||u.dingTalk())&&this.tag.setAttribute("renderer","standard"),this._options.extraInfo)for(var r in this._options.extraInfo)this.tag.setAttribute(r,this._options.extraInfo[r]);h.adaptX5Play(this)},R.prototype.checkOnline=function(){var e;return!(this._options&&!this._options.debug&&0==navigator.onLine&&((e={mediaId:this._options.vid||"",error_code:p.ErrorCode.NetworkUnavaiable,error_msg:y.get("Error_Offline_Text")}).display_msg=y.get("Error_Offline_Text"),this.trigger(T.Player.Error,e),1))},R.prototype.id=function(){return this.el().id},R.prototype.renderUI=function(){},R.prototype.switchUrl=function(){var e,t;0!=this._urls.length&&(this._currentPlayIndex=this._currentPlayIndex+1,this._urls.length<=this._currentPlayIndex&&(this._currentPlayIndex=0,this._retrySwitchUrlCount++),e=this._urls[this._currentPlayIndex],f.set(p.SelectedStreamLevel,e.definition,365),this.trigger(T.Private.QualityChange,y.get("Quality_Change_Fail_Switch_Text")),t=this.getCurrentTime(),this._vodRetryCount=0,this._originalSource="",this._loadByUrlInner(e.Url,t,!0))},R.prototype.setControls=function(){var e=this.options();e.useNativeControls?this.tag.setAttribute("controls","controls"):"object"==typeof e.controls&&(e=this._initControlBar(e.controls),this.addChild(e))},R.prototype._initControlBar=function(e){return new ControlBar(this,e)},R.prototype.getMetaData=function(){},R.prototype.getReadyTime=function(){return this.readyTime},R.prototype.readyState=function(){return this.tag.readyState},R.prototype.getError=function(){return this.tag.error},R.prototype.getRecentOccuredEvent=function(){return this._eventState},R.prototype.getSourceUrl=function(){return this._options?this._options.source:""},R.prototype.getMonitorInfo=function(){return this._monitor?this._monitor.opt:{}},R.prototype.getCurrentQuality=function(){var e;return 0<this._urls.length?{width:(e=this._urls[this._currentPlayIndex]).width,url:e.Url,definition:e.definition}:""},R.prototype.getCurrentPDT=function(){var e;if((u.IS_SAFARI||u.IS_IOS)&&this.tag)return e=Date.parse(this.tag.getStartDate()),isNaN(e)?0:e+1e3*this.getCurrentTime()},R.prototype.setSpeed=function(e){this.tag&&(this._originalPlaybackRate=e,this.tag.playbackRate=e)},R.prototype.play=function(e){return this.tag&&(this.tag.ended||this._ended?this.replay():((this._options.preload||this.loaded)&&this.tag.src||this._initLoad(this._options.source),this.trigger(T.Private.Cover_Hide),this.tag.play())),this._isManualPlay=e||!1,this},R.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this.seek(0),this.tag.play(),this},R.prototype.pause=function(e){return this.tag&&this.tag.pause(),this._isManualPause=e||!1,this},R.prototype.stop=function(){return this.tag.setAttribute("src",null),this},R.prototype.paused=function(){if(this.tag)return!1!==this.tag.paused},R.prototype.getDuration=function(){var e=0;return this.tag?this.isPreview()?this._vodDuration||this.tag.duration:this._duration&&this._duration!=1/0?this._duration:this.tag.duration:e},R.prototype.getDisplayDuration=function(){var e=0;return this.tag?this._vodDuration||this.getDuration():e},R.prototype.getCurrentTime=function(){return this.tag?this.tag.currentTime:0},R.prototype.seek=function(e){this._seeking=!0;var t=this.tag.duration;if(e=Math.floor(e),!Number.isNaN(e))return this._doSeek(this,e=t<=e?t:e),this},R.prototype._doSeek=e((function(e){var t=e[0];e=e[1];try{var r=t._originalPlaybackRate||t.tag.playbackRate;t.tag.currentTime=e,u.IS_IE11&&setTimeout((function(){t.tag&&(t.tag.playbackRate=r)}))}catch(e){console.log(e)}}),100),R.prototype.firstNewUrlloadByUrl=function(e,t){this._clearTimeout(),this._options.vid=0,this._options.source=e,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:e,from:this._options.from}),this.trigger(T.Private.ChangeURL),this.initPlay(),this._options.autoplay&&this.trigger(T.Private.Cover_Hide),this._options.autoplay?this.trigger(T.Player.Play):this.trigger(T.Player.Pause),!(t=t||0)&&0!=t||isNaN(t)||this.seek(t)},R.prototype._loadByUrlInner=function(e,t,r,i){var n=this,o=this.tag.volume;if(i&&u.IS_ANDROID_FIREFOX){for(var a in T.Video)s.off(this.tag,T.Video[a]);this.tag.remove(),this.tag=this._el,this.createEl()}this.loadByUrl(e,t,r,!0),this.tag.volume=o,i&&u.IS_ANDROID_FIREFOX&&this.tag.addEventListener(T.Video.LoadedData,(function e(){n._player.trigger(T.Player.DurationChange),k.bind(n),n.tag.removeEventListener(T.Video.LoadedData,e)}))},R.prototype.loadByUrl=function(e,t,r,i){var n=this,o=(this._monitor&&this._monitor.resetVV(),/\.m3u8|\.flv|\.mp4|artc\:\/\/|rtmp\:\/\//gi),a=((this._options.source||"").match(o)||[])[0]!==((e||"").match(o)||[])[0];if(this._h265InfoReported=!1,this._probeInfo||(this._probeInfo={}),this._probeInfo.codecTag=void 0,!a&&d.isMp4(e))return!this._options.forceH265&&this._options.enableH265?void L(e,(function(e){var t=((e=d.getVideoTrack(e.tracks))||{}).codecTag;n._probeInfo.codecTag=t,e&&d.isH265Codec(t)?d.shouldUseBasePlayer(t,(function(e){e?(n._splayer&&(a=!0),n._probeInfo.codecTag&&A.reportH265PlayInfo.call(n,{renderType:"native",codecTag:n._probeInfo.codecTag})):n._splayer||(a=!0),l.call(n)})):(n._splayer&&(a=!0),l.call(n))}),(function(e){l.call(n)})):void l.call(this);function l(){var n=this;a&&window.Aliplayer?(console.log("!!!!! NEED RELOAD INSTANCE !!!!!"),this._options.source=e,window.Aliplayer.reloadInstance(this._options,(function(){}),this)):(i||(this._urls=[]),this._monitor&&!i&&this._monitor.reset(),this._isError=!1,this._duration=0,this._clearTimeout(),this.trigger(T.Private.Error_Hide),this._options.source=e,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:e,from:this._options.from}),i||(this.trigger(T.Private.ChangeURL),this._vodRetryCount=0),this._options._autoplay=r,this.initPlay(r),(this._options.autoplay||r)&&this.trigger(T.Private.Cover_Hide),this._options.autoplay||r?this.trigger(T.Player.Play):this.trigger(T.Player.Pause),this._options.isLive||!t&&0!=t||isNaN(t)||s.one(this.tag,T.Video.CanPlay,(function(e){var r=n.getDuration();n.seek(r<=t?r:t)})))}l.call(this)},R.prototype.dispose=function(){this.__disposed=!0,this.trigger(T.Private.Dispose),this.tag.pause(),g.offAll(this),P.dispose.call(this),this._antiRecord&&(this._antiRecord.dispose(),this._antiRecord=null),this._monitor&&(this._monitor.removeEvent(),this._monitor=null),this._autoPlayDelay&&this._autoPlayDelay.dispose(),this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._playingSlientPause&&(clearTimeout(this._playingSlientPause),this._playingSlientPause=null),this._waitingLoadedHandle&&(clearTimeout(this._waitingLoadedHandle),this._waitingLoadedHandle=null),this._readyStateTimer&&(clearInterval(this._readyStateTimer),this._readyStateTimer=null),this._vodRetryCountHandle&&(clearTimeout(this._vodRetryCountHandle),this._vodRetryCountHandle=null),this._waitingDelayLoadingShowHandle&&(clearTimeout(this._waitingDelayLoadingShowHandle),this._waitingDelayLoadingShowHandle=null),this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this._disposeService(),this._clearLiveErrorHandle(),this._el.innerHTML="",this.destroy(),this._releaseMediaElement(),this._options.recreatePlayer=null,this._options=null,this.isMutiLevel=!1,this._seis={},this._initPTS=0},R.prototype._releaseMediaElement=function(){this.tag.removeAttribute("src"),this.tag.load(),this.tag=null},R.prototype.mute=function(){this._muteInner(),this._originalVolumn=this.tag.volume;var e=y.get("Volume_Mute");return this._player.trigger(T.Private.Info_Show,{text:e,duration:1e3,align:"lb"}),this._setInnerVolume(0),this},R.prototype._muteInner=function(){this.tag.muted=!0,this.trigger(T.Private.VolumnChanged,-1)},R.prototype.unMute=function(){this._unMuteInner();var e=y.get("Volume_UnMute");return this._player.trigger(T.Private.Info_Show,{text:e,duration:1e3,align:"lb"}),this._setInnerVolume(this._originalVolumn||.5),this},R.prototype._unMuteInner=function(){this.tag.muted=!1,this.trigger(T.Private.VolumnChanged,-2)},R.prototype.muted=function(){return this.tag.muted},R.prototype.getVolume=function(){return this.tag.volume},R.prototype.getOptions=function(){return this._options},R.prototype.setVolume=function(e,t){0!=e?this._unMuteInner():0==e&&this._muteInner(),this._setInnerVolume(e),e=y.get("Curent_Volume")+"<span>"+(100*e).toFixed()+"%</span>",this._player.trigger(T.Private.Info_Show,{text:e,duration:1e3,align:"lb"})},R.prototype._setInnerVolume=function(e){this.tag.volume=e,this.trigger(T.Private.VolumnChanged,e)},R.prototype.hideProgress=function(){this.trigger(T.Private.HideProgress)},R.prototype.cancelHideProgress=function(){this.trigger(T.Private.CancelHideProgress)},R.prototype.setPlayerSize=function(e,t){this._el&&(this._el.style.width=e,this._el.style.height=t)},R.prototype.getBuffered=function(){return this.tag.buffered},R.prototype.setRotate=function(e){this.tag&&(this._rotate=e,this._setTransform(),this.log("ROTATE",{rotation:e}))},R.prototype.getRotate=function(e){return void 0===this._rotate?0:this._rotate},R.prototype.setImage=function(e){this.tag&&(this._image=e,this._setTransform(),this.log("IMAGE",{mirror:"horizon"==e?2:1,text:e}))},R.prototype.getImage=function(){return this._image},R.prototype.cancelImage=function(){this.tag&&(this._image="",this._setTransform(),this.log("IMAGE",{mirror:0}))},R.prototype.setCover=function(e){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&e&&(t.style.backgroundImage="url("+e+")",this._options.cover=e,this.trigger(T.Private.Cover_Show))},R.prototype.setTextTracks=function(e){e=d.unqiueTextTracks(e||[]),this.trigger(T.Private.VttClearTracks),e&&e.length&&this.trigger(T.Private.TextTrackFounded,{from:"user",textTracks:e}),this.trigger(T.Private.CCReset)},R.prototype._setTransform=function(){this._transformProp||(this._transformProp=a.getTransformName(this.tag));var e=" translate(-50%, -50%)";this._rotate&&(e+=" rotate("+this._rotate+"deg)"),this._image&&("vertical"==this._image?e+=" scaleY(-1)":"horizon"==this._image&&(e+=" scaleX(-1)")),this.tag.style[this._transformProp]=e},R.prototype._startPlay=function(){this.tag.paused&&this.tag.play()},R.prototype._initPlayBehavior=function(e,t){return this._monitor&&this._monitor.resetVV(),!this._checkSupportVideoType()&&(d.validateSource(t)?(void 0===e&&(e=!1),this._created||(this._created=!0,this.trigger(T.Private.Created)),this.loaded||this.trigger(T.Player.Init),this._options.autoplay||this._options._autoplay||this._options.preload||e?(this._options._preload=!0,this._initLoad(t),(this._options.autoplay||this._options._autoplay)&&this._startPlay()):this.trigger(T.Private.Play_Btn_Show),!0):((e={mediaId:this._options.vid||"",error_code:p.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=y.get("Error_Invalidate_Source"),this.trigger(T.Player.Error,e),!1))},R.prototype._isPreload=function(){return this._options.autoplay||this._options.preload||this._options._preload},R.prototype._initLoad=function(e){e&&(this._isPreload()&&!u.IS_MOBILE?this.trigger(T.Private.H5_Loading_Show):(this.trigger(T.Private.H5_Loading_Hide),this.trigger(T.Private.Play_Btn_Show)),this.tag.setAttribute("src",e),this.loaded=!0)},R.prototype._clearLiveErrorHandle=function(){this._liveErrorHandle&&(clearTimeout(this._liveErrorHandle),this._liveErrorHandle=null)},R.prototype._reloadAndPlayForM3u8=function(){0==this._liveRetryCount&&this.trigger(T.Player.OnM3u8Retry);var e=(e=this._options).liveRetryInterval+e.liveRetryStep*this._liveRetryCount,t=this;this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this._liveRetryTimer=setTimeout((function(){t._liveRetryCount++,t.tag.load(t._options.source),t.tag.play()}),1e3*e)},R.prototype._checkSupportVideoType=function(){var e,t;return this.tag.canPlayType&&this._options.source&&u.IS_MOBILE?(e="",0<(t=this._options.source).indexOf("m3u8")?""!=this.tag.canPlayType("application/x-mpegURL")||d.isSupportHls()||(e=y.get("Error_Not_Support_M3U8_Text")):0<t.indexOf("mp4")?""==this.tag.canPlayType("video/mp4")&&(e=y.get("Error_Not_Support_MP4_Text")):(d.isRTMP(t)||d.isFlv(t))&&u.IS_MOBILE&&(e=y.get("Error_Not_Support_Format_On_Mobile")),e&&(t={mediaId:this._options.vid||"",error_code:p.ErrorCode.FormatNotSupport,error_msg:e},this.logError(t),t.display_msg=e,this.trigger(T.Player.Error,t)),e):""},R.prototype.getComponent=function(e){return this._lifeCycleManager.getComponent(e)},R.prototype.logError=function(e,t){(e=e||{}).vt=this.getCurrentTime(),this.log(t?"ERRORRETRY":"ERROR",e)},R.prototype.log=function(e,t){var r=0,i=0;if(this._monitor)return this._options&&(r=this._options.vid||"0",i=this._options.from||"0"),this._monitor.updateVideoInfo({video_id:r,album_id:0,source:this._options.source,from:i}),this._monitor._log(e,t)},R.prototype.setSanpshotProperties=function(e,t,r){if(this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric.width=e,this._snapshotMatric.height=t,1<r)throw new Error("rate doesn't allow more than 1");this._snapshotMatric.rate=r},R.prototype.getStatus=function(){return this._status||"init"},R.prototype.enterProgressMarker=function(){this._enteredProgressMarker=!0},R.prototype.isInProgressMarker=function(){return this._enteredProgressMarker},R.prototype.exitProgressMarker=function(){this._enteredProgressMarker=!1},R.prototype.setProgressMarkers=function(e){this.trigger(T.Private.ProgressMarkerChanged,e=e||[])},R.prototype.getProgressMarkers=function(){return this._progressMarkerService?this._progressMarkerService.progressMarkers:[]},R.prototype.setPreviewTime=function(e){this._options.playConfig||(this._options.playConfig={}),this._options.playConfig.PreviewTime=e},R.prototype.getPreviewTime=function(){var e=0;return this._options.playConfig?this._options.playConfig.PreviewTime:e},R.prototype.exceedPreviewTime=function(e){return this.isPreview()&&e>=this._options.playConfig.PreviewTime},R.prototype.isPreview=function(){var e=this._options.playConfig.PreviewTime,t=this._vodDuration||this.tag.duration;return 0<e&&e<t},R.prototype.getStats=function(){return new i((function(e){e()}))},R.prototype.setTraceId=function(e){this._monitor&&this._monitor.updateTraceId(e)},R.prototype._getSanpshotMatric=function(){return this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric},R.prototype._autoplayFailedHandler=function(){this.trigger(T.Private.Play_Btn_Show),this.trigger(T.Private.H5_Loading_Hide),this.trigger(T.Player.AutoPlayPrevented),this.trigger(T.Player.AutoPlay,!1),this._options.cover&&this.trigger(T.Private.Cover_Show)},R.prototype._overrideNativePlay=function(){var e=this.tag.play,t=this;this.tag.play=function(){var r,i;t._monitor&&t._monitor.reportStartPlay(),t._options.source?(t.readyTime=(new Date).getTime(),void 0!==(r=e.apply(t.tag))&&r.then((function(){t.trigger(T.Player.AutoPlay,!0)})).catch((function(e){!t.tag||!t.tag.paused||t._isError||t._options._autoplay||t._switchedLevel||t._autoplayFailedHandler()})),i=t._originalPlaybackRate||t.tag.playbackRate,setTimeout((function(){t.tag&&(t.tag.playbackRate=i)}))):(r={mediaId:t._options.vid||"",error_code:p.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"},t._options.vid?r.display_msg=y.get("Error_Vid_Empty_Source"):t._options.mediaAuth?r.display_msg=y.get("Error_Mediaauth_Empty_Source"):r.display_msg=y.get("Error_Empty_Source"),t.trigger(T.Player.Error,r))}},R.prototype._extraMultiSources=function(){var e=this._options.source;if(e&&-1<e.indexOf("{")&&-1<e.indexOf("}")){var t="";try{t=JSON.parse(e)}catch(e){console.error(e),console.error("地址json串格式不对")}var r,i=[];for(r in t){var n=p.QualityLevels[r];i.push({definition:r,Url:t[r],desc:n||r})}this._setupSourceList(i)}return i},R.prototype._setupSourceList=function(e){var t;(e=void 0===e?[]:e).length&&(this._currentPlayIndex=d.findSelectedStreamLevel(e),t=e[this._currentPlayIndex],this._urls=e,this._options.source=t.Url,this.trigger(T.Private.SourceLoaded,t))},R.prototype._isEnabledAILabel=function(){return this._options.ai&&this._options.ai.label},R.prototype._createService=function(){if(w)for(var e=w.length,t=0;t<e;t++){var r=w[t],i=r.condition;void 0===i?i=!0:"function"==typeof i&&(i=i.call(this)),i&&(this[r.name]=new r.service(this))}},R.prototype._disposeService=function(){if(w)for(var e=w.length,t=0;t<e;t++){var r=this[w[t].name];void 0!==r&&r.dispose&&r.dispose()}},R.prototype._executeReadyCallback=function(){this._options._readyCallbackCalled=!0;try{this._options.autoplay||this._options.preload||(this.trigger(T.Private.H5_Loading_Hide),this.trigger(T.Private.Play_Btn_Show)),this._options.readyCallback(this)}catch(e){console.log(e)}},R.prototype._clearTimeout=function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._clearLiveErrorHandle()},R.prototype._reloadForVod=function(){var e,t,r;return this._originalSource||(this._originalSource=this._options.source),!!(this._vodRetryCount<this._options.vodRetry&&navigator.onLine)&&(e=this.getCurrentTime(),(t=this._originalSource).indexOf("auth_key=")<0&&(t=t&&0<t.indexOf("?")?t+"&_t="+(new Date).valueOf():t+"?_t="+(new Date).valueOf()),this._vodRetryCountHandle&&clearTimeout(this._vodRetryCountHandle),(r=this)._vodRetryCountHandle=setTimeout((function(){r._loadByUrlInner(t,e,!0)}),100*this._vodRetryCount),this._vodRetryCount=this._vodRetryCount+1,!0)},R.prototype._getUserTextTracks=function(){var e=this._options.textTracks||[];(e=d.unqiueTextTracks(e)).length&&this.trigger(T.Private.TextTrackFounded,{from:"user",textTracks:e})},t.exports=R},{"../../commonui/autostreamselector":11,"../../feature/AntiRecord":16,"../../feature/autoPlayDelay":17,"../../feature/keyboardControl":18,"../../lang/index":22,"../../lib/codec-probe":25,"../../lib/constants":27,"../../lib/cookie":28,"../../lib/dom":31,"../../lib/event":32,"../../lib/object":41,"../../lib/playerutil":45,"../../lib/ua":48,"../../lib/vttnext/index":55,"../../monitor/monitor":63,"../../ui/component":129,"../../ui/component/cover":133,"../../ui/component/play-animation":139,"../../ui/component/progressmarker":142,"../../ui/component/text-track-display":153,"../../ui/component/util":157,"../../ui/exports":160,"../service/export":119,"../splayer/splayerinjector":126,"./event/eventmanager":68,"./event/eventtype":69,"./eventHandler/video/index":83,"./plugin/lifecyclemanager":93,"./x5play":95,"es6-promise":8}],91:[function(e,t,r){e=e("../../../lib/oo").extend({}),t.exports=e},{"../../../lib/oo":42}],92:[function(e,t,r){t.exports={createEl:"createEl",created:"created",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",timeUpdate:"timeupdate",error:"error",ended:"ended",dispose:"dispose",markerDotOver:"markerDotOver",markerDotOut:"markerDotOut"}},{}],93:[function(e,t,r){function i(e){(this._player=e)._status="init",this.components=[];var t=e.getOptions().components;if(t&&n.isArray(t)&&0<t.length)for(var r=0;r<t.length;r++){if(!(c=t[r]))return void console.log("The "+r+" custome component is "+c);var i=void 0===c.type?c:c.type,s=void 0===c.args?[]:c.args,c=void 0===c.name?"":c.name;if(!i)return void console.log(c+" compenent is "+i);s=s&&0<s.length?[].concat.call([i],s):[],(s=(i=new(Function.prototype.bind.apply(i,s)))[a.createEl])&&"function"==typeof s&&s.call(i,e.el(),e),this.components.push({name:c,obj:i})}var u=this;e.on(o.Private.LifeCycleChanged,(function(t){var r=(i=t.paramData).type,i=i.data;r===o.Video.CanPlayThrough&&u._player.trigger(o.Player.TimeUpdate,i.target.currentTime),r===o.Video.Ended&&u._player.trigger(o.Player.TimeUpdate,u._player.getDuration()),0!=u.components.length&&l.call(u,e,t)}))}var n=e("../../../lib/object"),o=e("../event/eventtype"),a=e("./lifecycle"),s=e("./status"),l=(i.prototype.getComponent=function(e){var t=null,r=this.components.length;if(e)for(var i=0;i<r;i++)if(this.components[i].name==e){t=this.components[i].obj;break}return t},function(e,t){if(t){for(var r=(t=t.paramData).type,i=t.data,n=((t=r)!=o.Video.LoadStart&&t!=o.Video.LoadedData&&t!=o.Video.LoadedMetadata||(r=a.loading),c(e,r),this.components.length),s=0;s<n;s++){var l=this.components[s].obj,u=l[r];u&&"function"==typeof u&&u.call(l,e,i)}r==o.Private.Dispose&&(this.components=[])}}),c=function(e,t){void 0===s[t]||t==s.pause&&(e._status==s.error||e._status==s.ended)||t==s.ready&&e._status==s.playing||(e._status=t)};t.exports=i},{"../../../lib/object":41,"../event/eventtype":69,"./lifecycle":92,"./status":94}],94:[function(e,t,r){t.exports={init:"init",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",error:"error",ended:"ended"}},{}],95:[function(e,t,r){function i(e,t){var r=e.el().style.height,i=e.el().style.width,n=(e.originalLayout={container:{height:r,width:i},video:{width:e.tag.style.width,height:e.tag.style.height}},document.body.clientHeight*(window.devicePixelRatio||1)+"px"),o=document.body.clientWidth+"px";width=t?(height=n,o):(height=r.indexOf("%")?r:r+"px",i.indexOf("%")?i:i+"px"),e.tag.style.width=o,e.tag.style.height=n,e.el().style.height=t?n:height}var n=e("../../lib/ua"),o=e("../../lib/dom");t.exports.isAndroidX5=function(){return n.os.android&&n.is_X5||n.dingTalk()},t.exports.adaptX5Play=function(e){n.os.android&&n.is_X5&&("h5"==e._options.x5_type&&(e.tag.setAttribute("x5-video-player-type",e._options.x5_type),window.onresize=function(){var t,r;i(e,e._options.x5_fullscreen||"center"==e._options.x5_video_position),"landscape"==(t=e)._x5VideoOrientation&&(t._originalTagWidth=t.tag.style.width,t._originalTagHeight=t.tag.style.height,(r=document.querySelector("#"+t.id()+" .prism-controlbar"))&&parseFloat(r.offsetHeight),t.tag.style.height="100%",t.tag.style.width=window.screen.width+"px")},e.tag.addEventListener("x5videoenterfullscreen",(function(){i(e,e._options.x5_fullscreen||"center"==e._options.x5_video_position),e.trigger("x5requestFullScreen")})),e.tag.addEventListener("x5videoexitfullscreen",(function(){var t,r;(t=e).originalLayout&&(r=t.originalLayout,t.el().style.height=r.container.height,t.el().style.width=r.container.width,t.tag.style.width=r.video.width,t.tag.style.height=r.video.height),e.trigger("x5cancelFullScreen"),e.fullscreenService.getIsFullScreen()&&e.fullscreenService.cancelFullScreen()})),e.on("requestFullScreen",(function(){"top"==e._options.x5_video_position&&o.removeClass(e.tag,"x5-top-left"),n.os.android&&n.is_X5&&e._options.x5LandscapeAsFullScreen&&(e.tag.setAttribute("x5-video-orientation","landscape"),e._x5VideoOrientation="landscape")})),e.on("cancelFullScreen",(function(){"top"==e._options.x5_video_position&&o.addClass(e.tag,"x5-top-left"),n.os.android&&n.is_X5&&e._options.x5LandscapeAsFullScreen&&(e.tag.setAttribute("x5-video-orientation","portrait"),i(e,e._options.x5_fullscreen||"center"==e._options.x5_video_position),e._x5VideoOrientation="portrait")}))),void 0!==e._options.x5_fullscreen&&e._options.x5_fullscreen&&(e.tag.setAttribute("x5-video-player-fullscreen",e._options.x5_fullscreen),o.addClass(e.tag,"x5-full-screen")),"top"==e._options.x5_video_position&&o.addClass(e.tag,"x5-top-left"),void 0!==e._options.x5_orientation)&&e.tag.setAttribute("x5-video-orientation",e._options.x5_orientation)}},{"../../lib/dom":31,"../../lib/ua":48}],96:[function(e,t,r){var i=e("../../lib/io"),n=e("../../config"),o=e("../../lib/constants"),a=e("../../lib/util"),s=e("../../lib/playerutil"),l=(e("../../lib/dom"),e("../../lang/index")),c=e("../base/event/eventtype"),u=e("../saas/drm"),p=e("../../lib/ua"),d=function(){function e(){}var t=e.prototype;return t.destroy=function(){},t.append=function(e){},t.remove=function(e,t){},t.isTextVisible=function(){},t.setTextVisibility=function(e){},e}();t.exports.inject=function(e,t,r,h,f,y,_){var g,v=h.source;function m(e){var t=this;this._drm.load(this._options.source,e.startTime).then((function(){if(t.trigger(c.Private.H5_Loading_Hide),e.continuePlay&&(t.play(),e.prevVariant)&&0!==e.prevVariant){for(var r,i=t._drm.getVariantTracks(),n=0;n<i.length;n++)if(i[n].id===e.prevVariant){r=i[n];break}r&&t._drm.selectVariantTrack(r,!0)}})).catch((function(e){b.call(t,e)}))}function S(){var e=o.ErrorCode.DrmNotSupported,t=l.get("Error_Drm_Not_Supported");e={mediaId:this._options.vid||"",error_code:e,error_msg:t},this.logError(e),this.trigger(c.Player.Error,e)}function b(e){var t=o.ErrorCode.DrmLoadError,r=l.get("Error_Drm_Load");t={mediaId:this._options.vid||"",error_code:t,error_msg:r+"("+e.code+")"},this.logError(t),this.trigger(c.Player.Error,t)}function T(){this._sessionTimer&&(clearTimeout(this._sessionTimer),this._sessionTimer=null)}function E(e,t){t=t.getVariantTracks().find((function(e){return e.active})),console.log("activeTrack",t),e.trigger(c.Private.QualityChange,{levelSwitch:!0,bitrate:t.bandwidth,desc:t.height})}!y&&(h=v,e._drm||!s.isDash(h)&&!s.isHls(h))||(e._isDrm=!0,e._drm=null,e._isLoadedDrm=!1,e._sessionTimer=null,e._isFairPlay=p.IS_MAC_SAFARI||p.IS_IOS,e._fairPlayHandlers={},console.log("use FairPlay",e._isFairPlay),t.prototype._checkDrmReady=function(){if(null==e._drm&&!e._isFairPlay)throw new Error("please invoke this method after ready event")},t.prototype.play=function(e){return this._checkDrmReady(),this._isManualPlay=e||!1,this.trigger(c.Private.Cover_Hide),this.tag.ended?this.replay():(this.getCurrentTime(),this.tag.paused&&this.tag.play()),this},t.prototype.initPlay=function(e){var t;function r(e,t){var r,i;e._antiRecord&&(console.log("Manual check before load source"),e._antiRecord.check())||(!shaka.Player.isBrowserSupported()||function(){if(p.IS_ANDROID)return!(!p.IS_UC&&!p.IS_FIREFOX)}()?S.call(e):(r=!e._drm,i=function(){var i;e._drm=new shaka.Player(e.tag),g(e,e._drm),i=e._options.isLive?"https://"+s.getLiveHostByRegion(e._options.region):"https://vod."+e._options.region+".aliyuncs.com",e._drm.configure({drm:{servers:{"com.widevine.alpha":i,"com.microsoft.playready":i}},textDisplayFactory:function(){return new d}}),e._drm.getNetworkingEngine().registerRequestFilter((function(t,r){shaka.util.StringUtils;var i=shaka.util.Uint8ArrayUtils;t==shaka.net.NetworkingEngine.RequestType.LICENSE&&(t=i.toBase64(new Uint8Array(r.body)),i=e._options.isLive?u.getRequestUrl(t,e):u.postData(t,e),r.uris[0]=i.url,r.headers["content-type"]="application/x-www-form-urlencoded",r.body=i.data)})),e._drm.getNetworkingEngine().registerResponseFilter((function(t,r){var i=shaka.util.StringUtils,n=shaka.util.Uint8ArrayUtils;t==shaka.net.NetworkingEngine.RequestType.LICENSE&&(t=i.fromUTF8(r.data),i=JSON.parse(t),t=e._options.isLive?i.Response.B64License:JSON.parse(i.License).b64License,r.data=n.fromBase64(t))})),e._drm.addEventListener("error",(function(e){console.log("errorMessage"),console.log(e.detail.code),console.log(e.detail)})),e._drm.load(e._options.source).then((function(){e._initPlayBehavior(t)})).catch((function(t){b.call(e,t)})),T.call(e),e._sessionTimer=setTimeout((function(){b.call(e,{code:"session timeout"}),e._drm&&e._drm.destroy()}),e._player.getOptions().drmSessionTimeout||5e3),f&&f(e._drm),r&&e._executeReadyCallback()},e.destroy((function(e){try{i()}catch(e){console.log(e)}}))))}a.contentProtocolMixed(v)?((t={mediaId:this._options.vid||"",error_code:o.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=l.get("Request_Block_Text"),this.trigger(c.Player.Error,t)):(this._waitingTimeoutCount=1,this._isFairPlay?(this.trigger(c.Private.H5_Loading_Show),function(e,t){var r;this._isFairPlay&&(function(){return p.IS_IOS?(e=parseInt(p.os.version),console.log("osVersion",e),12<=e):p.IS_MAC_SAFARI?(e=parseInt(p.browser.version),console.log("browserVersion",e),12<=e):void 0;var e}()?((r=this).destroy(),u.loadCertificate(this,(function(){e&&e(),r._initPlayBehavior(t,r._options.source),r._executeReadyCallback()}))):S.call(this))}.call(this,f,e)):this._isLoadedDrm&&"undefined"!=typeof shaka?r(this,e):(this.trigger(c.Private.H5_Loading_Show),function(e){var t="aliplayer-drm-min.js",r=n.domain?"https://"+n.domain+"/de/prismplayer/"+n.h5Version+"/drm/"+t:"/build/drm/"+t,o=this;i.loadJS(r,(function(){shaka.polyfill.installAll(),e.apply(o)}))}.call(this,(function(){this._isLoadedDrm=!0,r(this,e)}))))},t.prototype.destroy=function(e){var t;this._drm?(T.call(t=this),this._drm.destroy().then((function(){t._drm=null,"function"==typeof e&&e(t)}))):(this._isFairPlay&&this._destroyFairPlay(),"function"==typeof e&&e(this))},t.prototype._destroyFairPlay=function(){u.destroyFairPlay.call(this)},t.prototype.dispose=function(){r.dispose.call(this),this.destroy()},t.prototype._switchLevel=function(e,t){if(t=t||{},this.trigger(c.Player.LevelSwitch),this._switchedLevel=!0,this._isFairPlay){this._manuallySwitchDrmLevel=!t.isAuto;var r=this.autoplay||"pause"!=this._status;this._loadByUrlInner(e,this.getCurrentTime(),r,!0)}else if(t.isAuto)this._drm.configure({abr:{enabled:!0}}),E(this._player,this._drm);else{for(var i,n=this._drm.getVariantTracks(),o=0;o<n.length;o++){var a=n[o];if(Number(a.bandwidth)===Number(t.bitrate)&&Number(a.height)===Number(t.resolution.split("x")[1])){i=a;break}}console.log("find track",i),this._drm.configure({abr:{enabled:!1}}),this._drm.selectVariantTrack(i,!this._options.seamlessHandover)}var s=this;setTimeout((function(){s.trigger(c.Player.LevelSwitched),this._switchedLevel=!1}),1e3)},t.prototype._getDRMEncryptItem=function(){var e=this._urls;if(e&&0<e.length)for(var t=e.length,r=0;r<t;r++){var i=e[r];if(i.Url==this._options.source&&+i.encryption)return i}return""},t.prototype._getItemBySource=function(){var e=this._urls;if(e&&0<e.length)for(var t=e.length,r=0;r<t;r++){var i=e[r];if(i.Url==this._options.source)return i}return""},g=function(e,t){t.addEventListener("error",(function(t){var r=e,i="Error code:"+(t=t.detail).code+"message:"+t.message,n=(console.log(i),o.ErrorCode.OtherError);i=l.get("Error_Play_Text"),t.code==shaka.util.Error.Code.EXPIRED?function(){var e=this,t=(this.trigger(c.Private.H5_Loading_Show),null);this._options.isLive||(t=this.getCurrentTime());var r,i=!this.paused(),n=this._drm.getConfiguration().abr.enabled;if(!n)for(var o=this._drm.getVariantTracks(),a=0;a<o.length;a++)if(o[a].active){r=o[a].id;break}var s={startTime:t,continuePlay:i,prevVariant:r,isAdaptive:n};"function"==typeof this._options.refreshAccessInfo?this._options.refreshAccessInfo().then((function(t){(t=t||{}).accessKeyId&&(e._options.accessKeyId=t.accessKeyId),t.securityToken&&(e._options.securityToken=t.securityToken),t.accessKeySecret&&(e._options.accessKeySecret=t.accessKeySecret),m.call(e,s)})):m.call(e,s)}.call(r):(t.code==shaka.util.Error.Code.HTTP_ERROR?(n=o.ErrorCode.NetworkError,i=l.get("Http_Error")):t.code==shaka.util.Error.Code.TIMEOUT?(n=o.ErrorCode.LoadingTimeout,i=l.get("Error_Waiting_Timeout_Text")):t.code==shaka.util.Error.Code.LICENSE_REQUEST_FAILED?(n=o.ErrorCode.DrmLicenseRequestFailed,i=l.get("Error_Drm_License_Request_Failed")):t.Category==shaka.util.Error.NETWORK&&(n=o.ErrorCode.NetworkError,i=l.get("Error_Network_Text")),setTimeout((function(){r.trigger(c.Private.Play_Btn_Hide)})),r.checkOnline()&&(n={mediaId:r._options.vid||"",error_code:n,error_msg:t.message},r.logError(n),n.display_msg=t.code+"|"+i,r.trigger(c.Player.Error,n)))})),t.addEventListener("variantchanged",(function(e){console.log("DRM Event: variantchanged",e)})),t.addEventListener("abrstatuschanged",(function(e){console.log("DRM Event: abrstatuschanged",e)})),t.addEventListener("drmsessionupdate",(function(t){console.log("DRM Event: drmsessionupdate",t),T.call(e)})),t.addEventListener("expirationupdated",(function(e){console.log("DRM Event: expirationupdated",e),console.log("Exp:",this.getExpiration())})),t.addEventListener("adaptation",(function(r){console.log("adaptation",r),E(e,t)})),t.addEventListener("trackschanged",(function(r){console.log("DRM EVENT: trackschanged",t.getTextLanguages(),t.getTextTracks());var i=t.getTextLanguages();i&&i.length&&(i=function(e){var t={subtitle:"subtitles",caption:"captions"},r=(console.log("Building track config"),e.getManifest().textStreams||[]),i=(console.log("textStreams",r),e.getTextLanguages()),n=(console.log("languageList",i),[]);try{r.forEach((function(e){i.includes(e.language)&&n.push({kind:t[e.kind]||e.kind,label:e.label,srclang:e.language,src:Array.from(e.segmentIndex)[0].getUris()[0]})}))}catch(e){console.log("error in retrieving text track url: ",e)}return n}(t),e.trigger(c.Private.TextTrackFounded,{from:"drm",textTracks:i}),e.trigger(c.Private.CCReset))}))})}},{"../../config":14,"../../lang/index":22,"../../lib/constants":27,"../../lib/dom":31,"../../lib/io":39,"../../lib/playerutil":45,"../../lib/ua":48,"../../lib/util":50,"../base/event/eventtype":69,"../saas/drm":106}],97:[function(e,t,r){var i=e("../base/player"),n=e("./drminjector"),o=i.extend({init:function(e,t){n.inject(this,o,i.prototype,t,(function(e){})),t._native=!1,i.call(this,e,t)}});t.exports=o},{"../base/player":90,"./drminjector":96}],98:[function(e,t,r){var i=e("../../ui/component"),n=e("../../lib/data"),o=e("../../lib/ua"),a=e("../../lib/constants"),s=e("../../lib/dom"),l=e("../../lib/object"),c=e("../../config"),u=e("../../lang/index"),p=e("../../lib/playerutil"),d=e("../../lib/util"),h=e("../../ui/component/info-display"),f=e("../../ui/component/error-display"),y=e("../../feature/autoPlayDelay"),_=e("../../commonui/autostreamselector"),g=e("../base/event/eventtype"),v=e("../saas/ststoken");e=i.extend({init:function(e,t){var r;void 0===t.skinLayout&&(t.skinLayout=p.defaultFlashLayout),i.call(this,this,t),this._id="prism-player-"+n.guid(),this.tag=e,this._el=this.tag,this._childrenUI=[f],this.initChildren(),this.id=this._id,window[this.id]=this,u.setCurrentLanguage(this._options.language,"flash",this._options.languageTexts),d.openInFile()?(t={mediaId:this._options.vid||"",error_code:a.ErrorCode.FormatNotSupport,error_msg:u.get("Open_Html_By_File","flash")},this.trigger(g.Private.Error_Show,t)):o.IS_MOBILE?this.trigger(g.Private.Error_Show,{mediaId:this._options.vid||"",error_code:a.ErrorCode.FormatNotSupport,error_msg:u.get("Cant_Use_Flash_On_Mobile","flash")}):(this._options.vid&&this._options.accessKeyId&&this._options.securityToken&&this._options.accessKeySecret?v.getPlayAuth((r=this)._options,(function(e){r._options.playauth=e,r._createPlayer()}),(function(e){var t={mediaId:r._options.vid,error_code:e.Code,error_msg:e.Message};e.sri&&(t.sri=e.sri),t.display_msg=e.display_msg,r.trigger(g.Private.Error_Show,t)}),"flash"):this._createPlayer(),this._status="init")},_createPlayer:function(){var e,t;this._options.autoPlayDelay?(t=new y(this),e=this,t.handle((function(){e._options.autoplay=!0,e._initPlayer(),e._childrenUI=[h,_],e.initChildren()}))):(this._initPlayer(),this._childrenUI=[h,_],this.initChildren()),o.HAS_FLASH||(t=u.get("Flash_Not_Ready","flash"),this.trigger(g.Private.Info_Show,{text:t,align:"tc",isBlack:!1}))},_initPlayer:function(){var e="//"+c.domain+"/de/prismplayer-flash/"+c.flashVersion+"/PrismPlayer.swf",t=(this._options.playerSwfPath?e=this._options.playerSwfPath:c.domain?-1<c.domain.indexOf("localhost")&&(e="//"+c.domain+"/build/flash//PrismPlayer.swf"):e="de/prismplayer-flash/"+c.flashVersion+"/PrismPlayer.swf",this._comboFlashVars()),r=this._options.wmode||"opaque";this.tag.innerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=5,0,0,0" width="100%" height="100%" id="'+this.id+'"><param name=movie value="'+e+'"><param name=quality value=High><param name="FlashVars" value="'+t+'"><param name="WMode" value="'+r+'"><param name="AllowScriptAccess" value="always"><param name="AllowFullScreen" value="true"><param name="AllowFullScreenInteractive" value="true"><embed name="'+this.id+'" src="'+e+'" quality=high pluginspage="//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" width="100%" height="100%" AllowScriptAccess="always" AllowFullScreen="true" AllowFullScreenInteractive="true" WMode="'+r+'" FlashVars="'+t+'"></embed></object>'},_getPlayer:function(e){return-1!=navigator.appName.indexOf("Microsoft")?document.getElementById(e):document[e]},_getLowerQualityLevel:function(){var e,t=this._getVideoUrls();return t&&(e=t.Urls,t=t.index,!(e&&0==e.length||-1==t))&&0<t?{item:e[t-1],index:t-1}:""},_comboFlashVars:function(){var e=encodeURIComponent(o.getReferer()),t=o.getHref(),r=encodeURIComponent(t),i="",n=(e={autoPlay:(t&&(i=o.getHost(t)),t=this._options).autoplay?1:0,isInner:0,actRequest:1,vid:t.vid,diagnosisButtonVisible:t.diagnosisButtonVisible?1:0,domain:t.domain||"//tv.taobao.com",statisticService:t.statisticService||c.logReportTo,videoInfoService:t.videoInfoService||"/player/json/getBaseVideoInfo.do",disablePing:t.trackLog?0:1,namespace:this.id,barMode:0!=t.barMode?1:0,isLive:t.isLive?1:0,waterMark:t.waterMark,environment:t.environment,vurl:t.source?encodeURIComponent(t.source):"",plugins:t.plugins||"",snapShotShow:t.snapshot?1:0,accessId:t.accId||"",accessKey:t.accSecret||"",apiKey:t.apiKey||"",flashApiKey:t.flashApiKey||"",disableSeek:t.disableSeek?1:0,disableFullScreen:t.disableFullScreen?1:0,stsToken:t.stsToken||"",domainRegion:t.domainRegion||"",authInfo:t.authInfo?encodeURIComponent(t.authInfo):"",playDomain:t.playDomain||"",stretcherZoomType:t.stretcherZoomType||"",playauth:t.playauth?t.playauth.replace(/\+/g,"%2B"):"",prismType:t.prismType||0,formats:t.formats||"",notShowTips:t.notShowTips?1:0,showBarTime:t.showBarTime||0,showBuffer:0==t.showBuffer?0:1,rePlay:t.rePlay?1:0,encryp:t.encryp||"",secret:t.secret||"",mediaType:"video",logInfo:{ud:o.getHost(t.source),os:o.os.name,ov:o.os.version||"",et:o.browser.name,ev:o.browser.version||"",uat:o.USER_AGENT,r:e,pu:r,app_n:i}},[]);return void 0!==t.rtmpBufferTime&&(e.rtmpBufferTime=t.rtmpBufferTime),t.cover&&(e.cover=t.cover),t.extraInfo&&(e.extraInfo=encodeURIComponent(JSON.stringify(t.extraInfo))),e.logInfo&&(e.logInfo=encodeURIComponent(JSON.stringify(e.logInfo))),e.languageData=encodeURIComponent(JSON.stringify(u.getLanguageData("flash"))),e.language=u.getCurrentLanguage(),l.each(e,(function(e,t){n.push(e+"="+t)})),n.join("&")},initChildren:function(){for(var e=this._childrenUI.length,t=0;t<e;t++){var r=new this._childrenUI[t](this,this._options),i=r.el();i.id=r.id(),this.contentEl().appendChild(i),r.bindEvent()}var n=document.querySelector("#"+this._options.id+" .prism-info-display");s.css(n,"display","none")},flashReady:function(){this.flashPlayer=this._getPlayer(this.id),this._isReady=!0;var e=this._options.skinRes,t=this._options.skinLayout;if(!1!==t&&!l.isArray(t))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");if("string"!=typeof e)throw new Error("PrismPlayer Error: skinRes should be string!");e=0!=t&&0!==t.length&&{skinRes:e,skinLayout:t},this.flashPlayer.setPlayerSkin(e),this.trigger("ready");var r=this;window.addEventListener("beforeunload",(function(){try{r.flashPlayer.setPlayerCloseStatus()}catch(e){}}))},jsReady:function(){return!0},snapshoted:function(e){var t=d.toBinary(e);e="data:image/jpeg;base64,"+e,this.trigger("snapshoted",{time:this.getCurrentTime(),base64:e,binary:t})},uiReady:function(){this._status="ready",this.trigger("uiReady")},loadedmetadata:function(){"ended"!=this._status&&(this._status="loading",this.trigger("loadedmetadata"))},onPlay:function(){this._status="play",this.trigger("play"),this._clearTimeoutHandle(),this.trigger(g.Private.AutoStreamHide)},onEnded:function(){this._clearTimeoutHandle(),this._status="ended",this.trigger("ended")},onPause:function(){this._status="pause",this._clearTimeoutHandle(),this.trigger(g.Private.AutoStreamHide),this.trigger("pause")},onBulletScreenReady:function(){this.trigger("bSReady")},onBulletScreenMsgSend:function(e){this.trigger("bSSendMsg",e)},onVideoRender:function(e){this._clearTimeoutHandle(),this.trigger("videoRender"),this.trigger("canplay",{loadtime:e})},onVideoError:function(e){this._clearTimeoutHandle(),this._status="error",this.trigger("error",{errortype:e})},onM3u8Retry:function(){this.trigger("m3u8Retry")},hideBar:function(){this.trigger("hideBar")},showBar:function(){this.trigger("showBar")},liveStreamStop:function(){this.trigger("liveStreamStop")},stsTokenExpired:function(){this._status="error",this.trigger("stsTokenExpired")},onVideoBuffer:function(){var e;"pause"!=this._status&&(this._status="waiting",this.trigger("waiting"),this._clearTimeoutHandle(),(e=this)._checkTimeoutHandle=setTimeout((function(){e.trigger(g.Private.AutoStreamShow)}),1e3*this._options.loadDataTimeout),this._checkVideoStatus())},startSeek:function(e){this.trigger("startSeek",e)},completeSeek:function(e){this.trigger("completeSeek",e)},_invoke:function(){var e=arguments[0],t=arguments;if(Array.prototype.shift.call(t),!this.flashPlayer)throw new Error("PrismPlayer Error: flash player is not ready，please use api after ready event occured!");if("function"!=typeof this.flashPlayer[e])throw new Error("PrismPlayer Error: function "+e+" is not found!");return this.flashPlayer[e].apply(this.flashPlayer,t)},play:function(){this._invoke("playVideo")},replay:function(){this._invoke("replayVideo")},pause:function(){this._invoke("pauseVideo")},stop:function(){this._invoke("stopVideo")},seek:function(e){this._invoke("seekVideo",e)},getCurrentTime:function(){return this._invoke("getCurrentTime")},getDuration:function(){return this._invoke("getDuration")},getStatus:function(){return this._status},_getVideoUrls:function(){var e=this._invoke("getVideoUrls"),t=[];if(e&&e.Urls)for(var r=0;r<e.Urls.length;r++){var i=e.Urls[r].value,n=i.desc.indexOf("_"),o=u.get(i.definition,"flash");i.desc=0<n?o+"_"+i.height:o,t.push(i)}return{Urls:t,index:e.index}},_getVideoStatus:function(){return this._invoke("getVideoStatus")},_checkVideoStatus:function(){var e;this.flashPlayer&&!this._checkVideoStatusHandler&&(e=this,function t(){e._checkVideoStatusHandler=setTimeout((function(){var r=e._getVideoStatus();"playing"==r.videoStatus&&"bufferFull"==r.bufferStatus?(e._status="playing",e._clearTimeoutHandle()):"videoPlayOver"==r.videoStatus&&(e._status="ended",e._clearTimeoutHandle()),t()}),500)}())},_clearTimeoutHandle:function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null)},_changeStream:function(e){return this._invoke("changeStream",e)},mute:function(){this.setVolume(0)},unMute:function(){this.setVolume(.5)},getVolume:function(){return this._invoke("getVolume")},setVolume:function(e){this._invoke("setVolume",e)},loadByVid:function(e){this._invoke("loadByVid",e,!1)},loadByUrl:function(e,t){this._invoke("loadByUrl",e,t)},dispose:function(){this._clearTimeoutHandle(),this._checkVideoStatusHandler&&(clearTimeout(this._checkVideoStatusHandler),this._checkVideoStatusHandler=null),this._invoke("pauseVideo");var e=this;setTimeout((function(){e.off("completeSeek"),e.off("startSeek"),e.off("stsTokenExpired"),e.off("liveStreamStop"),e.off("showBar"),e.off("hideBar"),e.off("m3u8Retry"),e.off("error"),e.off("canplay"),e.off("pause"),e.off("ended"),e.off("play"),e.off("loadedmetadata"),e.off("snapshoted"),e.off("uiReady"),e.off("ready"),e.flashPlayer=null,e._el&&(e._el.innerHTML="")}))},showBSMsg:function(e){this._invoke("showBSMsg",e)},setToastEnabled:function(e){this._invoke("setToastEnabled",e)},setLoadingInvisible:function(){this._invoke("setLoadingInvisible")},setPlayerSize:function(e,t){this._el.style.width=e,this._el.style.height=t}}),t.exports=e},{"../../commonui/autostreamselector":11,"../../config":14,"../../feature/autoPlayDelay":17,"../../lang/index":22,"../../lib/constants":27,"../../lib/data":29,"../../lib/dom":31,"../../lib/object":41,"../../lib/playerutil":45,"../../lib/ua":48,"../../lib/util":50,"../../ui/component":129,"../../ui/component/error-display":134,"../../ui/component/info-display":137,"../base/event/eventtype":69,"../saas/ststoken":113}],99:[function(e,t,r){var i=e("../../lib/io"),n=e("../../config"),o=e("../../lib/constants"),a=e("../../lib/util"),s=e("../../lib/playerutil"),l=e("../../lib/ua"),c=e("../../lang/index"),u=e("../base/event/eventtype");t.exports.inject=function(e,t,r,p,d,h){var f,y=p.source;!h&&(p=y,e._flv||!s.isFlv(p))||(e._Type=t,e._superType=r,e._superPt=r.prototype,e._disposed=!1,t.prototype._checkFlvReady=function(){if(null==e._flv)throw new Error("please invoke this method after ready event")},e._isFlv=!0,e._flv=null,e._isLoadedFlv=!1,e._originalUrl="",t.prototype.play=function(e){return this._checkFlvReady(),this._isManualPlay=e||!1,this.trigger(u.Private.Cover_Hide),this._options.isLive&&e?this._loadByUrlInner(this._options.source,0,e):this.tag.ended||this._ended?this.replay():(0==this._seeking&&(e=0,this.tag.ended||this._ended||0==(e=this.getCurrentTime())&&(e=-1),-1!=e)&&this.seek(e),this.tag.paused&&(this._hasLoaded||this._flv.load(),this._flv.play())),this},t.prototype.seek=function(e){this._checkFlvReady(),this._seeking=!0;var t=this.getDuration();t<=(e=Math.floor(e))&&(e=t);try{this._flv.currentTime=e}catch(e){console.log(e)}return this},t.prototype.pause=function(e){return this._checkFlvReady(),this._isManualPause=e||!1,this._flv.pause(),this},t.prototype.getProgramDateTime=function(){var e;return this._checkFlvReady(),this._metadata?(e=(e=this._flv.getFirstSample())&&e.pts?e.pts:0,console.log("推流时间："+this._metadata.NtpTime),console.log("首帧PTS："+e),this._metadata.NtpTime+e):""},t.prototype.initPlay=function(e){var t;function r(e,t){var r,i=!e._flv,n=(e._destroyFlv(),e._options.isLive),o={isLive:n,enableWorker:e._options.enableWorker,stashInitialSize:2048},a=(l.IS_IE11&&(o.enableWorker=!1),{type:"flv",isLive:n,url:e._options.source});for(r in n?(o.enableStashBuffer=e._options.enableStashBufferForFlv,stashInitialSize=e._options.stashInitialSizeForFlv,o.autoCleanupSourceBuffer=!1):o.lazyLoadMaxDuration=600,e._options.isLive&&(e._options.flvFrameChasing&&(o.flvFrameChasing=e._options.flvFrameChasing),e._options.chasingFirstParagraph&&(o.chasingFirstParagraph=e._options.chasingFirstParagraph),e._options.chasingSecondParagraph&&(o.chasingSecondParagraph=e._options.chasingSecondParagraph),e._options.chasingFirstSpeed&&(o.chasingFirstSpeed=e._options.chasingFirstSpeed),e._options.chasingSecondSpeed)&&(o.chasingSecondSpeed=e._options.chasingSecondSpeed),e._options.flvOption)"cors"==r||"hasAudio"==r||"withCredentials"==r||"hasVideo"==r||"type"==r?a[r]=e._options.flvOption[r]:o[r]=e._options.flvOption[r];e._originalUrl=e._options.source,flvjs.LoggingControl.enableAll=e._options.debug,e._flv=flvjs.createPlayer(a,o),f(e,e._flv),e._flv.on(flvjs.Events.MEDIA_INFO,(function(t){e._metadata=t.metadata})),e._flv.on(flvjs.Events.METADATA_ARRIVED,(function(t){t&&t.dataContent&&t.dataContent.length&&e.trigger(u.Private.SeiFrame,{dataContent:t.dataContent,pts:t.pts})})),e._flv.attachMediaElement(e.tag),e._initPlayBehavior(t)&&((e._options.preload||e._options.autoplay)&&(e._hasLoaded=!0,e._flv.load()),e._options.autoplay&&!e.tag.paused&&e._flv.play(),d&&d(e._flv),i)&&(e._executeReadyCallback(),e._urls)&&0<e._urls.length&&!e._options.defaultDefinition&&(e._currentPlayIndex=s.findSelectedStreamLevel(e._urls),n=e._urls[e._currentPlayIndex],e._options.source=n.Url,e.trigger(u.Private.SourceLoaded,n))}l.browser.safari&&this.trigger(u.Private.Snapshot_Hide),a.contentProtocolMixed(y)?((t={mediaId:this._options.vid||"",error_code:o.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=c.get("Request_Block_Text"),this.trigger(u.Player.Error,t)):(that=this)._isLoadedFlv&&"undefined"!=typeof Hls?setTimeout((function(){r(that,e)}),1e3):(this.trigger(u.Private.H5_Loading_Show),function(e,t){var r="aliplayer-flv-min.js",o=n.domain?"https://"+n.domain+"/de/prismplayer/"+n.h5Version+"/flv/"+r:"/build/flv/"+r,a=this;i.loadJS(o,(function(){e.apply(a)}))}.call(that,(function(){this._isLoadedFlv=!0,r(this,e)}),this._options.debug))},t.prototype._destroyFlv=function(){try{this._flv&&(this._flv.pause(),this._flv.destroy())}catch(e){console.log(e)}this.loaded=!1,this._hasLoaded=!1,this._flv=null},t.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyFlv(),this._superPt&&(t.prototype.play=this._superPt.play,t.prototype.pause=this._superPt.pause,t.prototype.initPlay=this._superPt.initPlay,t.prototype.seek=this._superPt.seek,t.prototype.canSeekable=this._superPt.canSeekable))},t.prototype.canSeekable=function(e){var t=this._flv.mediaInfo;return!(!this._flv._isTimepointBuffered(e)&&t&&!t.hasKeyframesIndex)},f=function(e,t){var r=!1;t.on(flvjs.Events.ERROR,(function(t,i,a){var s,l,p=o.ErrorCode.OtherError,d=c.get("Error_Play_Text");t!==flvjs.ErrorTypes.BUFFER_FULL&&(i==flvjs.ErrorDetails.NETWORK_EXCEPTION?!(t=e.getOptions().source)||0!=t.toLowerCase().indexOf("http://")&&0!=t.toLowerCase().indexOf("https://")?(p=o.ErrorCode.InvalidSourceURL,d=c.get("Error_Invalidate_Source_Widthout_Protocal"),r=!0):d=navigator.onLine?(p=o.ErrorCode.RequestDataError,c.get("Maybe_Cors_Error")):(p=o.ErrorCode.NetworkError,c.get("Error_Network_Text")):i==flvjs.ErrorDetails.NETWORK_STATUS_CODE_INVALID?"404"==a.code?(p=o.ErrorCode.NotFoundSourceURL,d=c.get("Error_Not_Found")):"403"==a.code?(p=o.ErrorCode.AuthKeyExpired,d=c.get("Error_AuthKey_Text"),r=!0):(p=o.ErrorCode.NetworkError,d=c.get("Error_Network_Text")):i==flvjs.ErrorDetails.NETWORK_TIMEOUT?(p=o.ErrorCode.LoadingTimeout,d=c.get("Error_Waiting_Timeout_Text")):i!=flvjs.ErrorDetails.MEDIA_FORMAT_UNSUPPORTED&&i!=flvjs.ErrorDetails.MEDIA_CODEC_UNSUPPORTED||(p=o.ErrorCode.FormatNotSupport,d=c.get("Error_H5_Not_Support_Text"),r=!0),t=function(){var t;setTimeout((function(){e.trigger(u.Private.Play_Btn_Hide)})),e.checkOnline()&&(t={mediaId:e._options&&e._options.vid?e._options.vid:"",error_code:p,error_msg:a.msg},e.logError(t),t.display_msg=d,n.cityBrain&&(e.flv=null),e.trigger(u.Player.Error,t))},e._options&&e._options.isLive&&!r?(s=e._options).liveRetry>e._liveRetryCount?(0==e._liveRetryCount&&e.trigger(u.Player.OnM3u8Retry),l=s.liveRetryInterval+s.liveRetryStep*e._liveRetryCount,e._liveRetryCount++,setTimeout((function(){e._loadByUrlInner(s.source)}),1e3*l)):(e._liveErrorHandle&&clearTimeout(e._liveErrorHandle),e.trigger(u.Player.LiveStreamStop),e._liveErrorHandle=setTimeout(t,500)):i===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&11===a.code&&e.getCurrentTime()<e.getDuration()?(e._flv.unload(),e._flv.load(),e._flv.detachMediaElement(),e._flv.attachMediaElement(e.tag)):r?(e._flv.unload(),t()):e._reloadForVod()||t())}))})}},{"../../config":14,"../../lang/index":22,"../../lib/constants":27,"../../lib/io":39,"../../lib/playerutil":45,"../../lib/ua":48,"../../lib/util":50,"../base/event/eventtype":69}],100:[function(e,t,r){var i=e("../base/player"),n=e("./flvinjector"),o=i.extend({init:function(e,t){n.inject(this,o,i,t,(function(e){})),t._native=!1,i.call(this,e,t)}});t.exports=o},{"../base/player":90,"./flvinjector":99}],101:[function(e,t,r){var i=e("../../lib/io"),n=e("../../config"),o=e("../../lib/constants"),a=e("../../lib/util"),s=e("../../lib/playerutil"),l=e("../../lib/ua"),c=e("../../lang/index"),u=e("../base/event/eventtype"),p=e("../../lib/hls/hlsparse");function d(){this&&this._hls&&(this._hls.stopLoad(),this._hls.destroy(),this._hls=null)}t.exports.inject=function(e,t,r,h,f,y){e._hls2=!1;var _,g,v=h.source,m=h.useHlsPluginForSafari;h=h.useHlsPlugOnMobile,(f||y||(_=v,!e._hls&&s.isHls(_)&&(!s.canPlayHls()||s.isSafariUsedHlsPlugin(m)||h&&s.isUsedHlsPluginOnMobile())))&&(e._Type=t,e._superType=r,e._superPt=r.prototype,e._disposed=!1,t.prototype._checkHlsReady=function(){if(null==e._hls)throw new Error("please invoke this method after ready event")},e._isHls=!0,e._hls=null,e._isLoadedHls=!1,e._stopLoadAsPaused=!0,t.prototype.play=function(e){return this._checkHlsReady(),this._isManualPlay=e||!1,this.trigger(u.Private.Cover_Hide),this._options.autoplay||this._options.preload||this._loadSourced||(this._loadSourced=!0,this._options._autoplay=!0,this._hls.loadSource(this._options.source)),this.tag.ended||this._ended?this.replay():this.tag.paused&&(this.tag.play(),this._stopLoadAsPaused)&&(e=this.getCurrentTime(),this._hls.startLoad(e)),this},t.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this._hls.startLoad(0),this.tag.play(),this},t.prototype.pause=function(e){return this.tag&&(this._checkHlsReady(),this.tag.pause(),this._stopLoadAsPaused)&&this._hls.stopLoad(),this._isManualPause=e||!1,this},t.prototype.stop=function(){return this._checkHlsReady(),this.tag.setAttribute("src",null),this._hls.stopLoad(),this},t.prototype.seek=function(e){this._checkHlsReady();try{this._superPt.seek.call(this,e),this.tag.paused&&this._stopLoadAsPaused&&this._hls.startLoad(e)}catch(e){console.log(e)}return this},t.prototype.getProgramDateTime=function(){if(this._checkHlsReady(),-1==this._hls.currentLevel)return"";var e=this._hls.currentLevel;return(e=this._hls.levels[e].details)&&(e=e.programDateTime,console.log("ProgramDateTime="+e),e)?new Date(e).valueOf():0},t.prototype.getCurrentPDT=function(){var e,t;return this._checkHlsReady(),-1==this._hls.currentLevel?"":(e=(t=this._hls.streamController.fragPlaying||{}).pdt)?(t=1e3*t.startPTS,e+(1e3*this.getCurrentTime()-t)):0},t.prototype._reloadAndPlayForM3u8=function(){0==this._liveRetryCount&&this.trigger(u.Player.OnM3u8Retry),this._liveRetryCount++},t.prototype._switchLevel=function(e){var t=this.getCurrentTime(),r=!this._qualityService.levels.length&&1<this._urls.length,i=(r&&(this.pause(),this._hls.stopLoad(),this._hls.detachMedia(),this._hls.destroy()),this.trigger(u.Player.LevelSwitch),this._hls.levels),n=!0;r&&this._loadByUrlInner(e,t,n,!0);for(var o=0;o<i.length;o++)if(i[o].url==e||i[o].url[0]==e){n=!1,this._hls2&&this._options.seamlessHandover?(this._hls.loadLevel=o,console.log("Seamlessly set nextLevel to",o)):(this._hls.currentLevel=o,console.log("Immediately set currentLevel to",o));break}n&&(this._hls.currentLevel=-1),this._switchedLevel=!0;var a=this;setTimeout((function(){a.trigger(u.Player.LevelSwitched),this._switchedLevel=!1}),1e3)},t.prototype._getHlsVersion=function(e){var t,r,i;function n(e,t){var r={mediaId:(r=this.getOptions()||{}).vid||"",mediaAuth:r.mediaAuth||"",error_code:o.ErrorCode.LoadedMetadata,error_msg:c.get("Error_Play_Text")};404===(t=Number(t))?(r.error_code=o.ErrorCode.NotFoundSourceURL,r.error_msg=c.get("Error_Not_Found")):403===t?(r.error_code=o.ErrorCode.AuthKeyExpired,r.error_msg=c.get("Error_AuthKey_Text")):0===t&&navigator.onLine?(r.error_code=o.ErrorCode.RequestDataError,r.error_msg=r.error_msg+"，"+c.get("Maybe_Cors_Error")):r.error_msg=c.get("Error_Load_M3U8_Failed_Text"),this.logError(r),r.display_msg=r.error_msg,this.trigger(u.Player.Error,r)}!0===this._options.useHls2?(this._hls2=!0,e()):!1===this._options.useHls2||!this._options.isLive||y?e():this._options.lowLatencyMode?(this._hls2=!0,e()):(t=this,r=new p,i=t._options.source,r.load(i,(function(o){var a,s;o.levels&&0!==o.levels.length?a=o.levels[0].url:(a=i,s=o.string),r.loadMediaPlaylist({url:a,string:s},(function(r){r&&(t._hls2="number"==typeof r.partTarget),e()}),n.bind(t))}),n.bind(t)))},t.prototype.initPlay=function(e){var t,r;function p(e,t){if(!e._antiRecord||(console.log("Manual check before load source"),!e._antiRecord.check())){var r,i=!e._hls,n=(e._destroyHls(),{xhrSetup:function(t,r){t.withCredentials=e._options.withCredentials||!1}}),o=e._options.loadingTimeOut||e._options.hlsLoadingTimeOut;for(r in o&&(n.manifestLoadingTimeOut=o,n.levelLoadingTimeOut=o,n.fragLoadingTimeOut=o),e._options.liveSyncDurationCount&&(n.liveSyncDurationCount=e._options.liveSyncDurationCount),e._options.defaultBandwidth&&(n.defaultBandwidth=e._options.defaultBandwidth),e._options.isLive&&(e._options.hlsFrameChasing&&(n.hlsFrameChasing=e._options.hlsFrameChasing),e._options.chasingFirstParagraph&&(n.chasingFirstParagraph=e._options.chasingFirstParagraph),e._options.chasingSecondParagraph&&(n.chasingSecondParagraph=e._options.chasingSecondParagraph),e._options.chasingFirstSpeed&&(n.chasingFirstSpeed=e._options.chasingFirstSpeed),e._options.chasingSecondSpeed)&&(n.chasingSecondSpeed=e._options.chasingSecondSpeed),!e._hls2||e._options.isLive&&!l.IS_IE11&&(n.backBufferLength=12,n.liveDurationInfinity=!0),e._options.nudgeMaxRetry&&(n.nudgeMaxRetry=e._options.nudgeMaxRetry),e._options.maxMaxBufferLength&&(n.maxMaxBufferLength=e._options.maxMaxBufferLength),e._options.maxBufferSize&&(n.maxBufferSize=e._options.maxBufferSize),e._options.fragLoadingRetryDelay&&(n.fragLoadingRetryDelay=e._options.fragLoadingRetryDelay),e._options.maxBufferLength&&(n.maxBufferLength=e._options.maxBufferLength),e._options.hlsBandWidthUpCacheTime&&(n.abrBandWidthUpCacheTime=e._options.hlsBandWidthUpCacheTime),e._options.seamlessHandover&&(n.seamlessHandover=e._options.seamlessHandover),e._options.accessKeyId&&(n.accessKeyId=e._options.accessKeyId),e._options.accessKeySecret&&(n.accessKeySecret=e._options.accessKeySecret),e._options.securityToken&&(n.securityToken=e._options.securityToken),e._options.app&&(n.app=e._options.app),e._options.stream&&(n.stream=e._options.stream),e._options.domain&&(n.domain=e._options.domain),e._options.regionId&&(n.regionId=e._options.regionId),f&&(n._sce_dlgtqredxx=f),n.enableWorker=e._options.enableWorker,n.debug=e._options.debug,e._stopLoadAsPaused=e._options.hlsOption.stopLoadAsPaused,e._options.hlsOption)n[r]=e._options.hlsOption[r];l.IS_IE11&&(n.enableWorker=!1),e._hls=new Hls(n),g(e,e._hls),e._loadSourced=!1,e._hls.attachMedia(e.tag),e._hls.on(Hls.Events.INIT_PTS_FOUND,(function(t,r){e._initPTS=r.initPTS})),e._hls.on(Hls.Events.FRAG_PARSING_USERDATA,(function(t,r){r&&r.dataContent&&r.dataContent.length&&e.trigger(u.Private.SeiFrame,{dataContent:r.dataContent,pts:r.pts})})),e._hls.on(Hls.Events.MEDIA_ATTACHED,(function(){var r;e._hls.on(Hls.Events.MANIFEST_PARSED,(function(){e._initPlayBehavior(t||e._loadSourced)})),e._hls.on(Hls.Events.AUDIO_TRACKS_UPDATED,(function(t,r){e.trigger(u.Player.AudioTrackUpdated,r)})),e._hls.on(Hls.Events.MANIFEST_LOADED,(function(t,r){e.trigger(u.Player.LevelsLoaded,r)})),e._hls.on(Hls.Events.LEVEL_SWITCHED,(function(t,r){if(e._qualityService){for(var i=e._hls.levels[r.level].url,n=e._qualityService.levels,o="",a="",s=0;s<n.length;s++)if(n[s].Url==i){a=n[s].desc,o=n[s].bitrate;break}(a||o)&&e.trigger(u.Private.QualityChange,{levelSwitch:!0,url:i,bitrate:o,desc:a})}})),e._hls.on(Hls.Events.AUDIO_TRACK_SWITCH,(function(t,r){e.trigger(u.Player.AudioTrackSwitch,r),setTimeout((function(){e.trigger(u.Player.AudioTrackSwitched,r)}),1e3)})),(e._options.autoplay||e._options.preload||t)&&(e._loadSourced=!0,e._levels&&1<e._levels.length?(e._hls.trigger(Hls.Events.MANIFEST_LOADING,{}),e._hls.trigger(Hls.Events.MANIFEST_LOADED,{levels:e._levels})):e._hls.loadSource(e._options.source||"__INVALID__")),i?(e._executeReadyCallback(),e._urls&&0<e._urls.length&&!e._options.defaultDefinition&&(e._currentPlayIndex=s.findSelectedStreamLevel(e._urls),r=e._urls[e._currentPlayIndex],e._options.source=r.Url,e.trigger(u.Private.SourceLoaded,r))):e.trigger(u.Private.H5_Loading_Show)}))}}this.trigger(u.Private.H5_Loading_Show),a.contentProtocolMixed(v)?((t={mediaId:(t=this.getOptions()||{}).vid||"",mediaAuth:t.mediaAuth||"",error_code:o.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=c.get("Request_Block_Text"),this.trigger(u.Player.Error,t)):(r=this)._isLoadedHls&&"undefined"!=typeof Hls?p(this,e):(this.trigger(u.Private.H5_Loading_Show),this._getHlsVersion((function(t){(function(e,t){var r="aliplayer-hls-min.js",o=((t=t||{}).hls2&&(r="aliplayer-hls2-min.js"),t="",t=n.domain?"https://"+n.domain+"/de/prismplayer/"+n.h5Version+"/hls/"+r:"/build/hls/"+r,this);i.loadJS(t,(function(){e.apply(o)}))}).call(r,(function(){r._isLoadedHls=!0,p(r,e)}),{debug:r._options.debug,hls2:r._hls2})})),this.on("error",d))},t.prototype._getbwEstimator=function(){var e,t=NaN;return this._hls?(e=this._hls.abrController._bwEstimator)?e.getEstimate():NaN:t},t.prototype._destroyHls=function(){this._hls&&this._hls.destroy(),this._hls=null},t.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyHls(),this._superPt&&(t.prototype.play=this._superPt.play,t.prototype.pause=this._superPt.pause,t.prototype.initPlay=this._superPt.initPlay,t.prototype.replay=this._superPt.replay,t.prototype.stop=this._superPt.stop,t.prototype.seek=this._superPt.seek))},g=function(e,t){t.on(Hls.Events.DEFAULT_BANDWIDTH,(function(t,r){e.trigger(u.Player.DefaultBandWidth,{width:r.width,height:r.height,bitrate:r.bitrate})})),t.on(Hls.Events.ERROR,(function(r,i){var n,a,s,l,p,d;!e._options||i.details==Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR||1==e._seeking||0==i.fatal&&i.type!=Hls.ErrorTypes.NETWORK_ERROR||(e._clearTimeout(),n=o.ErrorCode.LoadedMetadata,a=c.get("Error_Play_Text"),d=s=!1,i.details==Hls.ErrorDetails.MANIFEST_LOAD_ERROR||i.details==Hls.ErrorDetails.LEVEL_LOAD_ERROR?(s=!0,p=i.networkDetails,p=Number(p.status),e.liveShiftSerivce&&e.liveShiftSerivce.isLiveShiftPlaying()&&404===p?(n=o.ErrorCode.NotFoundSourceURL,a=c.get("Error_Liveshift_M3U8_Not_Found_Text"),d=!0):a=404===p?(n=o.ErrorCode.NotFoundSourceURL,c.get("Error_Not_Found")):403===p?(n=o.ErrorCode.AuthKeyExpired,c.get("Error_AuthKey_Text")):0===p&&navigator.onLine?(n=o.ErrorCode.RequestDataError,a+"，"+c.get("Maybe_Cors_Error")):c.get("Error_Load_M3U8_Failed_Text")):i.details==Hls.ErrorDetails.MANIFEST_LOAD_TIMEOUT||i.details==Hls.ErrorDetails.LEVEL_LOAD_TIMEOUT?(s=!0,a=c.get("Error_Load_M3U8_Timeout_Text")):i.details==Hls.ErrorDetails.MANIFEST_PARSING_ERROR||i.details==Hls.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR?(s=!0,a=c.get("Error_M3U8_Decode_Text")):i.type==Hls.ErrorTypes.NETWORK_ERROR?(n=o.ErrorCode.NetworkError,a=c.get("Error_Network_Text")):i.type!=Hls.ErrorTypes.MUX_ERROR&&i.type!=Hls.ErrorTypes.MEDIA_ERROR||(n=o.ErrorCode.PlayDataDecode,a=c.get("Error_TX_Decode_Text")),a=a+"("+i.details+")",l=function(){var t;e.pause(),setTimeout((function(){e.trigger(u.Private.Play_Btn_Hide)})),e.checkOnline()&&(t={mediaId:(t=e.getOptions()||{}).vid||"",mediaAuth:t.mediaAuth||"",error_code:n,error_msg:i.details},e.logError(t),t.display_msg=a,e.trigger(u.Player.Error,t))},p=function(){e._liveErrorHandle&&clearTimeout(e._liveErrorHandle),t.stopLoad(),e.trigger(u.Player.LiveStreamStop),e._liveErrorHandle=setTimeout(l,500)},e._options&&e._options.isLive?d?p():e._hls2?i.fatal&&p():(d=e._options).liveRetry>e._liveRetryCount?(0==e._liveRetryCount&&e.trigger(u.Player.OnM3u8Retry),d=d.liveRetryInterval+d.liveRetryStep*e._liveRetryCount,e._liveRetryCount++,e.trigger(u.Private.H5_Loading_Show),setTimeout((function(){s&&e._loadByUrlInner(e._options.source,0,!0)}),1e3*d)):p():e._reloadForVod()||l())}))})}},{"../../config":14,"../../lang/index":22,"../../lib/constants":27,"../../lib/hls/hlsparse":38,"../../lib/io":39,"../../lib/playerutil":45,"../../lib/ua":48,"../../lib/util":50,"../base/event/eventtype":69}],102:[function(e,t,r){var i=e("../base/player"),n=e("./hlsinjector"),o=i.extend({init:function(e,t){t._native=!1,n.inject(this,o,i,t),i.call(this,e,t)}});t.exports=o},{"../base/player":90,"./hlsinjector":101}],103:[function(e,t,r){var i="undefined"==typeof Promise?e("es6-promise").Promise:Promise,n=e("../../lib/io"),o=e("../../config"),a=e("../../lib/constants"),s=e("../../lang/index"),l=e("../base/event/eventtype"),c=e("../../lib/ua");function u(e){var t=this._options;t.rtsFallbackSource&&window.Aliplayer?(this.trigger(l.Player.RtsFallback,{reason:e,fallbackUrl:t.rtsFallbackSource}),this.loadByUrl(t.rtsFallbackSource)):(this.trigger(l.Player.Error,e),player.logError(e))}function p(e){var t=this,r=(this.trigger(l.Private.H5_Loading_Show),this.trigger(l.Private.Play_Btn_Hide),new h(t,e));return t._rts.subscribe(t._options.source,{mediaTimeout:t._options.rtsLoadDataTimeout}).then((function(e){return t._retryTimer&&(clearTimeout(t._retryTimer),t._retryTimer=null),r.preProcess(),t.tag.srcObject=null,e.play(t.tag),!0})).catch((function(e){var r=null,i=null;switch(Number(e.errorCode)){case 10101:r=a.ErrorCode.RtsSignalError,i=s.get("Rts_Err_Http_Signal_Error");break;case 10114:r=a.ErrorCode.RtsCreateOfferError,i=s.get("Rts_Err_Create_Offer_Error");break;case 10202:r=a.ErrorCode.RtsPlayUrlError,i=s.get("Rts_Err_Play_Url_Error");break;case 10203:r=a.ErrorCode.RtsSubscribeNonthing,i=s.get("Rts_Err_Subscribe_Nonthing");break;case 10205:r=a.ErrorCode.RtsHttpRequestFaild,i=s.get("Rts_Err_Http_Request_Failed");break;case 10206:r=a.ErrorCode.RtsHttpAnswerFaild,i=s.get("Rts_Err_Http_Answer_Failed")}return u.call(t,{error_code:r,error_msg:i}),!1}))}function d(){this._noDataTimer&&(clearTimeout(this._noDataTimer),this._noDataTimer=null)}t.exports.inject=function(e,t,r,c,h,f){function y(e,t){var r,i,n;d.call(this),this._retryTimer||(e=e||a.ErrorCode.RtsPlayFailedError,t=t||s.get("Rts_Err_Play_Failed")+", "+this._options.rtsLoadDataTimeout*(this._options.liveRetry+1)+s.get("Rts_Err_No_Data_For"),(i=(r=this)._options)?i.liveRetry>r._liveRetryCount?(0==r._liveRetryCount&&r.trigger(l.Player.OnM3u8Retry),n=Number(i.liveRetryInterval||0)+Number(i.liveRetryStep*r._liveRetryCount||0),r._liveRetryCount++,r.stop(),setTimeout((function(){r.trigger(l.Private.H5_Loading_Show),r.trigger(l.Private.Play_Btn_Hide)}),50),r._retryTimer=setTimeout((function(){r.trigger(l.Private.Retry,{type:"rts",source:i.source}),p.call(r,!0)}),1e3*n)):(r._retryTimer&&clearTimeout(r._retryTimer),r._liveErrorHandle&&clearTimeout(r._liveErrorHandle),r.stop(),r._liveRetryCount=0,r.trigger(l.Player.LiveStreamStop),r._liveErrorHandle=setTimeout(_.call(this,e,t),500)):console.warn("no options!"))}function _(e,t){var r=this;r.pause(),setTimeout((function(){r.trigger(l.Private.Play_Btn_Hide)})),r.checkOnline()&&u.call(this,{error_code:e,error_msg:t})}e._Type=t,e._superType=r,e._superPt=r.prototype,e._disposed=!1,t.prototype._checkRtsReady=function(){if(null==e._rts)throw new Error("please invoke this method after ready event")},e._isRts=!0,e._rts=null,e._isLoadedRts=!1,e._liveErrorHandle=null,e._retryTimer=null,e._noDataTimer=null,e.bind_rtsPlayEventHandler=null,e.bind_rtsErrorEventHandler=null,t.prototype.play=function(e){this._checkRtsReady(),this._isManualPlay=e||!1;var t=this;return t.trigger(l.Private.Cover_Hide),t.trigger(l.Private.Play_Btn_Hide),p.call(t).then((function(e){e&&t._startPlay()})),this},t.prototype.seek=function(e){},t.prototype.setSpeed=function(e){},t.prototype.pause=function(e){return this._checkRtsReady(),this._superPt.pause.call(this,!0),this},t.prototype.stop=function(){return this._rts&&this._rts.unsubscribe(),this},t.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyRts(),this._superPt,this._liveErrorHandle&&(clearTimeout(this._liveErrorHandle),this._liveErrorHandle=null),this._retryTimer&&(clearTimeout(this._retryTimer),this._retryTimer=null),d.call(this))},t.prototype._destroyRts=function(){this._rts&&(this.stop(),this._rts.off("onError",this.bind_rtsErrorEventHandler),this._rts.off("onPlayEvent",this.bind_rtsPlayEventHandler)),this._rts=null},t.prototype.initPlay=function(e){function t(e,t){var r=!e._rts;e._destroyRts(),e._rts=new AliRTS.createClient({customReporter:function(t){if(126===Number(t.msgid)){var r={};try{r=JSON.parse(t.args)}catch(t){r={}}r.tcid&&(e._rts.traceid=r.tcid)}}}),e._checkRtsSupport((function(i){(function(e){var t=this._rtsPlayEventHandler.bind(this),r=this._rtsErrorEventHandler.bind(this);this.bind_rtsPlayEventHandler=t,this.bind_rtsErrorEventHandler=r,e.on("onError",r),e.on("onPlayEvent",t)}).call(e,e._rts),e._options.autoplay?p.call(e).then((function(r){r&&e._initPlayBehavior(t)})):e._initPlayBehavior(t),r&&e._executeReadyCallback()}),(function(t){console.log("[RTS isSupport error]",t);var r=null,i=null;switch(Number(t.errorCode)){case 10110:r=a.ErrorCode.RtsNotSupportWebRtc,i=s.get("Rts_Err_Not_Support_Webrtc");break;case 10111:r=a.ErrorCode.RtsBrowserNotSupport,i=s.get("Rts_Err_Browser_Not_Support");break;case 10112:r=a.ErrorCode.RtsBrowserVersionTooLow,i=s.get("Rts_Err_Browser_Version_Too_Low");break;case 10113:r=a.ErrorCode.RtsNotSupportH264,i=s.get("Rts_Err_Not_Support_H264");break;case 10114:r=a.ErrorCode.RtsCreateOfferError,i=s.get("Rts_Err_Create_Offer_Error")}return u.call(e,{error_code:r,error_msg:i}),!1}))}this._isLoadedRts?t(this,e):(this.trigger(l.Private.H5_Loading_Show),function(e,t){var r="",i=this._options,a=(r="https://g.alicdn.com/CodeBaseOne/H5RTSSdk/"+(i.rtsVersion||o.rtsVersion)+"/aliyun-rts-sdk.js",i.rtsSdkUrl&&(r=i.rtsSdkUrl),this);n.loadJS(r,(function(){e.apply(a)}))}.call(this,(function(){this._isLoadedRts=!0,t(this,e)}),this._options.debug))},t.prototype.getStats=function(){return this._rts&&this._rts.getTransportStats?i.all([this._rts.getTransportStats(),this._rts.getRemoteVideoStats(),this._rts.getRemoteAudioStats()]).then((function(e){var t=e[0],r=e[1];return e=e[2],{rtt:t.rtt,bytesReceived:t.bytesReceived,framesDecoded:r.framesDecoded,packetsLost:(r.packetsLost||0)+(e.packetsLost||0),packetsReceived:(r.packetsReceived||0)+(e.packetsReceived||0),timestamp:t.timestamp||Date.now()}})).catch((function(e){return console.log("ERR in RTS getstats: ",e),{}})):i.resolve()},t.prototype._rtsPlayEventHandler=function(e){"canplay"===e.event?d.call(this):"waiting"!==e.event&&("playing"===e.event?d.call(this):"timeout"!==e.event&&"ended"!==e.event||y.call(this))},t.prototype._checkRtsSupport=function(e,t){this._options.skipRtsSupportCheck?e():this._rts.isSupport({isReceiveVideo:!0}).then(e).catch(t)},t.prototype._rtsErrorEventHandler=function(e){var t,r;switch(console.log("RTS Error:",e),Number(e.errorCode)){case 10102:y.call(this);break;case 12e3:t=a.ErrorCode.RtsPeerConnectionUnknown,r=s.get("Rts_Err_PeerConnection_Unknown"),_.call(this,t,r)}}};var h=function(){function e(e,t){(this.isRetry=t)&&(this.isApple=c.IS_IOS||c.IS_SAFARI,this.player=e)}return e.prototype.preProcess=function(){var e,t,r;this.isRetry&&this.isApple&&(e=this.player.getVolume(),t=this.player.muted(),e)&&!t&&((r=this.player.tag).volume=0,this.player.one("canplay",(function(){r.volume=e})))},e}()},{"../../config":14,"../../lang/index":22,"../../lib/constants":27,"../../lib/io":39,"../../lib/ua":48,"../base/event/eventtype":69,"es6-promise":8}],104:[function(e,t,r){var i=e("../base/player"),n=e("./rtsinjector"),o=i.extend({init:function(e,t){t.isLive&&(t._native=!1,n.inject(this,o,i,t),i.call(this,e,t))}});t.exports=o},{"../base/player":90,"./rtsinjector":103}],105:[function(e,t,r){var i=e("../../lib/constants");(e=e("../../lib/oo").extend({init:function(e){this.player=e,this.tickhandle=null}})).prototype.tick=function(e,t){var r=this;this.tickhandle=setTimeout((function(){r.player&&r.player.trigger(i.AuthKeyExpiredEvent),t&&t()}),1e3*e)},e.prototype.clearTick=function(e){this.tickhandle&&clearTimeout(this.tickhandle)},t.exports=e},{"../../lib/constants":27,"../../lib/oo":42}],106:[function(e,t,r){function i(e,t,r){var i=s.randomUUID(),o="https://mts."+e.domainRegion+".aliyuncs.com/?";i={AccessKeyId:e.accessId,Action:"GetLicense",MediaId:e.vid,LicenseUrl:o,data:e.data,SecurityToken:e.stsToken,Format:"JSON",Type:e.encryptionType,Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:i},e.header&&(i.Header=e.header),o+="Signature="+s.AliyunEncodeURI(s.makeChangeSiga(i,e.accessSecret,"POST")),e=s.makeUTF8sort(i,"=","&"),n.post(o,e,(function(e){e?(e=JSON.parse(e),t&&(e=e.License,t(e))):r&&r(l.createError("MPS获取License失败"))}),(function(e){if(r){var t={Code:"",Message:p.get("Error_MTS_Fetch_Urls_Text")};try{t=JSON.parse(e)}catch(e){}r({Code:a.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.RequestId||""})}}))}var n=e("../../lib/io"),o=(e("../../lib/ua"),e("../../lib/bufferbase64")),a=e("../../lib/constants"),s=e("./signature"),l=e("./util"),c=e("../../lib/url"),u=e("../../lib/playerutil"),p=e("../../lang/index");function d(e){window.console.error("The license request failed.")}function h(e){window.console.error("A decryption key error was encountered"),window.console.error("A decryption key error was encountered",e)}function f(e){window.console.log("Decryption key was added to session.")}function y(e,t,r){r.addEventListener(e,(function(){t(arguments[0])}),!1)}t.exports.requestLicenseKey=function(e){var t=e;return t._options.vid&&(t.__vid=t._options.vid),function(e,r){var n,s,l=t._options,c=t._getDRMEncryptItem();c&&(n={vid:t.__vid,accessId:l.accId,accessSecret:l.accSecret,stsToken:l.stsToken,domainRegion:l.domainRegion,authInfo:l.authInfo,encryptionType:c.encryptionType},c.encryptionType==a.EncryptionType.Widevine?n.data=o.encode(e.message):c.encryptionType==a.EncryptionType.PlayReady&&(l=o.unpackPlayReady(e.message),n.data=l.changange,l.header)&&(n.header=JSON.stringify(l.header)),console.log(n.data),e=t.__licenseKeys,s=t.__vid+c.Url,e&&e[s],i(n,(function(e){t.__licenseKeys||(t.__licenseKeys={}),10<n.data.length&&(t.__licenseKeys[s]=e),e=o.decode(e),r(e)}),(function(e){e={mediaId:t.__vid,error_code:e.Code,error_msg:e.Message},t.logError(e),t.trigger("error",e)})))}},t.exports.loadCertificate=function(e,t){var r,i,n,o=new XMLHttpRequest,a=(o.addEventListener("load",function(e,t){t=t.target;try{r=this._options.isLive?JSON.parse(t.response).Response.B64ServCert:JSON.parse(JSON.parse(t.response).DRMCertInfo).b64ServCert}catch(e){console.log(e)}t=s.base64DecodeUint8Array(r);var r=function(e,t){var r=t.target,i=(t=t.initData,s.arrayToString(t).split("skd://")[1].split("?")[0]),n=s.stringToArray(i);if(t=function(e,t,r){"string"==typeof t&&(t=stringToArray(t));var i=0,n=new ArrayBuffer(e.byteLength+4+t.byteLength+4+r.byteLength),o=new DataView(n);return(new Uint8Array(n,0,e.byteLength).set(e),i+=e.byteLength,o.setUint32(i,t.byteLength,!0),i+=4,e=new Uint16Array(n,i,t.length)).set(t),i+=e.byteLength,o.setUint32(i,r.byteLength,!0),i+=4,new Uint8Array(n,i,r.byteLength).set(r),new Uint8Array(n,0,n.byteLength)}(t,n,e),r.webkitKeys||(function(){if(!WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4"))throw"Key System not supported";keySystem="com.apple.fps.1_0"}(),r.webkitSetMediaKeys(new WebKitMediaKeys(keySystem))),!r.webkitKeys)throw"Could not create MediaKeys";if(!(n=r.webkitKeys.createSession("video/mp4",t)))throw"Could not create key session";n.contentId=i,y("webkitkeymessage",function(e){var t,r,i=this,n=e.target,o=e.message,a=new XMLHttpRequest,l=(e.sessionId,a.responseType="text",a.session=n,a.addEventListener("load",function(e){e=e.target,t=this._options.isLive?JSON.parse(e.response).Response.B64License:JSON.parse(JSON.parse(e.response).License).b64License;var t=s.base64DecodeUint8Array(t);"<ckc>"===(t=s.Uint8ArrayToString(t)).substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6)),t=s.base64DecodeUint8Array(t),e.session.update(t)}.bind(this),!1),a.addEventListener("error",d,!1),e=btoa("spc="+s.base64EncodeUint8Array(o)+"&assetId="+encodeURIComponent(n.contentId)),{Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:s.ISODateString(new Date),SignatureNonce:s.randomUUID(),AccessKeyId:i._options.accessKeyId,SecurityToken:i._options.securityToken,CertId:i._options.certId});for(r in i._options.isLive?(l.RegionId=i._options.region,l.Action="DescribeDRMLicense",l.Version="2016-11-01",l.CdmData=e,l.Type="fairplay",l.Domain=c.parseUrl(i._options.source).hostname):(l.region=i._options.region,l.Action="GetDRMLicense",l.Version="2017-03-21",l.VideoId=i._options.vid,l.CDMData=e,l.DRMType="FairPlay"),o="Signature="+s.AliyunEncodeURI(s.makeChangeSiga(l,i._options.accessKeySecret,"POST")),n=i._options.isLive?"https://"+u.getLiveHostByRegion(i._options.region)+"/?"+o:"https://vod."+i._options.region+".aliyuncs.com/?"+o,a.open("POST",n,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l){var p;l.hasOwnProperty(r)&&(p=l[r],t=t?t+"&"+s.AliyunEncodeURI(r)+"="+s.AliyunEncodeURI(p):s.AliyunEncodeURI(r)+"="+s.AliyunEncodeURI(p))}a.send(t)}.bind(this),n),y("webkitkeyadded",f,n),y("webkitkeyerror",h,n)}.bind(this,t);this._fairPlayHandlers.onNeedKey=r,t=function(e){window.console.error("A video playback error occurred")}.bind(this),this._fairPlayHandlers.onError=t,this.tag.addEventListener("webkitneedkey",r,!1),this.tag.addEventListener("error",t,!1),this.tag.src=this._options.source,e&&e()}.bind(e,t),!1),o.addEventListener("error",function(e){window.console.error("Failed to retrieve the server certificate.")}.bind(e),!1),{Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:s.ISODateString(new Date),SignatureNonce:s.randomUUID(),AccessKeyId:e._options.accessKeyId,SecurityToken:e._options.securityToken,CertId:e._options.certId});for(r in e._options.isLive?(a.RegionId=e._options.region,a.Action="DescribeDRMCertificate",a.Version="2016-11-01"):(a.region=e._options.region,a.Action="GetDRMCertInfo",a.Version="2017-03-21",a.VideoId=e._options.vid),t="Signature="+s.AliyunEncodeURI(s.makeChangeSiga(a,e._options.accessKeySecret,"POST")),e=e._options.isLive?"https://"+u.getLiveHostByRegion(e._options.region)+"/?"+t:"https://vod."+e._options.region+".aliyuncs.com/?"+t,o.open("POST",e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a)a.hasOwnProperty(r)&&(i=a[r],n=n?n+"&"+s.AliyunEncodeURI(r)+"="+s.AliyunEncodeURI(i):s.AliyunEncodeURI(r)+"="+s.AliyunEncodeURI(i),console.log(i));o.send(n)},t.exports.getRequestUrl=function(e,t){e={AccessKeyId:t._options.accessKeyId,Format:"JSON",Version:"2016-11-01",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:s.ISODateString(new Date),SignatureNonce:s.randomUUID(),CertId:t._options.certId,SecurityToken:t._options.securityToken,RegionId:t._options.region,Action:"DescribeDRMLicense",Type:"widevine",CdmData:e,Domain:c.parseUrl(t._options.source).hostname};var r="Signature="+s.AliyunEncodeURI(s.makeChangeSiga(e,t._options.accessKeySecret,"POST"));return{url:"https://"+u.getLiveHostByRegion(t._options.region)+"/?"+r,data:s.makeUTF8sort(e,"=","&"),jsonData:s.makeUTF8sort(e,"=","&","json")}},t.exports.postData=function(e,t){var r=s.randomUUID();return r={AccessKeyId:t._options.accessKeyId,VideoId:t._options.vid,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:r,CertId:t._options.certId,SecurityToken:t._options.securityToken,region:t._options.region,Action:"GetDRMLicense",DRMType:"Widevine",CDMData:e},e="Signature="+s.AliyunEncodeURI(s.makeChangeSiga(r,t._options.accessKeySecret,"POST")),{url:"https://vod."+t._options.region+".aliyuncs.com/?"+e,data:s.makeUTF8sort(r,"=","&"),jsonData:s.makeUTF8sort(r,"=","&","json")}},t.exports.destroyFairPlay=function(){this._fairPlayHandlers.onNeedKey&&this.tag.removeEventListener("webkitneedkey",this._fairPlayHandlers.onNeedKey),this._fairPlayHandlers.onError&&this.tag.removeEventListener("error",this._fairPlayHandlers.onError),this._fairPlayHandlers={}}},{"../../lang/index":22,"../../lib/bufferbase64":24,"../../lib/constants":27,"../../lib/io":39,"../../lib/playerutil":45,"../../lib/ua":48,"../../lib/url":49,"./signature":112,"./util":114}],107:[function(e,t,r){var i=e("../../lib/io"),n=e("../../lib/constants"),o=e("../../lib/data"),a=e("./util");t.exports.getDataByAuthInfo=function(e,t,r,s){e={playAuth:e.playAuth,requestId:e.requestId},i.get("https://api.h5video.shop/api/page/getMediaPlayInfo"+function(e){return e.requestId=o.guid(),Object.keys(e).reduce((function(t,r){return t+(t?"&":"?")+r+"="+encodeURIComponent(e[r])}),"")}(e),(function(e){if(e)if(200!==(e=JSON.parse(e)).httpStatusCode)s&&s({Code:n.ErrorCode.ServerAPIError,Message:e.httpStatusCode+"|"+e.code,sri:e.requestId});else{for(var i=e.data.PlayInfoList,o=[],l=i.length-1;0<=l;--l)"AUTO"===i[l].Definition&&(o=[i.splice(l,1)[0]]);var c,u=null;(u=(u=0===o.length?a.objectPlayerMessageSort(i,t):a.objectPlayerMessageSort(o)).map((function(e){return"m3u8"===e.format&&(e.Url=e.Url+"&_ext=.m3u8"),e})))&&r&&(c=e.data.VideoBase||{},r({videoId:c.VideoId,userId:c.UserId,requestId:e.requestId,urls:u,encryptUrlArr:[],thumbnailUrl:"",coverUrl:c.CoverURL,playInfoAry:i,textTracks:e.data.SubtitlesList}))}else s&&s(a.createError("轻SaaS服务获取数据失败"))}),(function(e){e&&"string"==typeof e&&-1<e.indexOf("Invalid CORS request")?s&&s({Code:n.ErrorCode.ServerAPIError,Message:e}):s&&s(a.createError("轻SaaS服务获取数据失败"))}))}},{"../../lib/constants":27,"../../lib/data":29,"../../lib/io":39,"./util":114}],108:[function(e,t,r){var i=e("./saasplayer"),n=e("./light"),o=e("../base/event/eventtype");e=i.extend({init:function(e,t){i.call(this,e,t),this.service=n,this.loadByLightSaas()}}),e.prototype.loadByLightSaas=function(e){var t=this._options,r={playAuth:t.mediaAuth,defaultDefinition:t.defaultDefinition};this.log("STARTFETCHDATA",{it:"lightSaasPlayAuth",pa:{playAuth:t.mediaAuth}}),this.loadData(r,e)},e.prototype.replayByMediaAuth=function(e){this.trigger(o.Private.Error_Hide),this.tag&&(this.tag.pause(),this.tag.removeAttribute("src"),this.tag.load()),this.setTextTracks([]),this.trigger(o.Private.UserTrackReset),this._options.source="",this._options.mediaAuth=e,this._isError=!1,this._duration=0,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.loadByLightSaas(!0)},t.exports=e},{"../base/event/eventtype":69,"./light":107,"./saasplayer":111}],109:[function(e,t,r){var i=e("../../lib/io"),n=e("../../lib/constants"),o=e("./signature"),a=e("./util"),s=e("../../lang/index"),l=e("../../lib/ua"),c=function(e,t){for(var r="",i=(e.sort((function(e,r){return e=parseInt(e.width),r=parseInt(r.width),"desc"==t?r<e?-1:e<r?1:void 0:e<r?-1:r<e?1:void 0})),e.length),o=0;o<i;o++){var a=e[o],s=n.QualityLevels[a.definition],l=void 0===s?"":r==s?s+a.height:s;a.desc=l,r=s}};t.exports.getDataByAuthInfo=function(e,t,r,u){o.returnUTCDate(),o.randomUUID();var p=o.randomUUID();p={AccessKeyId:e.accessId,Action:"PlayInfo",MediaId:e.vid,Formats:e.format,AuthInfo:e.authInfo,AuthTimeout:e.authTimeout||n.AuthKeyExpired,IncludeSnapshotList:e.includeSnapshotList,Rand:e.rand,SecurityToken:e.stsToken,Format:"JSON",Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Terminal:l.IS_CHROME?"Chrome":l.IS_EDGE?"Edge":l.IS_IE11?"IE":l.IS_SAFARI?"Safari":l.IS_FIREFOX?"Firefox":"",SignatureNonce:p},e.hlsUriToken&&(e.MtsHlsUriToken=e.hlsUriToken),e.playConfig&&(p.PlayConfig=JSON.stringify(e.playConfig)),p=o.makeUTF8sort(p,"=","&")+"&Signature="+o.AliyunEncodeURI(o.makeChangeSiga(p,e.accessSecret)),e="https://mts."+e.domainRegion+".aliyuncs.com/?"+p,i.get(e,(function(e){var i,o,s;e?(i=(e=JSON.parse(e)).PlayInfoList.PlayInfo,o="",(s=e.SnapshotList?e.SnapshotList.Snapshot:[])&&0<s.length&&(o=s[0].Url),s=function(e,t){for(var r=[],i=[],o=[],a=[],s=e.length-1;0<=s;s--){var l=e[s];("mp4"==l.format?i:"mp3"==l.format?o:"m3u8"==l.format?r:a).push(l)}return 0<o.length?(function(e,t){for(var r="",i=(e.sort((function(e,r){return e=parseInt(e.bitrate),r=parseInt(r.bitrate),"desc"==t?r<e?-1:e<r?1:void 0:e<r?-1:r<e?1:void 0})),e.length),o=0;o<i;o++){var a=e[o],s=n.QualityLevels[a.definition],l=void 0===s?a.bitrate:r==s?s+a.bitrate:s;a.desc=l,r=s}}(o,t),o):0<i.length?(c(i,t),i):0<r.length?(c(r,t),r):(c(a,t),a)}(i,t),r&&r({requestId:e.RequestId,urls:s,thumbnailUrl:o})):u&&u(a.createError("MPS获取取数失败"))}),(function(e){if(u){var t={Code:"",Message:s.get("Error_MTS_Fetch_Urls_Text")};try{t=JSON.parse(e)}catch(e){}u({Code:n.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.RequestId||""})}}))}},{"../../lang/index":22,"../../lib/constants":27,"../../lib/io":39,"../../lib/ua":48,"./signature":112,"./util":114}],110:[function(e,t,r){var i=e("./saasplayer"),n=(e("../../lib/constants"),e("./mts"));e=i.extend({init:function(e,t){i.call(this,e,t),this.service=n,this.loadByMts()}}),e.prototype.loadByMts=function(e){var t={vid:this._options.vid,accessId:this._options.accId,accessSecret:this._options.accSecret,stsToken:this._options.stsToken,domainRegion:this._options.domainRegion,authInfo:this._options.authInfo,format:this._options.format,includeSnapshotList:this._options.includeSnapshotList||!1,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,hlsUriToken:this._options.hlsUriToken,playConfig:this._options.playConfig};this.loadData(t,e)},e.prototype.replayByVidAndAuthInfo=function(e,t,r,i,n,o){this.trigger("error_hide"),this._options.source="",this._isError=!1,this._duration=0,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.reloadNewVideoInfo(e,t,r,i,n,o)},e.prototype.reloadNewVideoInfo=function(e,t,r,i,n,o){if(this.trigger("error_hide"),this._options.source="",e&&(this._options.vid=e,this._options.accId=t,this._options.accessSecret=r,this._options.stsToken=i,this._options.domainRegion=o,this._options.authInfo=n),!(this._options.vid&&this._options.accId&&this._options.accessSecret&&this._options.stsToken&&this._options.domainRegion&&this._options.authInfo))throw new Error("需要提供vid、accId、accessSecret、stsToken、domainRegion和authInfo参数");this.log("STARTFETCHDATA",{it:"mps",pa:{vid:e}}),this.loadByMts(!0)},t.exports=e},{"../../lib/constants":27,"./mts":109,"./saasplayer":111}],111:[function(e,t,r){var i=e("../base/player"),n=e("../audio/audioplayer"),o=(e("../../lib/event"),e("../../lib/io")),a=e("../../lib/constants"),s=e("./signature"),l=e("./authkeyexpiredhandle"),c=e("../hls/hlsinjector"),u=e("../flv/flvinjector"),p=e("../drm/drminjector"),d=(e("../../lib/cookie"),e("../../lang/index")),h=e("../../lib/ua"),f=e("../../config"),y=e("../../lib/playerutil"),_=e("../base/event/eventtype"),g=e("../../protected/anti-injector-protected"),v=i.extend({init:function(e,t){g(t,this),this._authKeyExpiredHandle=new l(this),i.prototype._videoCreateEl||(i.prototype._videoCreateEl=i.prototype.createEl),"mp3"==t.format?(t.height="auto",t.mediaType="audio",i.prototype.createEl=n.prototype.createEl,n.call(this,e,t),v.prototype.play=i.prototype.play,v.prototype.pause=i.prototype.pause,v.prototype.initPlay=i.prototype.initPlay,v.prototype.replay=i.prototype.replay,v.prototype.stop=i.prototype.stop,v.prototype.seek=i.prototype.seek):(i.prototype.createEl=i.prototype._videoCreateEl,t._native=!1,i.call(this,e,t))}});v.prototype.loadData=function(e,t){var r,i,n;"undefined"!=typeof _sce_r_skjhfnck||""!=e.format&&"m3u8"!=e.format&&1!=this._options.encryptType?this._loadData(e,t):(r="aliplayer-vod-min.js",i=f.domain?"https://"+f.domain+"/de/prismplayer/"+f.h5Version+"/hls/"+r:"/build/hls/"+r,n=this,o.loadJS(i,(function(){n._loadData(e,t)})))},v.prototype._loadData=function(e,t){var r,n=(new Date).getTime(),o=this;this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._authKeyExpiredHandle.clearTick(),""!=e.format&&"m3u8"!=e.format||1!=this._options.encryptType?e.rand=s.randomUUID():(r=_sce_r_skjhfnck(),e.rand=_sce_lgtcaygl(r,o._vdnct6f)),this._options.thumbnailUrl&&(e.thumbnailUrl=this._options.thumbnailUrl),this.trigger(_.Private.H5_Loading_Show),this.service.getDataByAuthInfo(e,this._options.qualitySort,(function(s){if(o.trigger(_.Private.PlayInfoLoaded,s),s.userId&&(o._options.from=s.userId),s.videoId&&o._monitor&&o._monitor.updateLightSaasVideoId(s.videoId),s.textTracks&&s.textTracks.length&&(l=y.unqiueTextTracks(s.textTracks),o.trigger(_.Private.TextTrackFounded,{from:"saas",textTracks:l})),s.urls&&0==s.urls.length)o._mtsError_message(o,{Code:a.ErrorCode.URLsIsEmpty,Message:d.get("Error_Vod_URL_Is_Empty_Text")+(e.format?"(format:"+e.format+")":"")},"");else{o.log("COMPLETEFETCHDATA",{cost:(new Date).getTime()-n,mi:JSON.stringify(function(e){for(var t=[],r=0;r<e.length;r++)t.push({width:e[r].width,height:e[r].height,definition:e[r].definition,format:e[r].format,encryptionType:e[r].encryptionType,duration:e[r].duration});return t}(s.urls))}),o._urls=s.urls,o._currentPlayIndex=y.findSelectedStreamLevel(o._urls,e.defaultDefinition);var l=(f=s.urls[o._currentPlayIndex]).Url;if(o._vodDuration=f.duration||0,o._options.source=l,o.encType="",o.trigger(_.Private.PREPARE,f.definition),o.UI.cover&&s.coverUrl&&!o._options.cover&&o.setCover(s.coverUrl),y.isHls(l))if(s&&s.playInfoAry&&0<s.playInfoAry.length&&"Widevine-FairPlay"==s.playInfoAry[0].EncryptType)p.inject(o,v,i.prototype,o._options);else{if(s.encryptUrlArr&&0<s.encryptUrlArr.length)for(var f,g,m=[],S=0;S<s.encryptUrlArr.length;++S)(f=s.encryptUrlArr[S]).encryptionType===a.EncryptionType.Private&&(g=_sce_dlgtqred(r,f.rand,f.plaintext),m.push({url:f.Url,secData:g}));else if(ecData="",f.encryptionType==a.EncryptionType.Private){o.encType=f.encryptionType;var b=y.checkSecuritSupport();if(b)return void o._mtsError_message(o,{Code:a.ErrorCode.EncrptyVideoNotSupport,Message:b,display_msg:b},"");m=_sce_dlgtqred(r,f.rand,f.plaintext)}o._hls&&(o._hls.destroy(),o._hls=null),c.inject(o,v,i,o._options,m)}else y.isFlv(l)?u.inject(o,v,i,o._options):y.isDash(l)?(console.log("isDash"),p.inject(o,v,i,o._options)):o._player._executeReadyCallback();o._authKeyExpiredHandle.tick(a.AuthKeyRefreshExpired),o.trigger(_.Private.SourceLoaded,f),o.initPlay(t),o.trigger(_.Private.ChangeURL,{from:"saas"}),s.thumbnailUrl&&o._thumbnailService.get(s.thumbnailUrl),b=o._player._isFlv,l=-1<o._player.getOptions().source.indexOf("mp4"),1==o._player.encType||b||l||(h.IS_IOS||h.IS_MAC_SAFARI||h.IS_X5||h.IS_EDGE)&&(o._player._executeReadyCallback(),o._urls.length)&&o.trigger(_.Private.SourceLoaded,f)}}),(function(e){o._mtsError_message(o,e,"")}))},v.prototype._changeStream=function(e,t){this._urls.length>e&&(this._loadByUrlInner(this._urls[e].Url,this.getCurrentTime(),!0),this._currentPlayIndex=e,this.trigger(_.Private.QualityChange,t||d.get("Quality_Change_Fail_Switch_Text")))},v.prototype._getLowerQualityLevel=function(){if(0!=this._urls.length&&-1!=this._currentPlayIndex)if("asc"==this.options().qualitySort){if(0<this._currentPlayIndex)return{item:this._urls[this._currentPlayIndex-1],index:this._currentPlayIndex-1}}else if(this._currentPlayIndex<this._urls.length-1)return{item:this._urls[this._currentPlayIndex+1],index:this._currentPlayIndex+1};return""},v.prototype._mtsError_message=function(e,t,r){e._serverRequestId=t.sri,e.trigger(_.Private.H5_Loading_Hide);var i=t.Code||"OTHER_ERR_CODE",n=t.Message||"OTHER_ERR_MSG",o=(a.ErrorCode.ServerAPIError,t.display_msg||""),s=(-1<n.indexOf("InvalidParameter.Rand")||-1<n.indexOf('"Rand" is not valid.')?(a.ErrorCode.EncrptyVideoNotSupport,o=d.get("Error_Not_Support_encrypt_Text")):-1<n.indexOf("SecurityToken.Expired")?(a.ErrorCode.AuthKeyExpired,o=d.get("Error_Playauth_Expired_Text")):-1<n.indexOf("InvalidVideo.NoneStream")?(a.ErrorCode.URLsIsEmpty,o=d.get("Error_Fetch_NotStream")+"("+e._options.format+"|"+e._options.definition+")"):-1<n.indexOf("DataNotFound")&&(a.ErrorCode.MediaNotFound,o=d.get("Error_Fetch_Media_Not_Found")),e._options.vid||"");e._options.from,s={mediaId:s,mediaAuth:e._options.mediaAuth||"",error_code:i,error_msg:n},t.sri&&(s.sri=t.sri),e.logError(s),s.display_msg=(o||d.get("Error_Vod_Fetch_Urls_Text"))+"</br>"+n,e.trigger("error",s),console.log("PrismPlayer Error: "+r+"! error_msg :"+n+";")},t.exports=v},{"../../config":14,"../../lang/index":22,"../../lib/constants":27,"../../lib/cookie":28,"../../lib/event":32,"../../lib/io":39,"../../lib/playerutil":45,"../../lib/ua":48,"../../protected/anti-injector-protected":128,"../audio/audioplayer":67,"../base/event/eventtype":69,"../base/player":90,"../drm/drminjector":96,"../flv/flvinjector":99,"../hls/hlsinjector":101,"./authkeyexpiredhandle":105,"./signature":112}],112:[function(e,t,r){var n=e("crypto-js/hmac-sha1"),o=e("crypto-js/enc-base64"),a=e("crypto-js/enc-utf8");t.exports.randomUUID=function(){for(var e=[],t="0123456789abcdef",r=0;r<36;r++)e[r]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},t.exports.returnUTCDate=function(){var e=(a=new Date).getUTCFullYear(),t=a.getUTCMonth(),r=a.getUTCDate(),i=a.getUTCHours(),n=a.getUTCMinutes(),o=a.getUTCSeconds(),a=a.getUTCMilliseconds();return Date.UTC(e,t,r,i,n,o,a)},t.exports.AliyunEncodeURI=function(e){return(e=(e=(e=encodeURIComponent(e)).replace("+","%2B")).replace("*","%2A")).replace("%7E","~")},t.exports.makesort=function(e,t,r){if(!e)throw new Error("PrismPlayer Error: vid should not be null!");var i=[];for(s in e)i.push(s);for(var n=i.sort(),o="",a=n.length,s=0;s<a;s++)""==o?o=n[s]+t+e[n[s]]:o+=r+n[s]+t+e[n[s]];return o},t.exports.makeUTF8sort=function(e,r,i){if(!e)throw new Error("PrismPlayer Error: vid should not be null!");var n=[];for(l in e)n.push(l);for(var o=n.sort(),a="",s=o.length,l=0;l<s;l++){var c=t.exports.AliyunEncodeURI(o[l]),u=t.exports.AliyunEncodeURI(e[o[l]]);""==a?a=c+r+u:a+=i+c+r+u}return a},t.exports.makeChangeSiga=function(e,r,i){if(e)return o.stringify(n((i=i||"GET")+"&"+t.exports.AliyunEncodeURI("/")+"&"+t.exports.AliyunEncodeURI(t.exports.makeUTF8sort(e,"=","&")),r+"&"));throw new Error("PrismPlayer Error: vid should not be null!")},t.exports.ISODateString=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z"},t.exports.encPlayAuth=function(e){if(e=a.stringify(o.parse(e)))return JSON.parse(e);throw new Error("playuth参数解析为空")},t.exports.encRsa=function(){},t.exports.stringToArray=function(e){for(var t=new ArrayBuffer(2*e.length),r=new Uint16Array(t),i=0,n=e.length;i<n;i++)r[i]=e.charCodeAt(i);return r},t.exports.Uint8ArrayToString=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},t.exports.arrayToString=function(e){return e=new Uint16Array(e.buffer),String.fromCharCode.apply(null,e)},t.exports.base64DecodeUint8Array=function(e){var t=window.atob(e),r=t.length,n=new Uint8Array(new ArrayBuffer(r));for(i=0;i<r;i++)n[i]=t.charCodeAt(i);return n},t.exports.base64EncodeUint8Array=function(e){for(var t,r,i,n,o,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;c<e.length;)i=(t=e[c++])>>2,n=(3&t)<<4|(t=c<e.length?e[c++]:Number.NaN)>>4,o=(15&t)<<2|(r=c<e.length?e[c++]:Number.NaN)>>6,a=63&r,isNaN(t)?o=a=64:isNaN(r)&&(a=64),l+=s.charAt(i)+s.charAt(n)+s.charAt(o)+s.charAt(a);return l}},{"crypto-js/enc-base64":3,"crypto-js/enc-utf8":4,"crypto-js/hmac-sha1":5}],113:[function(e,t,r){var i=e("../../lib/io"),n=e("../../lib/constants"),o=e("./signature"),a=e("./util"),s=e("../../lang/index");t.exports.getPlayAuth=function(e,t,r,l){o.randomUUID();var c=o.randomUUID();c={AccessKeyId:e.accessKeyId,Action:"GetVideoPlayAuth",VideoId:e.vid,AuthTimeout:n.AuthInfoExpired,SecurityToken:e.securityToken,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:c},c=o.makeUTF8sort(c,"=","&")+"&Signature="+o.AliyunEncodeURI(o.makeChangeSiga(c,e.accessKeySecret)),e="https://vod."+e.region+".aliyuncs.com/?"+c,i.get(e,(function(e){e?(e=JSON.parse(e),t&&t(e.PlayAuth)):r&&r(a.createError("获取视频播放凭证失败"))}),(function(e){if(r){var t={Code:"",Message:s.get("Fetch_Playauth_Error")};try{(t=JSON.parse(e)).Code}catch(e){}r({Code:n.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.RequestId,display_msg:s.get("Fetch_Playauth_Error",l)})}}))}},{"../../lang/index":22,"../../lib/constants":27,"../../lib/io":39,"./signature":112,"./util":114}],114:[function(e,t,r){var i=e("../../lib/constants");t.exports.createError=function(e,t){return{requestId:"",code:t||"",message:e}},t.exports.getItem=function(e){var t={};return t.width=e.Width,t.height=e.Height,t.definition=e.Definition,t.Url=e.PlayURL,t.format=e.Format,t.desc=i.QualityLevels[t.definition],t.encryptionType=i.VodEncryptionType[e.EncryptType],t.plaintext=e.Plaintext,t.rand=e.Rand,t.encrypt=e.Encrypt,t.duration=e.Duration,t.bitrate=e.Bitrate,t},t.exports.objectPlayerMessageSort=function(e,r){for(var i=[],n=[],o=[],a=[],s=e.length-1;0<=s;s--){var l=e[s];("mp4"==(l=t.exports.getItem(l)).format?n:"mp3"==l.format?o:"m3u8"==l.format?i:a).push(l)}var c=[];return c=0<o.length?o:0<n.length?n:0<i.length?i:a,"asc"==r&&c.reverse(),c}},{"../../lib/constants":27}],115:[function(e,t,r){var i=e("../../lib/io"),n=e("../../lib/constants"),o=e("./signature"),a=e("./util"),s=e("../../config"),l=e("../../lang/index");t.exports.getDataByAuthInfo=function(e,t,r,c){o.randomUUID();var u=o.randomUUID();u={AccessKeyId:e.accessId,Action:"GetPlayInfo",VideoId:e.vid,Formats:e.format,AuthTimeout:e.authTimeout||n.AuthKeyExpired,Rand:e.rand,SecurityToken:e.stsToken,StreamType:e.mediaType,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:u,PlayerVersion:s.h5Version,Channel:"HTML5"},"AUTO"===e.definition?u.ResultType="Multiple":e.definition&&(u.Definition=e.definition),e.authInfo&&(u.AuthInfo=e.authInfo),e.outputType&&(u.OutputType=e.outputType),e.playConfig&&(u.PlayConfig=JSON.stringify(e.playConfig)),e.reAuthInfo&&(u.ReAuthInfo=JSON.stringify(e.reAuthInfo)),u=o.makeUTF8sort(u,"=","&")+"&Signature="+o.AliyunEncodeURI(o.makeChangeSiga(u,e.accessSecret)),u="https://vod."+e.domainRegion+".aliyuncs.com/?"+u,i.get(u,(function(i){if(i){for(var n="",o=(i=JSON.parse(i)).VideoBase.ThumbnailList,s=(o&&o.Thumbnail&&0<o.Thumbnail.length?n=o.Thumbnail[0].URL:e.thumbnailUrl&&(n=String(e.thumbnailUrl)),i.PlayInfoList.PlayInfo),l=[],u=[],p=s.length-1;0<=p;--p)"AUTO"===s[p].Definition?l=[s.splice(p,1)[0]]:1===s[p].Encrypt&&u.push(s[p]);o=null,u=0===l.length?(o=a.objectPlayerMessageSort(s,t),[]):(o=a.objectPlayerMessageSort(l),a.objectPlayerMessageSort(u)),o&&r&&r({requestId:i.RequestId,urls:o,encryptUrlArr:u,thumbnailUrl:n,coverUrl:i.VideoBase.CoverURL,playInfoAry:s})}else c&&c(a.createError("点播服务获取数据失败"))}),(function(e){if(c){var t={Code:"",Message:l.get("Error_Vod_Fetch_Urls_Text")};try{t=JSON.parse(e)}catch(e){}c({Code:n.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.RequestId||""})}}))}},{"../../config":14,"../../lang/index":22,"../../lib/constants":27,"../../lib/io":39,"./signature":112,"./util":114}],116:[function(e,t,r){var i=e("./saasplayer"),n=e("../../lib/constants"),o=e("./vod"),a=e("./signature"),s=(e("./authkeyexpiredhandle"),e("./ststoken"),e("../../lib/io")),l=e("../../config");e=i.extend({init:function(e,t){i.call(this,e,t),this.service=o,this.loadByVod()}}),e.prototype.loadByVod=function(e){var t,r,i;"undefined"!=typeof _pa_n4lto7xi?this._loadByVod(e):(t="aliplayer-vod-p-min.js",r=l.domain?"https://"+l.domain+"/de/prismplayer/"+l.h5Version+"/hls/"+t:"/build/hls/"+t,i=this,s.loadJS(r,(function(){i._loadByVod(e)})))},e.prototype._loadByVod=function(e){var t="",r="",i="",o="",s="";if(this._options.accessKeyId&&this._options.accessKeySecret)t=this._options.accessKeyId,r=this._options.accessKeySecret,i=this._options.securityToken,o=this._options.region,this.log("STARTFETCHDATA",{it:"sts",pa:{vid:this._options.vid}});else{try{var l=_pa_n4lto7xi(this._options.playauth),c=(this._options.playauth!==l&&(this._vdnct6f=!0),a.encPlayAuth(l));t=c.AccessKeyId,r=c.AccessKeySecret,i=c.SecurityToken,o=c.Region,s=c.AuthInfo}catch(e){console.log("e",e);var u={Code:n.ErrorCode.PlayauthDecode,Message:"playauth decoded failed.",displayMessage:"playauth解析错误"};return void this._mtsError_message(this,u,l)}this._options.from=c.CustomerId||"",this.log("STARTFETCHDATA",{it:"playAuth",pa:{vid:this._options.vid}})}this._loadByVodBySTS(t,r,i,o,s,e)},e.prototype.replayByVidAndPlayAuth=function(e,t){this.trigger("error_hide"),this._options.source="",this._options.vid=e,this._options.playauth=t,this._isError=!1,this._duration=0,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.loadByVod(!0)},e.prototype.updateSourcesByVidAndPlayAuth=function(e,t){var r,i,n;"undefined"!=typeof _pa_n4lto7xi?this._updateSourcesByVidAndPlayAuth(e,t):(r="aliplayer-vod-p-min.js",i=l.domain?"https://"+l.domain+"/de/prismplayer/"+l.h5Version+"/hls/"+r:"/build/hls/"+r,n=this,s.loadJS(i,(function(){n._updateSourcesByVidAndPlayAuth(e,t)})))},e.prototype._updateSourcesByVidAndPlayAuth=function(e,t){if(e!=this._options.vid)console.log("不能更新地址，vid和播放中的不一致");else{this._options.vid=e,this._options.playauth=t;try{var r=_pa_n4lto7xi(this._options.playauth),i=(this._options.playauth!==r&&(this._vdnct6f=!0),a.encPlayAuth(r))}catch(e){return void console.log("playauth解析错误")}t={vid:e,accessId:i.AccessKeyId,accessSecret:i.AccessKeySecret,stsToken:i.SecurityToken,domainRegion:i.Region,authInfo:i.AuthInfo,playDomain:i.PlayDomain,format:this._options.format,mediaType:this._options.mediaType};var o=(this._authKeyExpiredHandle.clearTick(),this);this.service.loadData(t,this._options.qualitySort,(function(e){o._serverRequestId=e.requestId,0!=e.urls.length&&(o._urls=e.urls),o._authKeyExpiredHandle.tick(n.AuthKeyRefreshExpired)}),(function(e){console.log(e)}))}},e.prototype.reloaduserPlayInfoAndVidRequestMts=function(e,t){this.replayByVidAndPlayAuth(e,t,accessSecret)},e.prototype._loadByVodBySTS=function(e,t,r,i,n,o){e={vid:this._options.vid,accessId:e,accessSecret:t,stsToken:r,authInfo:n,domainRegion:i,format:this._options.format,mediaType:this._options.mediaType,definition:this._options.definition,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,outputType:this._options.outputType,playConfig:this._options.playConfig,reAuthInfo:this._options.reAuthInfo},this.loadData(e,o)},t.exports=e},{"../../config":14,"../../lib/constants":27,"../../lib/io":39,"./authkeyexpiredhandle":105,"./saasplayer":111,"./signature":112,"./ststoken":113,"./vod":115}],117:[function(e,t,r){function i(e){this._player=e,this._video=e.tag;var t=this;this._isCreated=!1,this._canPlayTriggered=!1,this._defaultTrack="",e.on(n.Private.ChangeURL,(function(){t._isCreated=!1,t._canPlayTriggered=!1,t._defaultTrack=""})),e.on(n.Player.CanPlay,(function(){var r;t._player._drm||t._canPlayTriggered||((r=t._getTracks())&&(t._isCreated=!0,t._player._options.isVBR||t._hls||(e.trigger(n.Player.AudioTrackReady,r),t._notifyDefaultValue(r))),t._canPlayTriggered=!0)})),e.on(n.Player.AudioTrackUpdated,(function(r){t._isCreated||(r=t._getTracks(r.paramData.audioTracks))&&(t._isCreated=!0,e.trigger(n.Player.AudioTrackReady,r),t._notifyDefaultValue(r))}))}var n=e("../base/event/eventtype");i.prototype._notifyDefaultValue=function(e){!this._defaultTrack&&0<e.length&&(this._defaultTrack=e[0]),this._defaultTrack&&this._player.trigger(n.Private.SelectorUpdateList,{type:"audio",text:this._defaultTrack.text})},i.prototype.support=function(){return!!this._video.audioTracks},i.prototype._getTracks=function(e){if(!this.support()&&!e)return null;for(var t=[],r=(e=!this._video||!this._video.audioTracks||e&&0!=e.length?e:this._video.audioTracks)?e.length:0,i=0;i<r;i++){var n=e[i],o={value:n.id,text:n.label||n.name||n.language};(n.default||n.enabled)&&(this._defaultTrack=o),t.push(o)}return t},i.prototype.switch=function(e){if(this._player._hls)this._player._hls.audioTrack=+e;else for(var t=this._video.audioTracks?this._video.audioTracks.length:0,r=0;r<t;r++){var i=this._video.audioTracks[r];i.id==e?i.enabled=!0:i.enabled=!1}},i.prototype.dispose=function(){this._player=null},t.exports=i},{"../base/event/eventtype":69}],118:[function(e,t,r){function i(e){this._video=e.tag,this._player=e,this._isCreated=!1,this._backupCC="",this.tracks=[],this._defaultTrack="",this._currentValue="",this._switchTimer=null,this._storedTracks=[];var t=this,r=(e.on(n.Player.LevelsLoaded,(function(e){if(a.IS_MAC_SAFARI||a.IS_IOS)if(e&&e.paramData&&e.paramData.subtitles&&e.paramData.subtitles.length){for(var r=e.paramData.subtitles||[],i=[],n=0;n<r.length;n++){var o=r[n];o.vttUrl=o.url&&o.url.replace(".m3u8",".vtt"),i.push(o)}t._storedTracks=i}else t._resotreTracks()})),e.on(n.Private.SafariDrmLevelSwitch,(function(){t._resotreTracks()})),e.on(n.Private.ChangeURL,(function(e){e&&e.paramData&&"saas"===e.paramData.from||(t._disabledTracks(),t._isCreated=!1,t._defaultTrack="",t._backupCC="")})),e.on(n.Private.VttClearTracks,(function(){t.switch("off"),t._disabledTracks(),t._isCreated=!1,t._defaultTrack={value:"off",text:"Off"},t.tracks=[t._defaultTrack],e.trigger(n.Private.SelectorGenerateList,{type:"cc"}),e.trigger(n.Private.CCStateChanged,{value:"off",lang:""})})),e.on(n.Player.CanPlay,(function(){t._isCreated||(t.tracks=t._getTracks(),e.trigger(n.Player.TextTrackReady,t.tracks),e.trigger(n.Private.CCReset)),t._isCreated&&!t._player._setDefaultCC||!t._defaultTrack||(e.trigger(n.Private.SelectorUpdateList,{type:"cc",text:t._defaultTrack.text}),t.switch(t._defaultTrack.value),t._player._setDefaultCC=!1,t._isCreated=!0)})),a.os.ios&&parseFloat(a.os.version)<=15.1&&o.addCssByStyle("video::-webkit-media-text-track-container{position: relative; top: -44px !important;}"),"always"===e.getOptions().controlBarVisibility&&o.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}"),c.throttle((function(){e._vttBroker&&e._vttBroker.enabled||o.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}")}),100));e.on(n.Private.ShowBar,r),r=c.throttle((function(){e._vttBroker&&e._vttBroker.enabled||o.addCssByStyle("video::-webkit-media-text-track-container{transform: none;}")}),100),e.on(n.Private.HideBar,r),e.on(n.Private.CCReset,(function(){t._updateSelectorList()}))}var n=e("../base/event/eventtype"),o=(e("../../lib/event"),e("../../lib/dom")),a=e("../../lib/ua"),s=e("../../lib/cookie"),l=e("../../lib/constants"),c=e("../../ui/component/util");i.prototype._adaptiveCueStype=function(){var e,t=-10;a.IS_SAFARI?(t=-65,(e=this._player.fullscreenService)&&e.getIsFullScreen()&&(t=-95)):a.IS_MOBILE&&(t=-30),o.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY("+t+"px) !important;}")},i.prototype.close=function(){for(var e=this.getTextTracks(),t=e.length,r=0;r<t;r++){var i=e[r];"expired"!=i.mode&&("showing"==i.mode&&(this._backupCC=i),i.mode="disabled")}this._player.trigger(n.Private.VttHide)},i.prototype.open=function(){var e,t,r;return!this.tracks||this.tracks.length<2||(t=this._backupCC?this._backupCC.language:"",r=this._backupCC?this._backupCC.label:"",this.tracks.forEach((function(r){t===r.value&&(e=!0)})),(t=e?t:r="")||(t=this.tracks[1].value,r=this.tracks[1].text),this.switch(t)),{label:r,language:t}},i.prototype.getCurrentSubtitle=function(){return this._currentValue},i.prototype._getTracks=function(){for(var e=this.getTextTracks(),t=e.length,r=(this._defaultTrack={value:"off",text:"Off"},[this._defaultTrack]),i=s.get(l.SelectedCC),n="",o=!1,a=0;a<t;a++){var c,u=e[a];"expired"==u.mode||"subtitles"!=u.kind&&"captions"!=u.kind||(c={value:u.language,text:u.label},u.default&&(this._defaultTrack=c,o=!0),c.value==i&&(n=c),r.push(c))}return!o&&n&&(this._defaultTrack=n),r},i.prototype._disabledTracks=function(){for(var e=this.getTextTracks(),t=e.length,r=0;r<t;r++)e[r].mode="expired"},i.prototype.switch=function(e){var t=this._player;if(this.close(),"off"!=e)for(var r=this.getTextTracks(),i=r.length,o=0;o<i;o++){var a=r[o];a.language===e&&"expired"!=a.mode&&(r[o].mode="showing",t.trigger(n.Private.VttSwitchTrack,a.language))}else this.close();this._currentValue=e,t.trigger(n.Private.CCChanged,e)},i.prototype.updateUI=function(e){var t,r="on";t=e?(this.tracks.find((function(t){return t.value===e}))||{}).text||"":(r="off","Off"),player.trigger(n.Private.CCChanged,r),player.trigger(n.Private.CCStateChanged,{value:r,lang:t})},i.prototype.dispose=function(){this._player=null,this._switchTimer&&(clearTimeout(this._switchTimer),this._switchTimer=null)},i.prototype._patchSafariTracks=function(){var e=this;if(a.IS_MAC_SAFARI||a.IS_IOS){if(!(this._video&&this._video.textTracks&&this._video.textTracks.length)){var t=!1;if(t=!(!this._video.textTracks||!this._video.textTracks.length)||t)return;for(var r=0;r<this._storedTracks.length;r++){var i=this._storedTracks[r],n=i.vttUrl,o=document.createElement("track");o.src=n,o.kind="subtitles",o.label=i.name,o.srclang=i.lang,this._video.appendChild(o)}}this._switchTimer&&clearTimeout(this._switchTimer),this._switchTimer=setTimeout((function(){var t=e.getCurrentSubtitle();t&&"off"!==t&&e.switch(t)}),1e3)}},i.prototype.getTextTracks=function(){var e=this._player,t=e.tag;return e._vttBroker&&e._vttBroker.enabled&&e.getTextTracks?e.getTextTracks()||[]:t&&t.textTracks||[]},i.prototype._updateSelectorList=function(){var e=this._player;this.tracks=this._getTracks(),e.trigger(n.Private.SelectorGenerateList,{type:"cc",value:"Off"})},i.prototype._resotreTracks=function(){this._patchSafariTracks(),this.tracks=this._getTracks(),this._player.trigger(n.Player.TextTrackReady,this.tracks)},t.exports=i},{"../../lib/constants":27,"../../lib/cookie":28,"../../lib/dom":31,"../../lib/event":32,"../../lib/ua":48,"../../ui/component/util":157,"../base/event/eventtype":69}],119:[function(e,t,r){var i=e("../../lib/playerutil");t.exports=[{service:e("./ccservice"),name:"_ccService",condition:!0},{service:e("./audiotrackservice"),name:"_audioTrackService"},{service:e("./qualityservice"),name:"_qualityService"},{service:e("./fullscreenservice"),name:"fullscreenService",condition:function(){return!0}},{service:e("./liveshiftservice"),name:"_liveshiftService",condition:function(){var e=this.options();return i.isLiveShift(e)}},{service:e("./thumbnailservice"),name:"_thumbnailService",condition:function(){return!0}},{service:e("./progressmarkerservice"),name:"_progressMarkerService",condition:function(){return!0}}]},{"../../lib/playerutil":45,"./audiotrackservice":117,"./ccservice":118,"./fullscreenservice":120,"./liveshiftservice":121,"./progressmarkerservice":122,"./qualityservice":123,"./thumbnailservice":124}],120:[function(e,t,r){function i(e){this.isFullWindow=!1,this.isFullScreen=!1,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer=null,this._player=e;var t=this,r=u;this._fullscreenChanged=function(e){var i;null!=t._player&&(e.target||e.srcElement)===(e=t._player.el())&&(i=document[r.fullscreenElement],t.isFullScreen=i===e,(t.isFullScreenChanged=!0)===t.isFullScreen?t._player.trigger(s.Player.RequestFullScreen):t._player.trigger(s.Player.CancelFullScreen))},r&&a.on(document,r.eventName,this._fullscreenChanged)}var n=e("../../lib/ua"),o=e("../../lib/dom"),a=e("../../lib/event"),s=e("../base/event/eventtype"),l=e("../base/x5play"),c=e("../../lang/index"),u=function(){o.createEl("div");var e={},t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullScreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitfullScreen"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitIsFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","mozFullScreen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","MSFullScreen"]],r=!1;if(!(r=!(!n.IS_IOS||(e.requestFn="webkitEnterFullscreen",e.cancelFn="webkitExitFullscreen",e.fullscreenElement="webkitFullscreenElement",e.eventName="webkitfullscreenchange",e.isFullScreen="webkitDisplayingFullscreen",!document[e.requestFn]))||r)){for(var i=0;i<5;i++)if(t[i][1]in document){e.requestFn=t[i][0],e.cancelFn=t[i][1],e.fullscreenElement=t[i][2],e.eventName=t[i][4],e.isFullScreen=t[i][6];break}"requestFullscreen"in document?e.requestFn="requestFullscreen":"webkitRequestFullscreen"in document?e.requestFn="webkitRequestFullscreen":"webkitRequestFullScreen"in document?e.requestFn="webkitRequestFullScreen":"webkitEnterFullscreen"in document?e.requestFn="webkitEnterFullscreen":"mozRequestFullScreen"in document?e.requestFn="mozRequestFullScreen":"msRequestFullscreen"in document&&(e.requestFn="msRequestFullscreen"),"fullscreenchange"in document?e.eventName="fullscreenchange":"webkitfullscreenchange"in document||"webkitfullscreenchange"in document||"webkitfullscreenchange"in document?e.eventName="webkitfullscreenchange":"mozfullscreenchange"in document?e.eventName="mozfullscreenchange":"MSFullscreenChange"in document&&(e.eventName="MSFullscreenChange"),"fullScreen"in document?e.isFullScreen="fullScreen":"webkitfullScreen"in document?e.isFullScreen="webkitfullScreen":"webkitIsFullScreen"in document?e.isFullScreen="webkitIsFullScreen":"webkitDisplayingFullscreen"in document?e.isFullScreen="webkitDisplayingFullscreen":"mozFullScreen"in document?e.isFullScreen="mozFullScreen":"mozfullScreen"in document?e.isFullScreen="mozfullScreen":"MSFullScreen"in document&&(e.isFullScreen="MSFullScreen"),"fullscreenElement"in document?e.fullscreenElement="fullscreenElement":"webkitFullscreenElement"in document?e.fullscreenElement="webkitFullscreenElement":"webkitFullScreenElement"in document?e.fullscreenElement="webkitFullScreenElement":"mozFullScreenElement"in document?e.fullscreenElement="mozFullScreenElement":"msFullscreenElement"in document?e.fullscreenElement="msFullscreenElement":"MSFullscreenElement"in document&&(e.fullscreenElement="MSFullscreenElement")}return e.requestFn?e:null}(),p=(i.prototype.requestFullScreen=function(){if(!l.isAndroidX5()||!this._player.paused()){var e=u,t=this._player.el(),r=this;if(n.IS_IOS){t=this._player.tag;try{var i=t[e.requestFn]();i&&"function"==typeof i.catch&&i.catch((function(e){console.log(e)})),r._player.trigger(s.Player.RequestFullScreen)}catch(e){console.log(e)}return this}if(this.isFullScreen=!0,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer||clearTimeout(this._cancelFullScreenTimer),r=this,e&&!this._player._options.enableMockFullscreen)try{var o=t[e.requestFn]();o&&"function"==typeof o.catch&&o.catch((function(e){console.log(e)})),this._requestFullScreenTimer=setTimeout((function(){r.isFullScreenChanged||(p.apply(r),r._player.trigger(s.Player.RequestFullScreen)),r._requestFullScreenTimer=null}),1e3)}catch(e){console.log(e)}else p.apply(r),this._player.trigger(s.Player.RequestFullScreen);return this._player}this._player.trigger(s.Private.Info_Show,c.get("Play_Before_Fullscreen"))},i.prototype.cancelFullScreen=function(){var e=u,t=(this.isFullScreen=!1,this.isFullScreenChanged=!1,this._cancelFullScreenTimer=null,this._requestFullScreenTimer||clearTimeout(this._requestFullScreenTimer),this);if(e&&!this._player._options.enableMockFullscreen){try{var r=document[e.cancelFn]();r&&"function"==typeof r.catch&&r.catch((function(e){console.log(e)}))}catch(e){console.log(e)}t._cancelFullScreenTimer=setTimeout((function(){t.isFullScreenChanged||(d.apply(t),t._player.trigger(s.Player.CancelFullScreen)),t._cancelFullScreenTimer=null}),500)}else d.apply(t),this._player.trigger(s.Player.CancelFullScreen);return this._player.tag.paused||this._player.trigger(s.Player.Play),this._player},i.prototype.getIsFullScreen=function(){return this.isFullScreen},i.prototype.dispose=function(){this._player=null,u&&a.off(document,u.eventName,this._fullscreenChanged)},function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",o.addClass(document.getElementsByTagName("body")[0],"prism-full-window")}),d=function(){this.isFullWindow=!1,document.documentElement.style.overflow=this.docOrigOverflow,o.removeClass(document.getElementsByTagName("body")[0],"prism-full-window")};t.exports=i},{"../../lang/index":22,"../../lib/dom":31,"../../lib/event":32,"../../lib/ua":48,"../base/event/eventtype":69,"../base/x5play":95}],121:[function(e,t,r){function i(e,t){var r;if(e)return e=new Date(e),r=(t=new Date(t)).valueOf()/1e3-e.valueOf()/1e3,{start:e,end:t,endDisplay:s.extractTime(t),totalTime:r}}function n(e,t){t&&(e.currentTimestamp=t,e.currentTime=s.convertToDate(t),e.currentTimeDisplay=s.extractTime(e.currentTime),e.liveShiftStart=e.liveTimeRange.start,e.liveShiftEnd=e.liveTimeRange.end,e.liveShiftStartDisplay=s.extractTime(e.liveShiftStart),e.liveShiftEndDisplay=s.extractTime(e.liveShiftEnd),e.availableLiveShiftTime=t-e.liveShiftStart.valueOf()/1e3,e.timestampStart=s.convertToTimestamp(e.liveShiftStart),e.timestampEnd,s.convertToTimestamp(e.liveShiftEnd))}function o(e){function t(){var t=e._options.source;this._originalPlayUrl=t,this._liveShiftUrl=e._options.liveTimeShiftUrl,this.liveTimeRange=i(e._options.liveStartTime,e._options.liveOverTime),this.availableLiveShiftTime=0,this.seekTime=-1}this._player=e,this._isLiveShiftPlaying=!1;var r=this;t.call(this),e.liveShiftSerivce={setLiveTimeRange:function(e,t){r.setLiveTimeRange(e,t)},queryLiveShift:function(e,t,i){r.queryLiveShift(e,t,i)},isLiveShiftPlaying:function(){return r._isLiveShiftPlaying}},e.on(h.Private.ChangeURL,(function(){t.call(r)}))}var a=e("../../lib/io"),s=e("../../lib/util"),l=e("../../lib/playerUtil"),c=e("../../lang/index"),u=e("../flv/flvinjector"),p=e("../hls/hlsinjector"),d=e("../../lib/constants"),h=e("../base/event/eventtype");e("../../lib/url"),o.prototype.validate=function(){return!(this.liveTimeRange.start>=this.liveTimeRange.end)},o.prototype.switchToLive=function(){this.seekTime=-1;var e=this._originalPlayUrl,t=this._player._options.liveShiftSource,r=this._player._options.source;l.isHls(r)&&l.isFlv(e)&&t&&l.isHls(t)&&(this._player._hls&&this._player._destroyHls(),r=this._player._superType,t=this._player._Type,this._player._options._autoplay=!0,u.inject(this._player,t,r,this._player._options,"",!0)),this._player._loadByUrlInner(e,null,!0),this._isLiveShiftPlaying=!1,this._player.trigger(h.Private.LiveShiftSwitchToLive)},o.prototype.getBaseTime=function(){return this.liveShiftStartDisplay,-1==this.seekTime?s.parseTime(this.currentTimeDisplay):s.parseTime(this.liveShiftStartDisplay)+this.seekTime},o.prototype.getSourceUrl=function(e,t){var r=this._originalPlayUrl;return this.availableLiveShiftTime<e||(this._isLiveShiftPlaying=!0,e=parseInt(e),r=(r=this._switchLiveShiftPlayer(t))&&this._cleanUrl(r),t=parseInt(this.currentTimestamp)-e,-1===(r=-1==r.indexOf("?")?r+"?lhs_start_unix_s_0="+t:r+"&lhs_start_unix_s_0="+t).indexOf("aliyunols=on")&&(r+="&aliyunols=on"),-1===r.indexOf("continue=on")&&(r+="&continue=on")),r},o.prototype._cleanUrl=function(e){var t;return-1===e.indexOf("?")?e:(e=(e=(t=e.split("?"))[1])&&(0===(e=e.replace(/&?lhs_start_unix_s_0=[0-9]*/g,"")).indexOf("&")?e.replace("&",""):e))?t[0]+"?"+e:t[0]},o.prototype._switchLiveShiftPlayer=function(e){var t,r=this._originalPlayUrl,i=this._player._options.liveShiftSource,n=this._player._options.source;if(l.isHls(n))r=n;else if(l.isFlv(r)&&i&&l.isHls(i))return this._player._flv&&this._player._destroyFlv(),n=this._player._superType,t=this._player._Type,this._player._options._autoplay=!0,p.inject(this._player,t,n,this._player._options,"",!0),i;return r},o.prototype.getTimeline=function(e,t){var r;this._player.trigger(h.Private.LiveShiftQueryCompleted),this._liveShiftUrl?(r=this).queryLiveShift(this._liveShiftUrl,(function(i){i?0==i.retCode?(n(r,i.content.current),e&&e()):t({Code:d.ErrorCode.ServerAPIError,Message:i.retCode+"|"+i.description+"|"+i.content}):console.log("获取直播时移数据失败")}),(function(e){if(t&&e){var r={};if(e){if("string"==typeof e&&-1<e.indexOf("403 Forbidden"))r.Code=d.ErrorCode.AuthKeyExpired,r.Message="Query liveshift failed:"+c.get("Error_AuthKey_Text");else{var i;r=e;try{i=JSON.parse(e)}catch(e){}i&&(r.Code=d.ErrorCode.ServerAPIError,r.Message=i.retCode+"|"+i.description+"|"+i.content)}t(r)}}})):(n(this,(new Date).valueOf()/1e3),e&&e())},o.prototype.start=function(e,t){var r=this;r.getTimeline((function(e){r._localLiveTimeHandler||r.tickLocalLiveTime()}),t),function i(){r._loopHandler&&clearTimeout(r._loopHandler),r._loopHandler=setTimeout((function(){r.getTimeline((function(){}),t),i()}),e)}()},o.prototype.tickLocalLiveTime=function(){var e=this;!function t(){e._localLiveTimeHandler=setTimeout((function(){e.currentTimestamp++,n(e,e.currentTimestamp),e._player.trigger(h.Private.LiveShiftQueryCompleted),t()}),1e3)}()},o.prototype.setLiveTimeRange=function(e,t){e=e||this._player._options.liveStartTime,t=t||this._player._options.liveOverTime,this.liveTimeRange=i(e,t),n(this,this.currentTimestamp),this._player.trigger(h.Private.LiveShiftQueryCompleted)},o.prototype.queryLiveShift=function(e,t,r){a.get(e,(function(e){var i;e?0==(i=JSON.parse(e)).retCode?t&&t(i):r&&r(i):r&&r(e)}),(function(e){r&&r(e)}))},o.prototype.stop=function(e){this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null)},o.prototype.dispose=function(){this.stop(),this._localLiveTimeHandler&&(clearTimeout(this._localLiveTimeHandler),this._localLiveTimeHandler=null),this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null),this._player=null},t.exports=o},{"../../lang/index":22,"../../lib/constants":27,"../../lib/io":39,"../../lib/playerUtil":44,"../../lib/url":49,"../../lib/util":50,"../base/event/eventtype":69,"../flv/flvinjector":99,"../hls/hlsinjector":101}],122:[function(e,t,r){function i(e){function t(){var t=document.querySelector("#"+e.id()+" .prism-progress-marker");if(t){t.innerHTML="";var i=r._player.getDuration();if(0<i){for(var s=0;s<r.progressMarkers.length;s++){var l,c=r.progressMarkers[s];void 0!==c.offset&&""!==c.offset&&(c=document.createElement("div"),o.addClass(c,"prism-marker-dot"),l=r.progressMarkers[s].offset/i,c.style.left=100*l+"%",t.appendChild(c),l=function(e,t){return function(){r._player.trigger(n.Private.MarkerTextShow,{left:e,progressMarker:t})}}(l,r.progressMarkers[s]),a.on(c,"mouseover",l),a.on(c,"mouseout",(function(e){r._player.trigger(n.Private.MarkerTextHide)})),a.on(c,"touchstart",l),a.on(c,"mousemove",(function(e){e.preventDefault()})),a.on(c,"touchmove",(function(e){e.preventDefault()})))}var u=document.querySelector("#"+r._player.id()+" .prism-progress-cursor");r._player.on(u,"click",(function(e){for(var t=r._player.getCurrentTime(),o=0;o<r.progressMarkers.length;o++){var a,s=r.progressMarkers[o];s&&t-1<s.offset&&s.offset<t+1&&(a=s.offset/i*100+"%",r._player.trigger(n.Private.MarkerTextShow,{left:a,progressMarker:s}))}}))}}}this.progressMarkers=[],this._player=e;var r=this;e.on(n.Private.ProgressMarkerLoaded,(function(e){(e=e.paramData)&&0<e.length&&(r.progressMarkers=e)})),e.on(n.Private.ProgressMarkerChanged,(function(e){(e=e.paramData)&&0<e.length&&(r.progressMarkers=e,t())})),e.on(n.Video.LoadedMetadata,t)}var n=e("../base/event/eventtype"),o=(e("../../lang/index"),e("../../lib/hls/hlsparse"),e("../../lib/object"),e("../../lib/dom")),a=e("../../lib/event");e("../../lib/playerutil"),i.prototype.dispose=function(){this._player=null,this.progressMarkers=[]},t.exports=i},{"../../lang/index":22,"../../lib/dom":31,"../../lib/event":32,"../../lib/hls/hlsparse":38,"../../lib/object":41,"../../lib/playerutil":45,"../base/event/eventtype":69}],123:[function(e,t,r){function i(e){this.levels=[],this.drmUrl={},this._player=e;var t=this;e.on(n.Private.PlayInfoLoaded,(function(e){for(var r=e.paramData.encryptUrlArr||[],i=[],n=0;n<r.length;n++){var o=r[n];o.encryptionType===c.VodEncryptionType["Widevine-FairPlay"]&&i.push(o)}t.drmUrl=i})),e.on(n.Player.LevelsLoaded,(function(r){if(0<t.levels.length&&(t.levels=[]),(r=r.paramData)&&r.levels){for(var i,a=r.levels.length-1;-1<a;a--){var l,c=r.levels[a];c.url&&0<c.url.length&&c.attrs&&c.attrs.BANDWIDTH&&(l=c.url,s.isArray(l)&&(l=l[0]),l={Url:l=!e._hls&&e._options.isVBR&&e._options.isDrm?u.call(t,c):l,desc:c.height||c.width,bitrate:c.bitrate,resolution:c.attrs.RESOLUTION,bandwidth:c.attrs.BANDWIDTH},t.levels.push(l))}"AUTO"===e._options.definition&&(e._urls=[],Object.assign(e._urls,this.levels)),t.levels.sort((function(e,t){return e.desc-t.desc})),0<t.levels.length&&(i="",this._player._options.isVBR&&(i=o.get("Auto")),t.levels.push({Url:r.url,desc:i}),e.trigger(n.Private.SelectorUpdateList,{type:"quality",text:i}))}})),e.on(n.Video.LoadStart,(function(){var r;e._options&&(r=e._options.source,!e._hls)&&r&&l.isHls(r)&&(e._manuallySwitchDrmLevel?(e._manuallySwitchDrmLevel=!1,e.trigger(n.Private.SafariDrmLevelSwitch)):t.loadLevels(r))}))}var n=e("../base/event/eventtype"),o=e("../../lang/index"),a=e("../../lib/hls/hlsparse"),s=e("../../lib/object"),l=e("../../lib/playerutil"),c=e("../../lib/constants");function u(e){for(var t,r=this.drmUrl,i=0;i<this.drmUrl.length;i++)if(Number(e.height)===Number(r[i].height)){t=r[i].Url;break}return t}(i.prototype={loadLevels:function(e){var t=new a,r=this;t.load(e,(function(e){r._player.trigger(n.Player.LevelsLoaded,e)}))}}).dispose=function(){this._player=null},t.exports=i},{"../../lang/index":22,"../../lib/constants":27,"../../lib/hls/hlsparse":38,"../../lib/object":41,"../../lib/playerutil":45,"../base/event/eventtype":69}],124:[function(e,t,r){function i(e){this._player=e,this.cues=[],this.baseUrl="";var t=this;e.on(s.Private.ChangeURL,(function(){t.cues=[],t.baseUrl=""}))}var n=e("../../lib/io"),o=e("../../lib/url"),a=e("../../lib/vtt/thumbnailvtt"),s=e("../base/event/eventtype");(i.prototype={get:function(e){var t,r,i=this;this.baseUrl=(t=e,(r=o.parseUrl(t))&&(r=r.segments)&&0<r.length&&(r=r[r.length-1],baseUrl=t.replace(r,"")),baseUrl),n.get(e,(function(e){e&&a.parse(e,(function(e){i.cues=e,i._player.trigger(s.Private.ThumbnailLoaded,e)}))}),(function(e){console.log(e)}))},findAvailableCue:function(e){for(var t=this.cues.length,r=0;r<t;r++){var i=this.cues[r];if(i.startTime<=e&&e<i.endTime)return i}return null},makeUrl:function(e){return-1==e.indexOf("://")?this.baseUrl+e:e}}).dispose=function(){this._player=null},t.exports=i},{"../../lib/io":39,"../../lib/url":49,"../../lib/vtt/thumbnailvtt":52,"../base/event/eventtype":69}],125:[function(e,t,r){var i=e("../base/player"),n=e("./splayerinjector"),o=e("../../lib/playerutil"),a=e("../base/event/eventtype"),s=e("../../lib/constants"),l=e("../../lib/codec-probe"),c=s.USER_EVENT_NAME,u=o.isH265Codec,p=o.getVideoTrack,d={},h={codecCost:0,decoderCost:0},f=i.extend({init:function(e,t){var r,s=this,y=(this._options=t,this._extraMultiSources()),_={};function g(){i.call(this,e,t),this._monitor&&this._monitor.updateH265ProbeCost(h),m.call(this),d.codecTag&&n.reportH265PlayInfo.call(this,{renderType:"native",codecTag:d.codecTag})}function v(){t._native=!1,n.inject(this,f,i,t,d),i.call(this,e,t),this._monitor&&this._monitor.updateH265ProbeCost(h),m.call(this)}function m(){var e,t,r=this,n=_,o=this[c];o&&(n=Object.assign({},_,o),e=Object.keys(_),t=Object.keys(o),e.forEach((function(e){-1<t.indexOf(e)&&(n[e]=_[e].concat(o[e]))}))),Object.keys(n).forEach((function(e){n[e].forEach((function(t){t.binded||i.prototype.on.call(r,e,t)}))}))}_[a.Player.Ready]=[function(){s._setupSourceList(y),s.trigger(a.Private.SelectorGenerateList,{type:"quality"})}],t.forceH265?v.call(this):(r=performance.now(),l(t.source,(function(e){h.codecCost+=performance.now()-r;var t,i=((e=p(e.tracks))||{}).codecTag;d.codecTag=i,e&&u(i)?(t=performance.now(),o.shouldUseBasePlayer(i,(function(e){h.decoderCost+=performance.now()-t,(e?g:v).call(s)}))):g.call(s)}),(function(e){console.log("error in demuxer, fallback to basePlayer",e),h.codecCost+=performance.now()-r,g.call(s)})))}});t.exports=f},{"../../lib/codec-probe":25,"../../lib/constants":27,"../../lib/playerutil":45,"../base/event/eventtype":69,"../base/player":90,"./splayerinjector":126}],126:[function(e,t,r){function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}var n=e("../../lib/io"),o=e("../base/event/eventtype"),a=e("../base/event/eventmanager"),s=(e("../../lib/event"),e("../../lib/util")),l=e("../../lib/dom"),c=e("../../lib/playerutil"),u=e("../../lib/constants"),p=e("../../lang/index");function d(e){var t=this._options,r=(f.call(this),function(){c.isVideoTag(this.tag)&&(a.offVideoAll(this),this.tag.parentNode.removeChild(this.tag),this.tag=null)}.call(this),Videox.Videox),n=new r(i({container:this._el,wasmDomain:t.splayerWasmDomain,progressive:!0,skipFrame:r.DiscardType.NONE,loop:t.rePlay,controls:!1,muted:!1,threads:t.h265Threads,simd:t.h265Simd,autoplay:t.autoplay,live:t.isLive,poster:t.cover||void 0,src:t.source,trackOptions:{disable:!0},preload:t.preload?"auto":"none",timeout:1e3*t.waitingTimeout},t.splayerOptions||{}));t.debug&&(n.setLogLevel(r.LogLevel.LOG),n.setLogPrintLevel(r.LogLevel.LOG)),this._splayer=n,this.tag=n,function(){var e,t=this,r=document.createElement("video");for(e in r)!function(e){t.tag[e]||0===e.indexOf("on")||"function"!=typeof r[e]||(t.tag[e]=function(){console.warn("Function ["+e+"] is called on splayer, which should be a mistake."),r[e].apply(r,arguments)})}(e)}.call(this),function(e){var t=this,r=(a.onAll(this),this._splayer);r.addEventListener("error",function(e){console.log("Splayer error",(e||{}).detail);var t,r,i=Videox.Videox,n=(e||{}).detail;switch(e=Number((n||{}).code)){case(i=i.ErrorCode).WASM_NOT_SUPPORTED:case i.CANVAS_NOT_SUPPORTED:case i.AUDIOCONTEXT_NOT_SUPPORTED:case i.WORKER_NOT_SUPPORTED:case i.WEBGL_NOT_SUPPORTED:t=u.ErrorCode.SplayerEnvCheckError,r=p.get("Splayer_Err_Env_Check")+" | "+h(n);break;case i.DECODE:t=u.ErrorCode.SplayerDecodeError,r=p.get("Splayer_Err_Decode");break;case i.NETWORK:t=u.ErrorCode.NetworkError,r=p.get("Error_Network_Text");var a=(n.origin||{}).response;a?404===(a=a.status)?(t=u.ErrorCode.NotFoundSourceURL,r=p.get("Error_Not_Found")):403===a&&(t=u.ErrorCode.AuthKeyExpired,r=p.get("Error_AuthKey_Text")):navigator.onLine&&(t=u.ErrorCode.RequestDataError,r=r+"，"+p.get("Maybe_Cors_Error"));break;case i.PARSER:t=u.ErrorCode.SplayerParserNotFound,r=p.get("Splayer_Err_Parser_Not_Found");break;default:t=u.ErrorCode.OtherError,r="(SP)"+p.get("Error_Play_Text")+" | "+h(n)}t===u.ErrorCode.NetworkError&&this._reloadForVod()||(null!==(e={error_code:t,error_msg:r}).error_code&&null!==e.error_msg&&(this.logError(e),this.trigger(o.Player.Error,e)),y.call(this,{}))}.bind(this)),r.addEventListener("decoderoverload",(function(e){delete(e=e.detail).shouldWarn,t.trigger(o.Player.H265DecoderOverload,e)})),r.addEventListener("loadedsupportinfo",(function(e){var i=(e=e.detail||{}).detail||{},n=r.controller.options||{};y.call(t,{renderer:e.renderer,wasmThreads:i.wasmThreads&&n.threads,wasmThreadsOption:n.threads,simd:i.simd&&n.simd,simdOption:n.simd,codecTag:r.controller.videoTrack&&r.controller.videoTrack.codecTag})})),this._options.autoplay&&(r.once("canplay",(function(){r.paused&&t._autoplayFailedHandler()})),r.once("timeupdate",(function(){t.trigger(o.Player.Play)})),this._monitor)&&this._monitor.reportStartPlay()}.call(this,e)}function h(e){var t=(e=e=void 0===e?{}:e).code,r=(e=e.message,Videox.Videox.ErrorCode),i="";return t?i+t+": "+(e||r[t]):i}function f(){this._splayer&&(this._splayer.destroy(),this._splayer=null)}function y(e){var t;void 0===e&&(e={}),this._h265InfoReported||(this._h265InfoReported=!0,t={0:"native",1:"mse",2:"wasm"},delete(e=i({codecTag:(this._probeInfo||{}).codecTag||e.codecTag,renderType:e.renderType||t[e.renderer]},e)).renderer,e.renderType!==t[2]&&(delete e.simd,delete e.simdOption,delete e.wasmThreads,delete e.wasmThreadsOption),e.codecTag&&c.isH265Codec(e.codecTag)&&this.trigger(o.Player.H265PlayInfo,e))}t.exports.reportH265PlayInfo=y,t.exports.inject=function(e,t,r,i,a){e._Type=t,e._superType=r,e._superPt=r.prototype,e._disposed=!1,e._splayer=null,e._splayerLoaded=!1,e._probeInfo=a,t.prototype.initPlay=function(e){var t=this;this.trigger(o.Private.H5_Loading_Show),function(e){return!s.contentProtocolMixed(e,"alwaysCheck")||((e={mediaId:this._options.vid||"",error_code:u.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=p.get("Request_Block_Text"),this.logError(e),this.trigger(o.Player.Error,e),!1)}.call(this,this._options.source)&&(this._splayerLoaded?d.call(this,e):function(e){var t=this._options.splayerUrl||"https://g.alicdn.com/splayer/splayer/0.6.0/dist/index.js";n.loadJS(t,e.bind(this))}.call(this,(function(){this._splayerLoaded=!0,d.call(this,e),t._executeReadyCallback()})))},t.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this._splayer.load(),this._splayer.play(),this},t.prototype.setPlayerSize=function(e,t){this._superPt.setPlayerSize.call(this,e,t),e=this._el.querySelector("canvas"),t=this._el.offsetWidth/this._el.offsetHeight,e.offsetWidth/e.offsetHeight<t?(e.style.height="100%",e.style.width="initial"):(e.style.width="100%",e.style.height="initial")},t.prototype._setTransform=function(){var e=this._player._el.querySelector("canvas"),t=(this._transformProp||(this._transformProp=l.getTransformName(e)),"");this._rotate&&(t+=" rotate("+this._rotate+"deg)"),this._image&&("vertical"==this._image?t+=" scaleY(-1)":"horizon"==this._image&&(t+=" scaleX(-1)")),e.style[this._transformProp]=t},t.prototype.dispose=function(){this._disposed||(this._superPt&&(this._superPt.dispose.call(this),t.prototype.replay=this._superPt.replay,t.prototype.setPlayerSize=this._superPt.setPlayerSize,t.prototype._setTransform=this._superPt._setTransform,t.prototype.initPlay=this._superPt.initPlay,t.prototype.dispose=this._superPt.dispose),f.call(this),this._Type=null,this._superType=null,this._superPt=null,this._disposed=!0,this._splayerLoaded=!1,this._h265InfoReported=!1)}}},{"../../lang/index":22,"../../lib/constants":27,"../../lib/dom":31,"../../lib/event":32,"../../lib/io":39,"../../lib/playerutil":45,"../../lib/util":50,"../base/event/eventmanager":68,"../base/event/eventtype":69}],127:[function(require,module,exports){(function _SkeinEnclosedFunction($jsskein_array_37,$jsskein_array_38,$jsskein_array_39,$jsskein_array_40,$jsskein_array_41,$jsskein_array_42,$jsskein_array_43,$jsskein_array_44){function kl5f8(){function e(e){var t=(t=$jsskein_array_37[3]).split($jsskein_array_42[0]).reverse().join($jsskein_array_43[3]);return t=window[t],$jsskein_array_39[2],$jsskein_array_39[2],t[e]=function(){}}for(var t=1;void 0!==t;){var r=1&t>>1;switch(1&t){case 0:switch(r){case 0:t=void 0;continue;case 1:var i=[],n=(n=$jsskein_array_44[1]).split($jsskein_array_38[1]).reverse().join($jsskein_array_44[2]),o=$jsskein_array_43[2];o+=$jsskein_array_39[1];var a=(a=$jsskein_array_37[2]).split($jsskein_array_43[3]).reverse().join($jsskein_array_43[3]);i.push($jsskein_array_44[3],$jsskein_array_40[0],n,o,$jsskein_array_44[4],$jsskein_array_44[5],a,$jsskein_array_38[2]),i.forEach(e),t=0;continue}continue;case 1:0==r&&($jsskein_array_37[0],t=window?2:0)}}}function gas4s8(){for(var NEXTBB12=0;void 0!==NEXTBB12;){var $jsskein_indexLevel46_0=1&NEXTBB12,$jsskein_indexLevel46_1_Base=NEXTBB12>>1,$jsskein_indexLevel46_1=1&$jsskein_indexLevel46_1_Base;switch($jsskein_indexLevel46_0){case 0:switch($jsskein_indexLevel46_1){case 0:NEXTBB12=2;continue;case 1:NEXTBB12=$jsskein_array_40[1]?1:3;continue}continue;case 1:switch($jsskein_indexLevel46_1){case 0:eval(fs56j57),NEXTBB12=2;continue;case 1:NEXTBB12=void 0;continue}continue}}}function n5fg6f(player){function _SkeinIIFE19(){function cl48s87(isOpen){for(var NEXTBB22=5;void 0!==NEXTBB22;){var $jsskein_indexLevel47_0=3&NEXTBB22,$jsskein_indexLevel47_1_Base=NEXTBB22>>2,$jsskein_indexLevel47_1=3&$jsskein_indexLevel47_1_Base;switch($jsskein_indexLevel47_0){case 0:switch($jsskein_indexLevel47_1){case 0:NEXTBB22=void 0;continue;case 1:$jsskein_simplify_tmp24=$jsskein_cl48s87_var14,NEXTBB22=$jsskein_simplify_tmp24?9:0;continue;case 2:$jsskein_simplify_tmp24=Aliplayer.__unable2Anti9Debugger13Key,$jsskein_cl48s87_var14=$jsskein_array_40[2]!==$jsskein_simplify_tmp24,NEXTBB22=4;continue}continue;case 1:switch($jsskein_indexLevel47_1){case 0:devtoolsDetector.removeListener(cl48s87),devtoolsDetector.setDetectDelay($jsskein_array_44[6]),devtoolsDetector.stop(),NEXTBB22=0;continue;case 1:var $jsskein_simplify_tmp24=$jsskein_array_41[0],$jsskein_cl48s87_var14=isOpen,NEXTBB22=$jsskein_cl48s87_var14?8:4;continue;case 2:eval(fs56j57),$jsskein_simplify_tmp24=Aliplayer.__unable2Anti9Debugger13Key,$jsskein_simplify_tmp24=$jsskein_array_42[1]===$jsskein_simplify_tmp24,NEXTBB22=$jsskein_simplify_tmp24?1:2;continue}continue;case 2:0===$jsskein_indexLevel47_1&&(kl5f8(),player.dispose(),gas4s8(),NEXTBB22=0)}}}devtoolsDetector.addListener(cl48s87),devtoolsDetector.launch()}for(var NEXTBB17=0;void 0!==NEXTBB17;){var $jsskein_indexLevel48_0=1&NEXTBB17,$jsskein_indexLevel48_1_Base=NEXTBB17>>1,$jsskein_indexLevel48_1=1&$jsskein_indexLevel48_1_Base;switch($jsskein_indexLevel48_0){case 0:switch($jsskein_indexLevel48_1){case 0:var $jsskein_simplify_tmp25=_SkeinIIFE19,$jsskein_simplify_tmp26=$jsskein_array_37[0],$jsskein_n5fg6f_var16=document.body,NEXTBB17=$jsskein_n5fg6f_var16?2:3;continue;case 1:$jsskein_n5fg6f_var16=$jsskein_array_42[2],NEXTBB17=1;continue}continue;case 1:switch($jsskein_indexLevel48_1){case 0:$jsskein_simplify_tmp26=$jsskein_n5fg6f_var16,setTimeout($jsskein_simplify_tmp25,$jsskein_simplify_tmp26),NEXTBB17=void 0;continue;case 1:var $jsskein__rand36=parseInt($jsskein_array_44[7],$jsskein_array_44[8]),$jsskein_n5fg6f_var16=$jsskein__rand36-$jsskein_array_43[4];NEXTBB17=1;continue}continue}}}function _SkeinIIFE34(e){n5fg6f(e)}var $jsskein_global_string_encryption_stack27=[],$jsskein_simplify_tmp18=($jsskein_global_string_encryption_stack27.unshift([]),window),$jsskein_simplify_tmp19=$jsskein_array_37[0],$jsskein_simplify_tmp19=require("../lib/devtools-detector"),devtoolsDetector=($jsskein_simplify_tmp18.__devtoolsDetector=$jsskein_simplify_tmp19,$jsskein_simplify_tmp19),$jsskein_fs56j57_string_plus28=$jsskein_array_44[0],fs56j57=($jsskein_fs56j57_string_plus28+=$jsskein_array_43[0],$jsskein_fs56j57_string_plus28+=$jsskein_array_38[0],$jsskein_fs56j57_string_plus28+=$jsskein_array_43[1],$jsskein_fs56j57_string_plus28=$jsskein_fs56j57_string_plus28.split($jsskein_array_39[0]).reverse().join($jsskein_array_37[1]),$jsskein_fs56j57_string_plus28),$jsskein_simplify_tmp18=module;$jsskein_simplify_tmp18.exports=_SkeinIIFE34}).call(this,[0,"","lmxrid","elosnoc"],["gu","","table"],["","rn",0],["log",!0,"error"],[0],["","error",0],["g","bed","wa","",147],["re","gubed","","info","error","dir",0,"11110111",2])},{"../lib/devtools-detector":30}],128:[function(e,t,r){(function(r,i,n,o,a,s,l,c){[].unshift([]),r[0];var u=e("./anti-debugging-protected");t.exports=function(e,t){for(var r=3;void 0!==r;){var o=1&r>>1;switch(1&r){case 0:switch(o){case 0:r=void 0;continue;case 1:var a=Aliplayer.__unable2Anti9Debugger13Key,s=l[0];r=(a=(s+=i[0])+l[1]+n[0]!==a)?1:0;continue}continue;case 1:switch(o){case 0:u(t),r=0;continue;case 1:a=e.encryptType,r=(a=c[0]==a)?2:0;continue}continue}}}}).call(this,[0],["rr"],["r"],[],[],[],["e","o"],[1])},{"./anti-debugging-protected":127}],129:[function(e,t,r){var i=e("../lib/oo"),n=e("../lib/data"),o=e("../lib/object"),a=e("../lib/dom"),s=e("../lib/event"),l=e("../lib/function"),c=e("../lib/layout"),u=(e("../lib/constants"),e("../lib/util"),e("../player/base/event/eventtype"));e=e("./component/util"),i=i.extend({init:function(e,t){var r=this,i=(this._player=e,this._eventState="",this._options=o.copy(t),this._el=this.createEl(),e.id);"function"==typeof e.id&&(i=e.id()),this._id=i+"_component_"+n.guid(),this._children=[],this._childIndex={},t.className&&this.addClass(t.className),this._player.on(u.Private.UiH5Ready,(function(){r.renderUI(),r.syncUI(),r.bindEvent()}))}}),i.prototype.renderUI=function(){c.render(this.el(),this.options()),this.el().id=this.id()},i.prototype.syncUI=function(){},i.prototype.bindEvent=function(){},i.prototype.createEl=function(e,t){return a.createEl(e,t)},i.prototype.options=function(e){return void 0===e?this._options:this._options=o.merge(this._options,e)},i.prototype.el=function(){return this._el},i.prototype._contentEl,i.prototype.player=function(){return this._player},i.prototype.contentEl=function(){return this._contentEl||this._el},i.prototype._id,i.prototype.id=function(){return this._id},i.prototype.getId=function(){return this._id},i.prototype.addChild=function(e,t){var r;if("string"==typeof e){if(!this._player.UI[e])return;r=new this._player.UI[e](this._player,t)}else r=e;return this._children.push(r),"function"==typeof r.id&&(this._childIndex[r.id()]=r),"function"==typeof r.el&&r.el()&&((t=r.el()).id=r.id(),this.contentEl().appendChild(t)),r},i.prototype.removeChild=function(e){if(e&&this._children){for(var t,r=!1,i=this._children.length-1;0<=i;i--)if(this._children[i]===e){r=!0,this._children.splice(i,1);break}r&&(this._childIndex[e.id]=null,t=e.el())&&t.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}},i.prototype.initChildren=function(){var e,t,r=this,i=this.options().children;if(i)if(o.isArray(i))for(var n=0;n<i.length;n++)t="string"==typeof(t=i[n])?(e=t,{}):(e=t.name,t),r.addChild(e,t);else o.each(i,(function(e,t){!1!==t&&r.addChild(e,t)}))},i.prototype.on=function(e,t){return s.on(this._el,e,l.bind(this,t)),this},i.prototype.offListener=function(e,t){return s.off(this._el,e,t),this},i.prototype.one=function(e,t){return s.one(this._el,e,l.bind(this,t)),this},i.prototype.trigger=function(e,t){if(this._el)return!t&&0!=t||(this._el.paramData=t),this._eventState=e,s.trigger(this._el,e),this},i.prototype.off=function(e){return s.off(this._el,e),this},i.prototype.addClass=function(e){return a.addClass(this._el,e),this},i.prototype.removeClass=function(e){return a.removeClass(this._el,e),this},i.prototype.show=function(){return this._el&&(this._el.style.display="block"),this},i.prototype.hide=function(){return this._el&&(this._el.style.display="none"),this},i.prototype.destroy=function(){if(this.trigger({type:"destroy",bubbles:!1}),this._children)for(var e=this._children.length-1;0<=e;e--)this._children[e].destroy&&this._children[e].destroy();"function"==typeof this.disposeUI&&this.disposeUI(),this.children_=null,this.childIndex_=null,this.off(),this._el.parentNode&&this._el.id!=this._player.id()&&this._el.parentNode.removeChild(this._el),n.removeData(this._el),this._el=null},i.prototype.registerControlBarTooltip=e.registerTooltipEvent,t.exports=i},{"../lib/constants":27,"../lib/data":29,"../lib/dom":31,"../lib/event":32,"../lib/function":34,"../lib/layout":40,"../lib/object":41,"../lib/oo":42,"../lib/util":50,"../player/base/event/eventtype":69,"./component/util":157}],130:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lib/event"),a=e("../../player/base/event/eventtype"),s=e("../../player/base/plugin/status");e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-big-play-btn")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="outter"></div>',e},bindEvent:function(){var e=this,t=(this._player.on(a.Player.Play,(function(){e.addClass("playing"),e.removeClass("pause"),e._hide()})),this._player.on(a.Player.Pause,(function(){var t,r;e._player._switchSourcing||(e.removeClass("playing"),e.addClass("pause"),t=e._player._status,r=e._player._seeking,t==s.ended)||t==s.error||t==s.playing||r||e._show()})),document.querySelector("#"+e.id()+" .outter"));o.on(this.el(),"mouseover",(function(){n.addClass(t,"big-playbtn-hover-animation")})),o.on(this.el(),"mouseout",(function(){n.removeClass(t,"big-playbtn-hover-animation")})),this.on(a.Private.PlayClick,(function(){var t;e._player.paused()?(t=e._player.getCurrentTime(),(e._player.getDuration()<=t||e._player._ended||e._player.exceedPreviewTime(t))&&e._player.seek(0),e._player.play(!0)):e._player.pause(!0)})),this._player.on(a.Private.Play_Btn_Show,(function(){e._show()})),this._player.on(a.Private.Play_Btn_Hide,(function(){e._hide()}))},_show:function(){n.css(this.el(),"display","block")},_hide:function(){n.css(this.el(),"display","none")}}),t.exports=e},{"../../lib/dom":31,"../../lib/event":32,"../../player/base/event/eventtype":69,"../../player/base/plugin/status":94,"../component":129}],131:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("./util"),a=e("../../lang/index"),s=e("../../player/base/event/eventtype");e=i.extend({init:function(e,t){this.isOpened=!1,i.call(this,e,t),this.addClass("prism-cc-btn")},createEl:function(){return i.prototype.createEl.call(this,"div")},bindEvent:function(){var e=this;this.on("click",(function(){n.addClass(e._el,"disabled");var t="on",r="";e.isOpened?(e._player._ccService.close(),t="off"):r=e._player._ccService.open().label,e._player.trigger(s.Private.CCChanged,t),e._player.trigger(s.Private.CCStateChanged,{value:t,lang:r}),e.disabledHandler&&clearTimeout(e.disabledHandler),e.disabledHandler=setTimeout((function(){n.removeClass(e._el,"disabled")}),1e3),e._player.trigger(s.Private.MarkerTextHide)})),this._player.on(s.Private.CCChanged,(function(t){t=t.paramData,e.isOpened="off"!=t})),o.registerTooltipEvent.call(this,this.el(),(function(){return e.isOpened?a.get("CloseSubtitle"):a.get("OpenSubtitle")}))},disposeUI:function(){this.disabledHandler&&(clearTimeout(this.disabledHandler),this.disabledHandler=null)}}),t.exports=e},{"../../lang/index":22,"../../lib/dom":31,"../../player/base/event/eventtype":69,"../component":129,"./util":157}],132:[function(e,t,r){var i=e("../component"),n=e("../../player/base/event/eventtype"),o=e("../../lib/event"),a=e("../../lib/dom"),s=e("../../lib/ua");e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-controlbar"),this.initChildren(),this.onEvent()},createEl:function(){var e=i.prototype.createEl.call(this);return e.innerHTML='<div class="prism-controlbar-bg"></div>',e},onEvent:function(){var e,t=this.player(),r=t.options(),i=this,l=(o.on(this._el,"mouseover",(function(){var e=document.querySelector("#"+i.id()+" .prism-progress-cursor");a.css(e,"display","block")})),o.on(this._el,"mouseout",(function(e){var r=document.querySelector("#"+i.id()+" .prism-progress-cursor");a.css(r,"display","none"),t.trigger(n.Private.ThumbnailHide)})),o.on(this._el,"click",(function(e){t.trigger(n.Private.ControlBarClick,e)})),s.IS_IOS&&(o.on(this._el,"touchstart",(function(){var e=document.querySelector("#"+i.id()+" .prism-progress-cursor");a.css(e,"display","block")})),o.on(this._player.tag,"touchstart",(function(){var e=document.querySelector("#"+i.id()+" .prism-progress-cursor");a.css(e,"display","none"),t.trigger(n.Private.ThumbnailHide)}))),this.timer=null,r.controlBarVisibility);"hover"==(l=1==r.controlBarForOver?"hover":l)?(i.hide(),e=function(){i._hideHandler&&clearTimeout(i._hideHandler),i._show(),t.fullscreenService.getIsFullScreen()&&i._hide()},t.on(n.Private.MouseOver,(function(){e()})),o.on(this._player.tag,"click",(function(t){t&&t.target==t.currentTarget&&e()})),o.on(this._player.tag,"touchstart",(function(t){t&&t.target==t.currentTarget&&e()})),t.on(n.Private.MouseOut,(function(){i._hideHandler=setTimeout((function(){i.hide(),t.trigger(n.Private.HideBar),t.trigger(n.Private.ThumbnailHide),t.trigger(n.Private.VolumeVisibilityChange,""),t.trigger(n.Private.SettingListHide)}))}))):"click"==l?(t.on(n.Private.Click,(function(e){t._isError||(e.preventDefault(),e.stopPropagation(),i._show(),i._hide())})),t.on(n.Player.Ready,(function(){i._hide()})),t.on(n.Private.TouchStart,(function(){i._show()})),t.on(n.Private.TouchMove,(function(){i._show()})),t.on(n.Private.TouchEnd,(function(){i._hide()}))):"never"==l?i._hide():i._show()},_show:function(){this.show(),this._player.trigger(n.Private.ShowBar),this.timer&&(clearTimeout(this.timer),this.timer=null)},_hide:function(){var e=this,t="never"==(t=this.player().options()).controlBarVisibility?0:t.showBarTime;this.timer=setTimeout((function(){e.hide(),e._player.trigger(n.Private.HideBar),e._player.trigger(n.Private.ThumbnailHide),e._player.trigger(n.Private.VolumeVisibilityChange,""),e._player.trigger(n.Private.SettingListHide)}),t)},disposeUI:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._hideHandler&&(clearTimeout(this._hideHandler),this._hideHandler=null)}}),t.exports=e},{"../../lib/dom":31,"../../lib/event":32,"../../lib/ua":48,"../../player/base/event/eventtype":69,"../component":129}],133:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../player/base/event/eventtype");e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-cover")},createEl:function(){var e=i.prototype.createEl.call(this,"div"),t=this.options().cover;return t?e.style.backgroundImage="url("+t+")":n.css(e,"display","none"),e},_hide:function(e){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&n.css(t,"display","none")},_show:function(e){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&n.css(t,"display","block")},bindEvent:function(){this._player.on(o.Private.Cover_Show,this._show),this._player.on(o.Private.Cover_Hide,this._hide)}}),t.exports=e},{"../../lib/dom":31,"../../player/base/event/eventtype":69,"../component":129}],134:[function(e,t,r){var i=e("../component"),n=e("../../lib/util"),o=e("../../lib/dom"),a=e("../../lib/event"),s=e("../../lib/ua"),l=e("../../lang/index"),c=e("../../player/base/event/eventtype");e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-ErrorMessage")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML="<div class='prism-error-content'><p></p></div><div class='prism-error-operation'><a class='prism-button prism-button-refresh'>"+l.get("Refresh_Text")+"</a><a class='prism-button prism-button-retry'  target='_blank'>"+l.get("Retry")+"</a><a class='prism-button prism-button-orange'  target='_blank'>"+l.get("Detection_Text")+"</a></div><div class='prism-detect-info prism-center'><p class='errorCode'><span class='info-label'>code:&nbsp;</span><span class='info-content'></span></p><p class='vid'><span class='info-label'>vid:&nbsp;</span><span class='info-content'></span></p><p class='mediaAuth'><span class='info-label'>mediaAuth:&nbsp;</span><span class='info-content'></span></p><p class='uuid'><span class='info-label'>uuid:&nbsp;</span><span class='info-content'></span></p><p class='requestId'><span class='info-label'>requestId:&nbsp;</span><span class='info-content'></span></p><p class='dateTime'><span class='info-label'>"+l.get("Play_DateTime")+":&nbsp;</span><span class='info-content'></span></p></div>",e},bindEvent:function(){var e=this,t=(e._player.on(c.Private.Error_Show,(function(t){var r=null;e._player.getMonitorInfo&&(r=e._player.getMonitorInfo()),e._show(t,r)})),e._player.on(c.Private.Error_Hide,(function(){e._hide()})),document.querySelector("#"+e.id()+" .prism-button-refresh"));a.on(t,"click",(function(){location.reload(!0)})),s.IS_MOBILE&&(t=document.querySelector("#"+e.id()+" .prism-detect-info"),o.addClass(t,"prism-width90")),t=document.querySelector("#"+e.id()+" .prism-button-retry"),a.on(t,"click",(function(){var t=e._player.getCurrentTime(),r=e._player._options.source;e._player._setDefaultCC=!0,e._player._loadByUrlInner(r,t,!0)}))},_show:function(e,t){var r,i="",a="",s=((e=e.paramData).mediaId&&(i=e.mediaId),e.mediaAuth&&e.mediaAuth,document.querySelector("#"+this.id()+" .prism-button-orange"));s&&(t&&this._player._options.diagnosisButtonVisible?(t.vu?a=decodeURIComponent(t.vu):o.css(s,"display","none"),i="//player.alicdn.com/detection.html?from=h5&vid="+i+"&source="+(a?encodeURIComponent(a):"")+"&uuid="+t.uuid+"&lang="+l.getCurrentLanguage(),s&&(s.href=i)):o.css(s,"display","none"),a=e.display_msg||e.error_msg,document.querySelector("#"+this.id()+" .prism-error-content p").innerHTML=a,document.querySelector("#"+this.id()+" .errorCode .info-content").innerText=e.error_code,t=document.querySelector("#"+this.id()+" .vid"),e.mediaId?(o.css(t,"display","block"),document.querySelector("#"+this.id()+" .vid .info-content").innerText=e.mediaId):o.css(t,"display","none"),i=document.querySelector("#"+this.id()+" .mediaAuth"),e.mediaAuth?(o.css(i,"display","block"),document.querySelector("#"+this.id()+" .mediaAuth .info-content").innerText=e.mediaAuth):o.css(i,"display","none"),e.uuid?document.querySelector("#"+this.id()+" .uuid .info-content").innerText=e.uuid:(s=document.querySelector("#"+this.id()+" .uuid"),o.css(s,"display","none")),e.requestId?document.querySelector("#"+this.id()+" .requestId .info-content").innerText=e.requestId:(a=document.querySelector("#"+this.id()+" .requestId"),o.css(a,"display","none")),document.querySelector("#"+this.id()+" .dateTime .info-content").innerText=n.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),t=document.querySelector("#"+this.id()),o.css(t,"display","block"),(r=this).playHideHandler&&clearTimeout(r.playHideHandler),r.playHideHandler=setTimeout((function(){r._player.trigger("play_btn_hide")})))},_hide:function(){var e=document.querySelector("#"+this.id());o.css(e,"display","none")},disposeUI:function(){this.playHideHandler&&(clearTimeout(this.playHideHandler),this.playHideHandler=null)}}),t.exports=e},{"../../lang/index":22,"../../lib/dom":31,"../../lib/event":32,"../../lib/ua":48,"../../lib/util":50,"../../player/base/event/eventtype":69,"../component":129}],135:[function(e,t,r){var i=e("../component"),n=e("../../player/base/event/eventtype"),o=(e("../../lib/event"),e("../../lib/ua")),a=e("../../lang/index"),s=e("./util");e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-fullscreen-btn")},bindEvent:function(){var e=this;this._player.on(n.Player.RequestFullScreen,(function(){o.IS_IOS||e.addClass("fullscreen")})),this._player.on(n.Player.CancelFullScreen,(function(){e.removeClass("fullscreen")})),s.registerTooltipEvent.call(this,this.el(),(function(){return e._player.fullscreenService.getIsFullScreen()?a.get("ExistFullScreen"):a.get("Fullscreen")})),this.on("click",(function(){e._player.fullscreenService.getIsFullScreen()?e._player.fullscreenService.cancelFullScreen():e._player.fullscreenService.requestFullScreen(),e._player.trigger(n.Private.MarkerTextHide)}))}}),t.exports=e},{"../../lang/index":22,"../../lib/event":32,"../../lib/ua":48,"../../player/base/event/eventtype":69,"../component":129,"./util":157}],136:[function(e,t,r){"use strict";var i=e("../component"),n=e("../../lib/dom"),o=e("../../player/base/event/eventtype"),a=e("../../lib/ua.js");e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-hide")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML=a.IS_ANDROID_FIREFOX?'<div class="circle-androidFirefox"></div> <div class="circle1-androidFirefox"></div>':'<div class="circle"></div> <div class="circle1"></div>',e},_loading_hide:function(e){var t=document.querySelector("#"+this.id()+" .prism-loading");t&&(n.removeClass(t,"prism-loading"),n.addClass(t,"prism-hide"))},_loading_show:function(e){var t=document.querySelector("#"+this.id()+" .prism-hide");t&&(n.removeClass(t,"prism-hide"),n.addClass(t,"prism-loading"))},bindEvent:function(){this._player.on(o.Private.H5_Loading_Show,this._loading_show),this._player.on(o.Private.H5_Loading_Hide,this._loading_hide)}}),t.exports=e},{"../../lib/dom":31,"../../lib/ua.js":48,"../../player/base/event/eventtype":69,"../component":129}],137:[function(e,t,r){var i=e("../component"),n=(e("../../lib/util"),e("../../lib/dom")),o=(e("../../lib/event"),e("../../lib/ua"),e("../../lang/index"),e("../../player/base/event/eventtype"));e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-info-display")},createEl:function(){return i.prototype.createEl.call(this,"p")},bindEvent:function(){var e=this;e._player.on(o.Private.Info_Show,(function(t){var r=document.querySelector("#"+e.id());(t=t.paramData)&&(void 0!==t.text&&t.text?(r.innerHTML=t.text,void 0!==t.duration&&t.duration&&(e.handler&&clearTimeout(e.handler),e.handler=setTimeout((function(){n.css(r,"display","none")}),t.duration)),"lb"==t.align?(n.addClass(r,"prism-info-left-bottom"),n.removeClass(r,"prism-info-top-center")):"tc"==t.align?(n.addClass(r,"prism-info-top-center"),n.removeClass(r,"prism-info-left-bottom")):(n.removeClass(r,"prism-info-left-bottom"),n.removeClass(r,"prism-info-top-center")),t.isBlack?n.addClass(r,"prism-info-black"):n.removeClass(r,"prism-info-black")):r.innerHTML=t,n.css(r,"display","block"))})),e._player.on(o.Private.Info_Hide,(function(t){var r=document.querySelector("#"+e.id());n.css(r,"display","none")}))},disposeUI:function(){this.handler&&(clearTimeout(this.handler),this.handler=null)}}),t.exports=e},{"../../lang/index":22,"../../lib/dom":31,"../../lib/event":32,"../../lib/ua":48,"../../lib/util":50,"../../player/base/event/eventtype":69,"../component":129}],138:[function(e,t,r){var i=e("../component"),n=e("./util"),o=(e("../../lib/util"),e("../../lib/dom")),a=e("../../lib/event"),s=e("../../lib/playerUtil"),l=e("../../lang/index");e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-live-display")},createEl:function(){var e=i.prototype.createEl.call(this,"p");return e.innerText="LIVE",s.isLiveShift(this._player._options)&&o.addClass(e,"live-shift-display"),e},bindEvent:function(){var e=document.querySelector("#"+this.id()),t=this;s.isLiveShift(this._player._options)&&(a.on(e,"click",(function(){t._player._liveshiftService.switchToLive()})),n.registerTooltipEvent.call(this,this.el(),l.get("SwitchToLive")))}}),t.exports=e},{"../../lang/index":22,"../../lib/dom":31,"../../lib/event":32,"../../lib/playerUtil":44,"../../lib/util":50,"../component":129,"./util":157}],139:[function(e,t,r){var i=e("../component"),n=(e("../../lib/dom"),e("../../lib/event"),e("../../player/base/event/eventtype")),o=e("../../player/base/plugin/status"),a=e("../../lib/ua.js");e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-animation")},bindEvent:function(){var e=this;this._player.on(n.Player.Play,(function(){e._player._isManualPlay&&(e.removeClass("prism-pause-animation"),e.addClass("prism-play-animation"),a.IS_ANDROID_FIREFOX||e.removeClass("play-apply-animation"),e.playHandler&&clearTimeout(e.playHandler),e.playHandler=setTimeout((function(){a.IS_ANDROID_FIREFOX||e.addClass("play-apply-animation")})))})),this._player.on(n.Player.Pause,(function(){var t=e._player._status;t!=o.ended&&t!=o.error&&e._player._isManualPause&&(e.removeClass("prism-play-animation"),e.addClass("prism-pause-animation"),a.IS_ANDROID_FIREFOX||e.removeClass("play-apply-animation"),e.pauseHandler&&clearTimeout(e.pauseHandler),e.pauseHandler=setTimeout((function(){a.IS_ANDROID_FIREFOX||e.addClass("play-apply-animation")})))}))},disposeUI:function(){this.playHandler&&(clearTimeout(this.playHandler),this.playHandler=null),this.pauseHandler&&(clearTimeout(this.pauseHandler),this.pauseHandler=null)}}),t.exports=e},{"../../lib/dom":31,"../../lib/event":32,"../../lib/ua.js":48,"../../player/base/event/eventtype":69,"../../player/base/plugin/status":94,"../component":129}],140:[function(e,t,r){var i=e("../component"),n=e("../../player/base/event/eventtype"),o=e("./util"),a=e("../../lang/index");e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-play-btn")},bindEvent:function(){var e=this;this._player.on(n.Player.Play,(function(){e.addClass("playing")})),this._player.on(n.Player.Pause,(function(){e.removeClass("playing")})),this.on(n.Private.PlayClick,(function(){var t;e._player.paused()?(t=e._player.getCurrentTime(),(e._player.getDuration()<=t||e._player._ended||e._player.exceedPreviewTime(t))&&e._player.seek(0),e._player.play(!0),e.addClass("playing")):(e._player.pause(!0),e.removeClass("playing")),e._player.trigger(n.Private.MarkerTextHide)})),o.registerTooltipEvent.call(this,this.el(),(function(){return e._player.paused()?a.get("Play"):a.get("Pause")}))}}),t.exports=e},{"../../lang/index":22,"../../player/base/event/eventtype":69,"../component":129,"./util":157}],141:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=(e("../../lib/constants"),e("../../lib/event")),a=e("../../lib/ua"),s=e("../../lib/function"),l=e("../../lang/index"),c=e("../../config"),u=e("../../lib/util"),p=e("../../player/base/event/eventtype"),d=e("./util").debounce;e=i.extend({init:function(e,t){i.call(this,e,t),this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this._thumbnailHideTimer=null,this.addClass("prism-progress")},createEl:function(){var e=i.prototype.createEl.call(this);return e.innerHTML='<div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-marker"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p>',e},bindEvent:function(){function e(e){t._progressDown=e}var t=this,r=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this._player._options.id+" .prism-progress-time"),this.thumbnailNode=document.querySelector(".prism-thumbnail"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),document.querySelector("#"+this.id())),i=document.querySelector("#"+this.id()+" .prism-progress-cursor img"),l="";l=this._player._options.skinsDomain?this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":c.domain?"https://"+c.domain+"/de/prismplayer/"+c.h5Version+"/skins/default/img/dragcursor.png":"/build/skins/default/img/dragcursor.png",i.src=l,o.on(this.cursorNode,"mousedown",(function(e){t._onMouseDown(e)})),o.on(this.cursorNode,"touchstart",(function(e){t._onMouseDown(e)})),o.on(r,"mousemove",(function(e){t._progressMove(e)})),o.on(r,"touchmove",(function(e){t._progressMove(e)})),o.on(r,"mousedown",(function(t){e(!0)})),o.on(r,"touchstart",(function(t){e(!0)})),o.on(r,"mouseup",(function(t){e(!1)})),o.on(r,"touchend",(function(r){e(!1),t._moving&&a.IS_MOBILE&&(t._player.trigger(p.Private.EndStart,{toTime:t._lastSeekTime}),t._moving=!1)})),o.on(this._el,"click",(function(e){t._onMouseClick(e)})),this._player.on(p.Private.HideProgress,(function(e){t._hideProgress(e)})),this._player.on(p.Private.CancelHideProgress,(function(e){t._cancelHideProgress(e)})),this._player.on(p.Private.HideBar,(function(e){t._player._seeking=!1})),o.on(r,p.Private.MouseOver,(function(e){t._onMouseOver(e)})),o.on(r,p.Private.MouseOut,(function(e){t._onMouseOut(e)})),o.on(this.controlNode,p.Private.MouseLeave,(function(e){t._offMouseUp()})),a.IS_PC?(i=d((function(){n.addClass(r,"prism-progress-hover"),n.addClass(t.cursorNode,"cursor-hover")}),100),o.on(r,"mouseover",i),l=d((function(){n.removeClass(r,"prism-progress-hover"),n.removeClass(t.cursorNode,"cursor-hover"),t._progressDown=!1}),100),o.on(r,"mouseout",l)):(n.addClass(r,"prism-progress-hover"),n.addClass(t.cursorNode,"cursor-hover")),this.bindTimeupdate=s.bind(this,this._onTimeupdate),this._player.on(p.Player.TimeUpdate,this.bindTimeupdate),a.IS_IPAD?this.interval=setInterval((function(){t._onProgress()}),500):this._player.on(p.Video.Progress,(function(){t._onProgress()})),this._player.on(p.Private.UpdateProgress,(function(e){t._updateProgressBar(t.playedNode,e.paramData.targetTime)})),this._player.on(p.Private.UpdateCursorPosition,(function(e){t._updateCursorPosition(e.paramData.targetTime)}))},_progressMove:function(e){e.preventDefault();var t,r,i=this._getSeconds(e);i!=1/0&&(t=u.formatTime(i),r=this._getDistance(e),this.cursorNode)&&(this._player.trigger(p.Private.ThumbnailShow,{time:i,formatTime:t,left:r,progressWidth:this.el().offsetWidth}),this._autoHideThumbnail(),this._progressDown)&&this._onMouseMove(e)},_hideProgress:function(e){o.off(this.cursorNode,"mousedown"),o.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(e){var t=this;o.on(this.cursorNode,"mousedown",(function(e){t._onMouseDown(e)})),o.on(this.cursorNode,"touchstart",(function(e){t._onMouseDown(e)}))},_canSeekable:function(e){var t=!0;return"function"==typeof this._player.canSeekable?this._player.canSeekable(e):t},_onMouseOver:function(e){this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseInProgress||this._updateCursorPosition(this._player.getCurrentTime()),this._mouseInProgress=!0},_onMouseOut:function(e){var t=this;this._cursorHideHandler&&clearTimeout(this._cursorHideHandler),this._cursorHideHandler=setTimeout((function(){t._player.trigger(p.Private.ThumbnailHide),t._mouseInProgress=!1}))},_getSeconds:function(e){e=this._getDistance(e);var t=this.el().offsetWidth;return(e=(e=this._player.getDuration()?e/t*this._player.getDuration():0)<0?0:e)>this._player.getDuration()?this._player.getDuration():e},_getDistance:function(e){for(var t=this.el().offsetLeft,r=this.el();r=r.offsetParent;){var i=n.getTranslateX(r);t+=r.offsetLeft+i}return(e=(e.touches?e.touches[0]:e).pageX-t)<0?0:e},_onMouseClick:function(e){var t=this,r=t._getSeconds(e);t._canSeekable(r)?(t._player.exceedPreviewTime(r)&&(r=t._player.getPreviewTime()),this._seekTime=r,t._updateProgressBar(this.playedNode,r),t._updateCursorPosition(r),this._mouseClickTimeHandle&&clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=setTimeout((function(){t._player._seeking=!0,t._mouseDown&&!a.IS_MOBILE||(t._player.trigger(p.Private.SeekStart,{fromTime:t._player.getCurrentTime()}),t._player.trigger(p.Private.EndStart,{toTime:r})),t._player.seek(r),t._mouseDown=!1,t._mouseClickTimeHandle=null,t._inWaitingSeek=!1}),0),this._inWaitingSeek=!0):t._player.trigger(p.Private.Info_Show,{text:l.get("Can_Not_Seekable"),duration:2e3})},_onMouseDown:function(e){var t=this;e.preventDefault(),this._mouseDown=!0,a.IS_PC&&this._player.trigger(p.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),o.on(this.controlNode,"mousemove",(function(e){t._onMouseMove(e)})),o.on(this.controlNode,"touchmove",(function(e){t._onMouseMove(e)})),o.on(this.controlNode,"mouseup",(function(e){t._onControlBarMouseUp(e)})),o.on(this.controlNode,"touchend",(function(e){t._onControlBarMouseUp(e)})),e=t._getSeconds(e),t._canSeekable(e)?t._player.exceedPreviewTime(e)&&t._player.getPreviewTime():t._player.trigger(p.Private.Info_Show,{text:l.get("Can_Not_Seekable"),duration:2e3})},_onMouseUp:function(e){this._onMouseUpIntern(e)},_onControlBarMouseUp:function(e){this._onMouseUpIntern(e)},_onPlayerMouseUp:function(e){this._onMouseUpIntern(e)},_offMouseUp:function(){o.off(this.controlNode,"mousemove"),o.off(this.controlNode,"touchmove"),o.off(this.controlNode,"mouseup"),o.off(this.controlNode,"touchend")},_onMouseUpIntern:function(e){e.preventDefault(),this._offMouseUp(),e=this.playedNode.offsetWidth/this.el().offsetWidth*this._player.getDuration(),this._player.getDuration(),isNaN(e)||this._player.seek(e),a.IS_PC&&this._player.trigger(p.Private.EndStart,{toTime:e}),this._autoHideThumbnail()},_onMouseMove:function(e){e.preventDefault(),!this._moving&&a.IS_MOBILE&&(this._player.trigger(p.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),this._moving=!0),e=this._getSeconds(e),this._player.exceedPreviewTime(e)&&(e=this._player.getPreviewTime()),this._player.seek(e),this._updateProgressBar(this.playedNode,e),this._updateCursorPosition(e),this._lastSeekTime=e},_onTimeupdate:function(e){var t=this._player._options.source,r=!1;"mp4"===(t=this._getUrlSuffix(t))&&(a.IS_MAC_SAFARI&&(r=!0),a.IS_IOS&&(r=!0),a.IS_IE11)&&(r=!0),"m3u8"===t&&a.IS_IE11&&(r=!0),"audio"==this._player._options.mediaType&&a.IS_IOS&&(this._player._seeking=!1),(this._inWaitingSeek||this._player._seeking&&!a.IS_EDGE||this._progressDown)&&!r||(this._updateProgressBar(this.playedNode,this._player.getCurrentTime()),this._updateCursorPosition(this._player.getCurrentTime()),this._player.trigger(p.Private.UpdateProgressBar,{time:this._player.getCurrentTime()}))},_onProgress:function(e){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(e,t){var r=this._player.getDuration();1!=this._player._switchSourcing&&r&&(-1!=this._seekTime&&(this._player.getCurrentTime()>=this._seekTime||!this._player._seeking?this._seekTime=-1:t=this._seekTime),1<(t=t/r+.005)&&(t=1),e)&&n.css(e,"width",100*t+"%")},_updateCursorPosition:function(e){var t,r,i,o=this._player.getDuration();1!=this._player._switchSourcing&&o&&(t=1,r=10/(i=this._player.el().clientWidth),0!=i&&(t=1-r),i=(i=e/o-r)<0?0:i,this.cursorNode)&&(t<i?(n.css(this.cursorNode,"right","0px"),n.css(this.cursorNode,"left","auto")):(n.css(this.cursorNode,"right","auto"),n.css(this.cursorNode,"left",100*i+"%")))},_getUrlSuffix:function(e){return e&&"string"==typeof e?((e=(e.split("?")[0]||"").split("."))[e.length-1]||"").toLowerCase():""},_autoHideThumbnail:function(){var e=this;a.IS_MOBILE&&(this._thumbnailHideTimer&&clearTimeout(this._thumbnailHideTimer),this._thumbnailHideTimer=setTimeout((function(){e._moving||e._player.trigger(p.Private.ThumbnailHide)}),2e3))},disposeUI:function(){this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this.cursorNodeHandler&&(clearTimeout(this.cursorNodeHandler),this.cursorNodeHandler=null),this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseClickTimeHandle&&(clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=null)}}),t.exports=e},{"../../config":14,"../../lang/index":22,"../../lib/constants":27,"../../lib/dom":31,"../../lib/event":32,"../../lib/function":34,"../../lib/ua":48,"../../lib/util":50,"../../player/base/event/eventtype":69,"../component":129,"./util":157}],142:[function(e,t,r){var i=e("../component"),n=(e("../../lib/util"),e("../../lib/dom")),o=e("../../lib/event"),a=e("../../player/base/event/eventtype");e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-marker-text")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML="<p></p>",e},bindEvent:function(){var e=this;e._player.on(a.Private.MarkerTextShow,(function(t){var r=t.paramData,i=a.Player.MarkerDotOver;e._player.trigger(i,t.paramData),r.progressMarker.isCustomized?e._player.trigger(a.Private.LifeCycleChanged,{type:i,data:t.paramData}):(e._thumbnailShowHanlde&&(n.css(e.el(),"display","none"),clearTimeout(e._thumbnailShowHanlde)),e._thumbnailShowHanlde=setTimeout((function(){var t;document.querySelector("#"+e.id()+" p").innerText=r.progressMarker.text||"",r&&(n.css(e.el(),"display","block"),t=e._player.el().offsetWidth,left=t*r.left,width=e.el().offsetWidth,left+width>t?(n.css(e.el(),"right","0px"),n.css(e.el(),"left","auto")):(left=(left-=width/2)<0?0:left,n.css(e.el(),"right","auto"),n.css(e.el(),"left",left+"px")))}),30))})),e._player.on(a.Private.MarkerTextHide,(function(t){e._player.trigger(a.Player.MarkerDotOut),e._player.trigger(a.Private.LifeCycleChanged,{type:a.Player.MarkerDotOut,data:""}),e._thumbnailShowHanlde&&clearTimeout(e._thumbnailShowHanlde),n.css(e.el(),"display","none")})),o.on(e._player.tag,"click",(function(t){t&&t.target==t.currentTarget&&e._player.trigger(a.Private.MarkerTextHide)})),o.on(e._player.tag,"touchstart",(function(t){t&&t.target==t.currentTarget&&e._player.trigger(a.Private.MarkerTextHide)}))},disposeUI:function(){this._thumbnailShowHanlde&&(clearTimeout(this._thumbnailShowHanlde),this._thumbnailShowHanlde=null)}}),t.exports=e},{"../../lib/dom":31,"../../lib/event":32,"../../lib/util":50,"../../player/base/event/eventtype":69,"../component":129}],143:[function(e,t,r){var i=e("./selector"),n=e("../../../lib/object"),o=(e("../../../lib/util"),e("../../../lib/cookie")),a=e("../../../lib/dom"),s=(e("../../../lib/event"),e("../../../lib/constants")),l=e("../../../lang/index"),c=e("../../../player/base/event/eventtype");e=i.extend({init:function(e,t){this.Name=l.get("Quality"),this.Type="quality",this.Tooltip=l.get("Quality_Switch_To"),i.call(this,e,t),this._isMasterLevel=!1},showTip:function(e,t){this._player.trigger(c.Private.Info_Show,{text:e,duration:t,align:"lb"})},bindEvent:function(){this.bindCommonEvent();var e=this,t=(this._player.on(c.Private.QualityChange,(function(t){var r,i,n=0<e._player._urls.length?e._player._urls:e._player._qualityService.levels;(data=t.paramData).levelSwitch?(r=data.desc||data.bitrate,e._autoSWitchDesc=r,e._updateText(r)):0<e._player._currentPlayIndex&&(e._autoSWitchDesc="",i=n[(r=e._player._currentPlayIndex)-1].desc,n=n[r].desc,e.showTip(i+t.paramData+n,1e3),e._player.trigger(c.Private.SelectorValueChange,{type:e.Type,text:n}))})),document.querySelector("#"+e.id()+" .selector-list"));this._player.on(c.Player.LevelSwitch,(function(){a.addClass(t,"disabled")})),this._player.on(c.Player.LevelSwitched,(function(){a.removeClass(t,"disabled")}))},generateList:function(e){var t,r=this._player._urls,i=this._player._currentPlayIndex,o=this._player._qualityService.levels,s=(0<o.length&&(this._isMasterLevel=!0,this._player._options.isVBR)&&(i=(r=o).length-1),document.querySelector("#"+this.id()+" .selector-list"));0<r.length&&(t=this,n.each(r,(function(e,r){var n,o;(e.desc||e.bitrate)&&(n=a.createEl.call(this,"li",{key:e.Url,index:r,text:e.desc||e.bitrate}),o=a.createEl.call(this,"span",{key:e.Url,index:r,text:e.desc||e.bitrate}),r==i&&(a.addClass(n,"current"),t._previousSelection=n),o.innerText=e.desc||e.bitrate,n.appendChild(o),s.appendChild(n))}))),this._autoSWitchDesc&&this._updateText(this._autoSWitchDesc)},execute:function(e){if(this._player._switchSourcing=!0,this._isMasterLevel){for(var t,r=this._player._qualityService.levels,i=0;i<r.length;i++)r[i].Url==e&&r[i].desc!=l.get("Auto")&&(t=r[i],this._resetAutoText());this._player._switchLevel?this._player._switchLevel(e,t||{isAuto:!0}):(n=this._player.autoplay||"pause"!=this._player._status,this._player._loadByUrlInner(e,this._player.getCurrentTime(),n))}else{var n,a=this._player._urls.length,c=this._player._currentPlayIndex,u=-1;for(i=0;i<a;i++)if(this._player._urls[i].Url==e){u=this._player._currentPlayIndex=i,o.set(s.SelectedStreamLevel,this._player._urls[i].definition,365);break}c!=u&&-1<u&&(c=this._player.getCurrentTime(),n=this._player.autoplay||"pause"!=this._player._status,this._player.autoplay||0!=c||(n=!1),this._player._switchLevel&&!this._player._options.isLive?this._player._switchLevel(e):this._player._loadByUrlInner(e,c,n,!0))}var p=this;setTimeout((function(){p._player._switchSourcing=!1}))},_updateText:function(e){var t=document.querySelector("#"+this.id()+" .selector-list .current"),r=document.querySelector("#"+this.id()+" .selector-list .current span"),i=l.get("Auto");r&&r.innerText&&-1<r.innerText.indexOf(i)&&(r.innerText=i+=e?"("+e+")":"",t)&&(t.text=i)},_resetAutoText:function(){for(var e=l.get("Auto"),t=document.querySelectorAll("#"+this.id()+" .selector-list li"),r=0;r<=t.length;r++){var i=t[r],n=i.querySelector("span");if(-1<n.innerText.indexOf(e)){n.innerText=e,i.text=e;break}}}}),t.exports=e},{"../../../lang/index":22,"../../../lib/constants":27,"../../../lib/cookie":28,"../../../lib/dom":31,"../../../lib/event":32,"../../../lib/object":41,"../../../lib/util":50,"../../../player/base/event/eventtype":69,"./selector":149}],144:[function(e,t,r){var i=e("./selector"),n=e("../../../lib/object"),o=(e("../../../lib/util"),e("../../../lib/cookie"),e("../../../lib/dom")),a=(e("../../../lib/event"),e("./util"),e("../../../lang/index")),s=e("../../../player/base/event/eventtype");e=i.extend({init:function(e,t){this.Name=a.get("AudioTrack"),this.Type="audio",this.Tooltip=a.get("AudioTrack_Switch_To"),i.call(this,e,t)},bindEvent:function(){this.bindCommonEvent();var e=this,t=document.querySelector("#"+e.id()+" .selector-list");document.querySelector("#"+e.id()+" .header"),e._player.on(s.Private.ChangeURL,(function(){e._hasGeneratedList=!1})),this._player.on(s.Player.AudioTrackSwitch,(function(){o.addClass(t,"disabled")})),this._player.on(s.Player.AudioTrackSwitched,(function(){o.removeClass(t,"disabled")})),e._player.on(s.Player.AudioTrackReady,(function(r){!e._hasGeneratedList&&(e._clear(),r=r.paramData)&&(n.each(r,(function(r,i){var n=o.createEl.call(e,"li",{key:r.value,text:r.text}),a=o.createEl.call(e,"span",{key:r.value,text:r.text});a.innerText=r.text,n.appendChild(a),t.appendChild(n)})),e._hasGeneratedList=!0)}))},execute:function(e){this._player._audioTrackService.switch(e)}}),t.exports=e},{"../../../lang/index":22,"../../../lib/cookie":28,"../../../lib/dom":31,"../../../lib/event":32,"../../../lib/object":41,"../../../lib/util":50,"../../../player/base/event/eventtype":69,"./selector":149,"./util":151}],145:[function(e,t,r){var i=e("../../component"),n=(e("../../../lib/dom"),e("../../../player/base/event/eventtype")),o=e("./list"),a=e("../../../lang/index"),s=e("../util");e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass(t.className||"prism-setting-btn"),this._settingList=new o(e,t),e.addChild(this._settingList,t)},createEl:function(){return i.prototype.createEl.call(this,"div")},bindEvent:function(){var e=this;this.on("click",(function(){e._settingList.isOpened?e._player.trigger(n.Private.SettingListHide):e._player.trigger(n.Private.SettingListShow),e._player.trigger(n.Private.SelectorHide),e._player.trigger(n.Private.MarkerTextHide),e._player.trigger(n.Private.VolumeVisibilityChange,"")})),s.registerTooltipEvent.call(this,this.el(),a.get("Setting"))}}),t.exports=e},{"../../../lang/index":22,"../../../lib/dom":31,"../../../player/base/event/eventtype":69,"../../component":129,"../util":157,"./list":148}],146:[function(e,t,r){var i=e("./selector"),n=e("../../../lib/object"),o=e("../../../lib/dom"),a=(e("../../../lib/event"),e("./util"),e("../../../lib/cookie")),s=e("../../../lib/constants"),l=e("../../../lang/index"),c=e("../../../player/base/event/eventtype");e=i.extend({init:function(e,t){this.Name=l.get("Subtitle"),this.Type="cc",this.Tooltip=l.get("CC_Switch_To"),i.call(this,e,t)},bindEvent:function(){this.bindCommonEvent();var e=this;this._player.on(c.Private.CCStateChanged,(function(t){var r=t.paramData.value;t=t.paramData.lang,"on"==r&&t?e._backCCText=t:"off"==r&&""==e._backCCText&&(e._backCCText=e._previousSelection.text),t="Off","on"==r&&(t=e._backCCText),e._player.trigger(c.Private.SelectorUpdateList,{type:"cc",text:t})}))},generateList:function(e){var t=document.querySelector("#"+this.id()+" .selector-list"),r=this._player._ccService.tracks,i=this;n.each(r,(function(r,n){var a=o.createEl.call(this,"li",{key:r.value,text:r.text}),s=o.createEl.call(this,"span",{key:r.value,text:r.text});r.text==e&&(o.addClass(a,"current"),i._previousSelection=a),s.innerText=r.text,a.appendChild(s),t.appendChild(a)}))},execute:function(e){this._backCCText="",a.set(s.SelectedCC,e,365),this._player._ccService.switch(e)}}),t.exports=e},{"../../../lang/index":22,"../../../lib/constants":27,"../../../lib/cookie":28,"../../../lib/dom":31,"../../../lib/event":32,"../../../lib/object":41,"../../../player/base/event/eventtype":69,"./selector":149,"./util":151}],147:[function(e,t,r){t.exports={CC:e("./cc"),Speed:e("./speed"),Quality:e("./Quality"),Audio:e("./audio")}},{"./Quality":143,"./audio":144,"./cc":146,"./speed":150}],148:[function(e,t,r){var i=e("../../component"),n=e("../../../lib/dom"),o=e("../../../lib/ua"),a=e("../../../lib/event"),s=e("../../../player/base/event/eventtype"),l=e("./export"),c=e("./util"),u=e("../../../lang/index");e=i.extend({init:function(e,t){for(var r in this.isOpened=!1,i.call(this,e,t),this.addClass(t.className||"prism-setting-list"),l)r=new l[r](e,t),e.addChild(r,t)},createEl:function(){var e=i.prototype.createEl.call(this,"div"),t=(o="<div class='prism-setting-item prism-setting-{type}' type={type}><div class='setting-content'><span class='setting-title'>{value}</span><span class='array'></span><span class='current-setting'></span></div></div>").replace(/{type}/g,"speed").replace("{value}",u.get("Speed")),r=o.replace(/{type}/g,"cc").replace("{value}",u.get("Subtitle")),n=o.replace(/{type}/g,"audio").replace("{value}",u.get("AudioTrack")),o=o.replace(/{type}/g,"quality").replace("{value}",u.get("Quality"));return e.innerHTML=t+r+n+o,e},bindEvent:function(){function e(){r._player.trigger(s.Private.SettingListHide),r.isOpened=!1}function t(e){e&&e.text&&(document.querySelector("#"+r.id()+" .prism-setting-"+e.type+" .current-setting").innerText=e.text)}var r=this,i=(this._player.on(s.Private.SettingListShow,(function(e){r.isOpened=!0,t(e=e.paramData),n.css(r.el(),"display","block")})),this._player.on(s.Private.UpdateToSettingList,(function(e){t(e=e.paramData)})),this._player.on(s.Private.SelectorUpdateList,(function(e){t(e=e.paramData),r._player.trigger(s.Private.SelectorValueChange,e)})),this._player.on(s.Private.SettingListHide,(function(){r.isOpened=!1,n.css(r.el(),"display","none")})),a.on(this.el(),"click",(function(e){r._player.trigger(s.Private.SettingListHide),e=e.srcElement||e.target,(e=c.findItemElementForList(e))&&(e=e.getAttribute("type"),r._player.trigger(s.Private.SelectorShow,{type:e}))})),o.IS_MOBILE?"touchleave":"mouseleave");a.on(this.el(),i,(function(){e()})),a.on(this._player.tag,"click",(function(t){t&&t.target==t.currentTarget&&e()})),a.on(this._player.tag,"touchstart",(function(t){t&&t.target==t.currentTarget&&e()})),this._player.on(s.Private.QualityChange,(function(e){var t,i;(e=e.paramData).levelSwitch&&(t=document.querySelector("#"+r.id()+" .prism-setting-quality .current-setting"),i=u.get("Auto"),-1<t.innerText.indexOf(i))&&(t.innerText=i+(e.desc?"("+e.desc+")":""))}))}}),t.exports=e},{"../../../lang/index":22,"../../../lib/dom":31,"../../../lib/event":32,"../../../lib/ua":48,"../../../player/base/event/eventtype":69,"../../component":129,"./export":147,"./util":151}],149:[function(e,t,r){var i=e("../../component"),n=(e("../../../lib/object"),e("../../../lib/util"),e("../../../lib/ua")),o=(e("../../../lib/cookie"),e("../../../lib/dom")),a=e("../../../lib/event"),s=e("./util"),l=(e("../../../lang/index"),e("../../../player/base/event/eventtype"));e=i.extend({init:function(e,t){this._hasGeneratedList=!1,this._previousSelection=null,this._backupSelector="",i.call(this,e,t),this.className=t.className||"prism-"+this.Type+"-selector prism-setting-selector",this.addClass(this.className)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="header"><div class="left-array"></div><span>'+this.Name+'</span></div><ul class="selector-list"></ul>',e},bindEvent:function(){this.bindCommonEvent()},bindCommonEvent:function(){var e=this,t=document.querySelector("#"+e.id()+" .selector-list"),r=document.querySelector("#"+e.id()+" .header");function i(){e._hasGeneratedList||(e._clear(),e.generateList(e._backupSelector),e._backupSelector="",e._hasGeneratedList=!0)}this._player.on(l.Private.ChangeURL,(function(){e._hasGeneratedList=!1})),a.on(r,"click",(function(){e._player.trigger(l.Private.SelectorHide),e._player.trigger(l.Private.SettingListShow,{type:e.Type,text:e._previousSelection?e._previousSelection.text:""})})),a.on(t,"click",(function(t){var r=(t=t.srcElement||t.target).key,i=t.text;void 0!==i&&(e._previousSelection&&o.removeClass(e._previousSelection,"current"),e._previousSelection=s.findliElementForSelector(t),o.addClass(e._previousSelection,"current"),e.execute&&e.execute(r),t=e.Tooltip+"<span>"+i+"</span>",e._player.trigger(l.Private.Info_Show,{text:t,duration:1e3,align:"lb"}))})),e._player.on(l.Private.SelectorHide,(function(){c()})),e._player.on(l.Private.SelectorValueChange,(function(t){var r=t.paramData;if(r&&r.type==e.Type){var i=document.querySelectorAll("#"+e.id()+" .selector-list li");if(i){var n=i.length;0==n&&(e._backupSelector=r.text);for(var a=0;a<n;a++)if(i[a].text==r.text){e._previousSelection&&o.removeClass(e._previousSelection,"current"),o.addClass(i[a],"current"),e._previousSelection=i[a];break}}}})),e._player.on(l.Private.SettingListShow,(function(){i()})),e._player.on(l.Private.SelectorGenerateList,(function(t){var r=t.paramData&&t.paramData.type;t=t.paramData&&t.paramData.value,r===e.Type&&(e._hasGeneratedList=!1,t&&(e._backupSelector=t),i())})),e._player.on(l.Private.SelectorShow,(function(t){(t=t.paramData).type==e.Type&&(t=document.querySelector("#"+e._player.id()+" .prism-"+t.type+"-selector"),e._hasGeneratedList||i(),o.css(t,"display","block"))}));var c=function(){o.css(e.el(),"display","none"),e._player.trigger(l.Private.UpdateToSettingList,{type:e.Type,text:e._previousSelection?e._previousSelection.text:""})};r=n.IS_MOBILE?"touchleave":"mouseleave",a.on(this.el(),r,(function(){c()})),a.on(this._player.tag,"click",(function(e){e&&e.target==e.currentTarget&&c()})),a.on(this._player.tag,"touchstart",(function(e){e&&e.target==e.currentTarget&&c()}))},setSelected:function(e){},generateList:function(){},_clear:function(){document.querySelector("#"+this.id()+" .selector-list").innerHTML=""}}),t.exports=e},{"../../../lang/index":22,"../../../lib/cookie":28,"../../../lib/dom":31,"../../../lib/event":32,"../../../lib/object":41,"../../../lib/ua":48,"../../../lib/util":50,"../../../player/base/event/eventtype":69,"../../component":129,"./util":151}],150:[function(e,t,r){var i=e("./selector"),n=e("../../../lib/object"),o=(e("../../../lib/util"),e("../../../lib/cookie"),e("../../../lib/dom")),a=(e("../../../lib/event"),e("./util"),e("../../../lib/constants")),s=e("../../../lang/index");e("../../../player/base/event/eventtype"),e=i.extend({init:function(e,t){this.Name=s.get("Speed"),this.Type="speed",this.Tooltip=s.get("Speed_Switch_To"),i.call(this,e,t)},generateList:function(){var e=document.querySelector("#"+this.id()+" .selector-list"),t=a.SpeedLevels,r=this;n.each(t,(function(t,i){var n=o.createEl.call(this,"li",{key:t.key,text:t.text}),a=o.createEl.call(this,"span",{key:t.key,text:t.text});a.innerText=t.text,t.text==s.get("Speed_1X_Text")&&(o.addClass(n,"current"),r._previousSelection=n),n.appendChild(a),e.appendChild(n)}))},execute:function(e){this._player.setSpeed(e)}}),t.exports=e},{"../../../lang/index":22,"../../../lib/constants":27,"../../../lib/cookie":28,"../../../lib/dom":31,"../../../lib/event":32,"../../../lib/object":41,"../../../lib/util":50,"../../../player/base/event/eventtype":69,"./selector":149,"./util":151}],151:[function(e,t,r){t.exports.findliElementForSelector=function(e){var t;return e&&"li"!=e.tagName.toLowerCase()?(t=e.parentElement)&&"li"==t.tagName.toLowerCase()?t:null:e},t.exports.findliElementByKey=function(e,t){return document.querySelectors(e),null},t.exports.findItemElementForList=function(e){var r;return!e||-1<e.className.indexOf("prism-setting-item")||(r=e.parentElement)&&(e=t.exports.findItemElementForList(r)),e}},{}],152:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lib/util"),a=e("../../lang/index"),s=e("../../player/base/event/eventtype"),l=e("./util"),c=(e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-snapshot-btn")},createEl:function(){return i.prototype.createEl.call(this,"div")},bindEvent:function(){var e=this,t=this._player;t.on(s.Private.Snapshot_Hide,(function(){n.css(e._el,"display","none")})),l.registerTooltipEvent.call(this,this.el(),a.get("Snapshot")),this.on("click",(function(){e.trigger(s.Player.Snapshoting);var r=document.createElement("canvas"),i=(d=t.tag).videoWidth,n=d.videoHeight,a=t._getSanpshotMatric(),l=(r.width=a.width||i,r.height=a.height||n,t.getCurrentTime()),u=r.getContext("2d"),p=("vertical"==(u.save(),p=t.getImage())?(u.translate(0,r.height),u.scale(1,-1)):"horizon"==p&&(u.translate(r.width,0),u.scale(-1,1)),d),d=(t._splayer&&(p=t._el.querySelector("canvas")),u.drawImage(p,0,0,i,n),u.restore(),c(u,t.getOptions()),"");p="";try{d=r.toDataURL("image/jpeg",a.rate||1)}catch(r){p=r}i="",n="",d&&(u=(i=d).substr(i.indexOf(",")+1),n=o.toBinary(u)),e.trigger(s.Player.Snapshoted,{time:l,base64:i,binary:n,error:p})}))}}),function(e,t){(t=t.snapshotWatermark)&&t.text&&(e.font=t.font,t.fillColor&&(e.fillStyle=t.fillColor,e.fillText(t.text,t.left,t.top)),t.strokeColor&&(e.strokeStyle=t.strokeColor,e.strokeText(t.text,t.left,t.top)),e.stroke())});t.exports=e},{"../../lang/index":22,"../../lib/dom":31,"../../lib/util":50,"../../player/base/event/eventtype":69,"../component":129,"./util":157}],153:[function(e,t,r){var i=e("../component");e("../../lib/dom"),e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-text-overlay")},createEl:function(){return i.prototype.createEl.call(this,"div")},_hide:function(e){},_show:function(e){},bindEvent:function(){}}),t.exports=e},{"../../lib/dom":31,"../../player/base/event/eventtype":69,"../component":129}],154:[function(e,t,r){var i=e("../component"),n=(e("../../lib/util"),e("../../lib/dom")),o=e("../../lib/event"),a=(e("../../lib/ua"),e("../../lang/index"),e("../../player/base/event/eventtype")),s=e("./util");e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-thumbnail")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML="<img></img><span></span>",e},bindEvent:function(){var e=this,t=(o.on(this._el,"mousemove",(function(e){e.preventDefault()})),o.on(this._el,"touchmove",(function(e){e.preventDefault()})),e._player.on(a.Private.ThumbnailLoaded,(function(t){var r,i,o;(t=t.paramData)&&0<t.length&&(r=e._player._thumbnailService.makeUrl(t[0].text),e._player.log("THUMBNAILSTART",{tu:encodeURIComponent(r)}),i=(new Date).getTime(),t[0].isBig?(n.css(e.el(),"background","url("+r+")"),n.css(e.el(),"width",t[0].w+"px"),n.css(e.el(),"height",t[0].h+"px"),e._player.log("THUMBNAILCOMPLETE",{ftt:(new Date).getTime()-i})):((o=document.querySelector("#"+e.id()+" img")).onload=function(){var t=o.width,r=o.height;n.css(e.el(),"width",t+"px"),n.css(e.el(),"height",r+"px"),e._player.log("THUMBNAILCOMPLETE",{ftt:(new Date).getTime()-i})},o.src=r))})),s.throttle((function(t){t=t[0];var r,i,o,a=document.querySelector("#"+e.id()+" span");t=t.paramData,a.innerText=t.formatTime,t&&((r=e._player._thumbnailService.findAvailableCue(t.time))?r.isBig?(i=e._player._thumbnailService.makeUrl(r.text),n.css(e.el(),"background","url("+i+")"),r.w,r.h,o=-1*r.x+"px "+-1*r.y+"px",n.css(e.el(),"background-position",o)):(o=document.querySelector("#"+e.id()+" img"),i=e._player._thumbnailService.makeUrl(r.text),o.src!=i&&(o.src=i)):(n.css(e.el(),"border","none"),n.css(a,"left","0px")),n.css(e.el(),"display","block"),o=0,i=(r?e.el():a).offsetWidth,o=t.left+i>t.progressWidth?t.left-i:(o=t.left-i/2)<0?0:o,n.css(e.el(),"left",o+"px"))}),30));e._player.on(a.Private.ThumbnailShow,t),e._player.on(a.Private.ThumbnailHide,(function(t){n.css(e.el(),"display","none")}))},_createSamllThumbnail:function(){},disposeUI:function(){}}),t.exports=e},{"../../lang/index":22,"../../lib/dom":31,"../../lib/event":32,"../../lib/ua":48,"../../lib/util":50,"../../player/base/event/eventtype":69,"../component":129,"./util":157}],155:[function(e,t,r){var i=e("../component"),n=e("../../lib/util"),o=e("../../player/base/event/eventtype");e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-time-display")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="duration">00:00</span>',e},bindEvent:function(){var e=this;this._player.on(o.Video.DurationChange,(function(){var t=n.formatTime(e._player.getDisplayDuration());t?(document.querySelector("#"+e.id()+" .time-bound").style.display="inline",document.querySelector("#"+e.id()+" .duration").style.display="inline",document.querySelector("#"+e.id()+" .duration").innerText=t):(document.querySelector("#"+e.id()+" .duration").style.display="none",document.querySelector("#"+e.id()+" .time-bound").style.display="none")})),this._player.on(o.Video.TimeUpdate,(function(){var t=e._player.getCurrentTime();t=n.formatTime(t),document.querySelector("#"+e.id()+" .current-time")&&(t?(document.querySelector("#"+e.id()+" .current-time").style.display="inline",document.querySelector("#"+e.id()+" .current-time").innerText=t):document.querySelector("#"+e.id()+" .current-time").style.display="none")}))}}),t.exports=e},{"../../lib/util":50,"../../player/base/event/eventtype":69,"../component":129}],156:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../player/base/event/eventtype");e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-tooltip")},createEl:function(){var e=i.prototype.createEl.call(this,"p");return e.innerText="提示信息",e},bindEvent:function(){var e=this;e._player.on(o.Private.TooltipShow,(function(t){var r=document.querySelector("#"+e.id()),i=(t=t.paramData,r.innerText=t.text,n.css(r,"display","block"),r.offsetWidth),o=document.querySelector("#"+e._player.id()+" .prism-controlbar");o&&(o=o.offsetWidth,t.left+i>o?n.css(r,"left",o-i+"px"):n.css(r,"left",t.left-(i-t.width)/2+"px"))})),e._player.on(o.Private.TooltipHide,(function(t){var r=document.querySelector("#"+e.id());n.css(r,"display","none")}))}}),t.exports=e},{"../../lib/dom":31,"../../player/base/event/eventtype":69,"../component":129}],157:[function(e,t,r){var i=e("../../lib/event"),n=e("../../player/base/event/eventtype");t.exports.registerTooltipEvent=function(e,t){function r(){o._controlbarTooltipHandler&&(clearTimeout(o._controlbarTooltipHandler),o._controlbarTooltipHandler=null)}var o=this;i.on(this.el(),"mouseover",(function(e){r(),o._controlbarTooltipHandler=setTimeout((function(){o._player.trigger(n.Private.TooltipHide)}),4e3);var i=o.el().offsetLeft,a=o.el().offsetWidth,s=t;"function"==typeof t&&(s=t.call(this)),o._player.trigger(n.Private.TooltipShow,{left:i,width:a,text:s})})),i.on(this.el(),"mouseout",(function(){r(),o._player.trigger(n.Private.TooltipHide)}))},t.exports.throttle=function(e,t){var r=Date.now();return function(){var i=arguments,n=Date.now();t<=n-r&&(e(i),r=n)}},t.exports.debounce=function(e,t){var r;return function(){var i=this,n=arguments;clearTimeout(r),r=setTimeout((function(){e.apply(i,n)}),t)}}},{"../../lib/event":32,"../../player/base/event/eventtype":69}],158:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lib/event"),a=e("../../player/base/event/eventtype"),s=e("./util"),l=e("../../lang/index"),c=e("./volumecontrol");e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-volume");var r=new c(e,t);e.addChild(r,t),this.volumeControl=r},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="volume-icon"><div class="short-horizontal"></div><div class="long-horizontal"></div></div>',e},bindEvent:function(){var e=this,t=e._player,r=(this.icon=document.querySelector("#"+e.id()+"  .volume-icon"),s.registerTooltipEvent.call(this,this.el(),(function(){return e._player.muted()||0==e._player.getVolume()?l.get("Muted"):l.get("Volume")})),o.on(this.icon,"click",(function(r){var i;e.volumeControl._shown?t.muted()?t.unMute():t.mute():(i=e.el().offsetLeft,e._player.trigger(a.Private.SettingListHide),e._player.trigger(a.Private.SelectorHide),e._player.trigger(a.Private.VolumeVisibilityChange,i),e._player.trigger(a.Private.MarkerTextHide))})),document.querySelector("#"+e.id()+"  .long-horizontal")),i=document.querySelector("#"+e.id()+"  .short-horizontal");o.on(this.el(),"mouseover",(function(){n.removeClass(r,"volume-hover-animation"),setTimeout((function(){n.addClass(r,"volume-hover-animation")})),setTimeout((function(){n.removeClass(r,"volume-hover-animation"),n.addClass(i,"volume-hover-animation"),setTimeout((function(){n.removeClass(i,"volume-hover-animation"),n.addClass(r,"volume-hover-animation")}),300)}),300)})),o.on(window,"resize",(function(){var t;e.volumeControl._shown&&(t=e.el().offsetLeft,e._player.trigger(a.Private.VolumeUpdatePosition,t))}))}}),t.exports=e},{"../../lang/index":22,"../../lib/dom":31,"../../lib/event":32,"../../player/base/event/eventtype":69,"../component":129,"./util":157,"./volumecontrol":159}],159:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lib/event"),a=e("../../player/base/event/eventtype");e("./util"),e("../../lang/index"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-volume-control"),this._shown=!1},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="volume-range"><div class="volume-value"></div><div class="volume-cursor"></div></div>',e},bindEvent:function(){var e=this;this.icon=document.querySelector("#"+e._player.id()+"  .volume-icon"),this.control=document.querySelector("#"+e.id()),this.volumnValue=document.querySelector("#"+e.id()+"  .volume-value"),this.volumnRange=document.querySelector("#"+e.id()+"  .volume-range"),this.volumnCursor=document.querySelector("#"+e.id()+"  .volume-cursor"),this._player.on(a.Private.VolumeVisibilityChange,(function(t){var r;t=t.paramData,!e._shown&&t?(r=e._player.getVolume(),e._setVolumnUI(r),n.css(e.control,"display","block"),t&&e._updatePosition(t),e._shown=!0):e._hide()})),this._player.on(a.Private.VolumeUpdatePosition,(function(t){t=t.paramData,e._shown&&e._updatePosition(t)})),this._player.on(a.Private.ControlBarClick,(function(t){n.hasClass(t.paramData.target,"prism-controlbar-bg")&&e._hide()})),o.on(this.volumnRange,"click",(function(t){(t=n.getPointerPosition(e.volumnRange,t).y)<0||1<t||(e._setVolumnUI(t=1<(t=t<0?0:t)?1:t),e._setMuteUI(t),e._player.setVolume(t))})),o.on(this._player.tag,"click",(function(t){t&&t.target==t.currentTarget&&e._hide()})),o.on(this._player.tag,"touchstart",(function(t){t&&t.target==t.currentTarget&&e._hide()})),o.on(this.volumnCursor,"mousedown",(function(t){e._onMouseDown(t)})),o.on(this.volumnCursor,"touchstart",(function(t){e._onMouseDown(t)})),this._player.on(a.Private.VolumnChanged,(function(t){-1<(t=t.paramData)&&e._setVolumnUI(t),e._setMuteUI(t)})),o.on(this.control,"mouseleave",(function(){e._offEvent(),e._hide()})),o.on(this.control,"mouseover",(function(){n.addClass(e.control,"hover")})),e._rangeBottom=e._getBottom()},_getBottom:function(){var e;return window.getComputedStyle?(e=window.getComputedStyle(this.volumnRange,null).getPropertyValue("bottom"),parseFloat(e)):26},_onMouseDown:function(e){var t=this;e.preventDefault(),o.on(this.control,"mousemove",(function(e){t._onMouseMove(e)})),o.on(this.control,"touchmove",(function(e){t._onMouseMove(e)})),o.on(this._player.tag,"mouseup",(function(e){t._onMouseUp(e)})),o.on(this._player.tag,"touchend",(function(e){t._onMouseUp(e)})),o.on(this.control,"mouseup",(function(e){t._onMouseUp(e)})),o.on(this.control,"touchend",(function(e){t._onMouseUp(e)}))},_onMouseUp:function(e){e.preventDefault(),this._offEvent(),this.volumnRange.offsetHeight&&(e=(this.volumnValue.offsetHeight/this.volumnRange.offsetHeight).toFixed(2),this._player.setVolume(e),this._setMuteUI(e))},_onMouseMove:function(e){e.preventDefault(),(e=n.getPointerPosition(this.volumnRange,e).y)<0||1<e||this._setVolumnUI(e=1<(e=e<0?0:e)?1:e)},_getPosition:function(e){for(var t=this.volumnRange,r=0;t=t.offsetParent;)r+=t.offsetTop;var i=this.volumnRange.offsetHeight,n=this.volumnCursor.offsetHeight,o=(e.touches?e.touches[0]:e).pageY;return(i-((o=i<o-r?e.clientY:o)-r)+n)/this.volumnRange.offsetHeight},_offEvent:function(){o.off(this._player.tag,"mouseup"),o.off(this._player.tag,"touchend"),o.off(this.control,"mousemove"),o.off(this.control,"touchmove"),o.off(this.control,"mouseup"),o.off(this.control,"touchend")},_setMuteUI:function(e){isNaN(e)||(0==e||-1==e?n.addClass(this.icon,"mute"):n.removeClass(this.icon,"mute"))},_setVolumnUI:function(e){isNaN(e)||(n.css(this.volumnValue,"height",100*e+"%"),n.css(this.volumnCursor,"bottom",100*(e=1==e?.99:e)+"%"))},_hide:function(){n.css(this.control,"display","none"),this._shown=!1},_updatePosition:function(e){n.css(this.control,"left",e-5+"px")}}),t.exports=e},{"../../lang/index":22,"../../lib/dom":31,"../../lib/event":32,"../../player/base/event/eventtype":69,"../component":129,"./util":157}],160:[function(e,t,r){t.exports={H5Loading:e("./component/h5-loading"),bigPlayButton:e("./component/big-play-button"),controlBar:e("./component/controlbar"),progress:e("./component/progress"),playButton:e("./component/play-button"),liveDisplay:e("./component/live-display"),timeDisplay:e("./component/time-display"),fullScreenButton:e("./component/fullscreen-button"),volume:e("./component/volume"),snapshot:e("./component/snapshot"),errorDisplay:e("./component/error-display"),infoDisplay:e("./component/info-display"),liveShiftProgress:e("../commonui/liveshiftprogress"),liveShiftTimeDisplay:e("../commonui/livetimedisplay"),setting:e("./component/setting/button"),subtitle:e("./component/cc-button"),thumbnail:e("./component/thumbnail"),tooltip:e("./component/tooltip")}},{"../commonui/liveshiftprogress":12,"../commonui/livetimedisplay":13,"./component/big-play-button":130,"./component/cc-button":131,"./component/controlbar":132,"./component/error-display":134,"./component/fullscreen-button":135,"./component/h5-loading":136,"./component/info-display":137,"./component/live-display":138,"./component/play-button":140,"./component/progress":141,"./component/setting/button":145,"./component/snapshot":152,"./component/thumbnail":154,"./component/time-display":155,"./component/tooltip":156,"./component/volume":158}]},{},[15])(15)},module.exports=e()}}]);
//# sourceMappingURL=column.lib_b3b2c8c3.a2e27adb021e8d3a7a56.js.map